<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Irmin</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Irmin</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Irmin public API.</p>
      
      <p><code>Irmin</code> is a library to design and use persistent stores with
built-in snapshot, branching and reverting mechanisms. Irmin uses
concepts similar to <a href="http://git-scm.com/">Git</a> but it exposes
them as a high level library instead of a complex command-line
frontend. It features a <em>bidirectional</em> Git backend,
fully-compatible with the usual Git tools and workflows.</p>
      
      <p>Irmin is designed to use a large variety of backends. It is
written in pure OCaml and does not depend on external C stubs; it
is thus very portable and aims is to run everywhere, from Linux to
Xen unikernels.</p>
      
      <p>Consult the <a href="index.html#/label:basics">basics</a> and <a href="index.html#/label:examples">examples</a> of use for a quick start.</p>
      
      <p><em>Release %%VERSION%% - %%MAINTAINER%%</em></p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/val:version">
  <a href="index.html#/val:version" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> version : string
    
      <div class="doc">
        
      <p>The version of the library.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Preliminaries</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Hum">
  <a href="index.html#/module:Hum" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Hum : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Serializable data with reversible human-readable
representations.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Human-representable values</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Hum/modtype:S">
  <a href="index.html#/module:Hum/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
    <div class="include">
    <span class="keyword">include</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a> 
    </div>
  
  <div class="region" id="/module:Hum/modtype:S/val:to_hum">
  <a href="index.html#/module:Hum/modtype:S/val:to_hum" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> to_hum : <a href="index.html#/module:Hum/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Display a value using its human readable representation.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Hum/modtype:S/val:of_hum">
  <a href="index.html#/module:Hum/modtype:S/val:of_hum" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_hum : string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hum/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p>Convert an human readable representation of a value into its
abstract value.</p>
      
        
  <div class="tag raises">
    <span class="label">Raises</span> <code>Invalid_argument</code> if the string does not represent
anything meaningful.
  </div>
  
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Hum/type:t">
  <a href="index.html#/module:Hum/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a t = (<span class="keyword">module</span> <a href="index.html#/module:Hum/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Hum/modtype:S/type:t">t</a> = 'a)
    
      <div class="doc">
        
      <p>Type for implementation of <code>S</code> for values of type <code>'a</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Task">
  <a href="index.html#/module:Task" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Task : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Tasks are used to keep track of the origin of reads and writes in
the store. Every high-level operation is expected to have its own
task, which is passed to every low-level calls.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Task</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a> 
    </div>
  
  <div class="region" id="/module:Task/val:create">
  <a href="index.html#/module:Task/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : date:int64 <span class="rarr"><span>-&gt;</span></span> owner:string <span class="rarr"><span>-&gt;</span></span> ?uid:int64 <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Task/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a new task.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Task/val:date">
  <a href="index.html#/module:Task/val:date" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> date : <a href="index.html#/module:Task/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> int64
    
      <div class="doc">
        
      <p>Get the task date.</p>
      
      <p>The date is computed by the user user when calling the
<a href="index.html#/module:Task/val:create">create</a> function. When available,
<code>Unix.gettimeofday ()</code> is a good value for such date. On more
esoteric platforms, any monotonic counter is a fine value as
well. On the Git backend, the date will be translated into the
commit <em>Date</em> field.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Task/val:owner">
  <a href="index.html#/module:Task/val:owner" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> owner : <a href="index.html#/module:Task/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Get the task owner.</p>
      
      <p>The owner identifies the entity (human, unikernel, process,
thread, etc) performing an operation. For the Git backend, this
will be directly translated into the <em>Author</em> field.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Task/val:uid">
  <a href="index.html#/module:Task/val:uid" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> uid : <a href="index.html#/module:Task/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> int64
    
      <div class="doc">
        
      <p>Get the task unique identifier.</p>
      
      <p>By default, it is freshly generated on each call to
<a href="index.html#/module:Task/val:create">create</a>. That identifier is useful for debugging
purposes, for instance to relate debug lines to the tasks which
cause them, and might appear in one line of the commit message
for the Git backend.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Task/val:messages">
  <a href="index.html#/module:Task/val:messages" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> messages : <a href="index.html#/module:Task/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list
    
      <div class="doc">
        
      <p>Get the messages associated to the task.</p>
      
      <p>Text messages can be added to a task either at creation time,
using <a href="index.html#/module:Task/val:create">create</a>, or can be appended on already
created tasks using the <a href="index.html#/module:Task/val:add">add</a> function. For
the Git backend, this will be translated to the commit
message.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Task/val:add">
  <a href="index.html#/module:Task/val:add" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add : <a href="index.html#/module:Task/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Add a message to the task messages list. See
<a href="index.html#/module:Task/val:messages">messages</a> for more details.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge">
  <a href="index.html#/module:Merge" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Merge : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Merge</code> provides functions to build custom 3-way merge operators
for various user-defined contents.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Merge Results</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Merge/type:result">
  <a href="index.html#/module:Merge/type:result" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a result = [ <div class="cons">| `Ok <span class="keyword">of</span> 'a</div><div class="cons">| `Conflict <span class="keyword">of</span> string</div> ]
    
      <div class="doc">
        
      <p>Type for merge results.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/module:Result">
  <a href="index.html#/module:Merge/module:Result" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Result : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S1">S1</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S1/type:t">t</a> = 'a <a href="index.html#/module:Merge/type:result">result</a></div>
      
      <div class="doc">
        
      <p>Base functions on results.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:bind">
  <a href="index.html#/module:Merge/val:bind" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> bind : 'a <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Monadic bind for results.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/exn:Conflict">
  <a href="index.html#/module:Merge/exn:Conflict" class="anchor">#</a>
  
  <div class="exn">
    <span class="keyword">exception</span> Conflict <span class="keyword">of</span> string
    
      <div class="doc">
        
      <p>Exception which might be raised when merging.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:exn">
  <a href="index.html#/module:Merge/val:exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> exn : 'a <a href="index.html#/module:Merge/type:result">result</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Convert <code>`Conflict</code> results to <code>Conflict</code> exceptions.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Merge Combinators</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Merge/type:t">
  <a href="index.html#/module:Merge/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a t = old:'a <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Signature of a merge function.</p>
      <pre>              /----&gt; t1 ----\
      ----&gt; old              |--&gt; result
              \----&gt; t2 ----/</pre>
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:seq">
  <a href="index.html#/module:Merge/val:seq" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> seq : 'a <a href="index.html#/module:Merge/type:t">t</a> list <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Call the merge functions in sequence. Stop as soon as one is <em>not</em> returning a conflict.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:apply">
  <a href="index.html#/module:Merge/val:apply" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> apply : ('a <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>The <code>apply</code> combinator is useful to untie recursive loops when
building a complex merge function.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:biject">
  <a href="index.html#/module:Merge/val:biject" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> biject : 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> 'b) <span class="rarr"><span>-&gt;</span></span> ('b <span class="rarr"><span>-&gt;</span></span> 'a) <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Use the merge function defined in another domain. The domain
converting functions might be partial: in that case the <em>convention</em> is that they raise <code>Not_found</code> on undefined
entries.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:biject'">
  <a href="index.html#/module:Merge/val:biject'" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> biject' : 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> 'b <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> ('b <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:Merge/val:biject">biject</a> but with blocking domain
converting functions.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Basic Merges</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Merge/val:default">
  <a href="index.html#/module:Merge/val:default" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> default : 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a default merge function. This is a simple merge
functions which support changes in one branch at the time:</p>
      <ul><li>if <code>t1=t2</code> then the result of the merge is <code>`OK t1</code>;</li><li>if <code>t1=old</code> then the result of the merge is <code>`OK t2</code>;</li><li>if <code>t2=old</code> then return <code>`OK t1</code>;</li><li>otherwise the result is <code>`Conflict</code>.</li></ul>
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:string">
  <a href="index.html#/module:Merge/val:string" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> string : string <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>The default string merge function. Do not anything clever, just
compare the strings using the <code>default</code> merge function.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:some">
  <a href="index.html#/module:Merge/val:some" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> some : 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a option <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Lift a merge function to optional values of the same type. If all
the provided values are inhabited, then call the provided merge
function, otherwise use the same behavior as <code>create</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:pair">
  <a href="index.html#/module:Merge/val:pair" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pair : 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a * 'b) <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Lift merge functions to pair of elements.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:triple">
  <a href="index.html#/module:Merge/val:triple" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> triple : 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'c <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'c <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a * 'b * 'c) <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Lift merge functions to triple of elements.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:set">
  <a href="index.html#/module:Merge/val:set" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set : (<span class="keyword">module</span> <a href="../../../../ocaml.4.02.1+doc/stdlib/set/">Set</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/set/#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../../ocaml.4.02.1+doc/stdlib/set/#/modtype:S/type:t">t</a> = 'a) <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>List merge functions to sets.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Counters and Multisets</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Merge/type:counter">
  <a href="index.html#/module:Merge/type:counter" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> counter = int
    
      <div class="doc">
        
      <p>The type for counter values. It is expected that the only valid
operations on counters are <em>increment</em> and <em>decrement</em>. The
following merge functions ensure that the counter semantics is
preserved: <em>i.e.</em> it ensures that the number of increments and
decrements is preserved.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/val:counter">
  <a href="index.html#/module:Merge/val:counter" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> counter : int <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>The merge function for mergeable counters.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/module:MSet">
  <a href="index.html#/module:Merge/module:MSet" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> MSet : <span class="keyword">functor</span> (M : <a href="../../../../ocaml.4.02.1+doc/stdlib/map/">Map</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/map/#/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Multi-sets.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/module:Merge/module:MSet/val:merge">
  <a href="index.html#/module:Merge/module:MSet/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : <a href="index.html#/module:Merge/type:counter">counter</a> <a href="index.html#/module:Merge/module:MSet/modarg:1:M">M</a>.<a href="index.html#/module:Merge/module:MSet/modarg:1:M/type:t">t</a> <a href="index.html#/module:Merge/type:t">t</a>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Maps and Association Lists</h1>
    </div>
        
      </div>
    
      <div class="doc">
        
      <p>We consider that the only valid operations for maps and
association lists are:</p>
      <ul><li>Adding a new bindings to the map.</li><li>Removing a binding from the map.</li><li>Replacing an existing binding with a different value.</li><li><em>Trying to add an already existing binding is a no-op</em>.</li></ul>
      <p>We thus assume that no operation on maps is modifying the <em>key</em> names. So the following merge functions ensures that <em>(i)</em> new bindings are preserved <em>(ii)</em> removed bindings stay
removed and <em>(iii)</em> modified bindings are merged using the
merge function of values.</p>
      
      <p><b>Note:</b> We only consider sets of bindings, instead of
multisets. Application developer should take care of concurrent
adding and removal of similar bindings themselves, by using the
appropriate <a href="index.html#/module:Merge/module:MSet">multi-sets</a>.</p>
      
        
      </div>
    
  <div class="region" id="/module:Merge/val:alist">
  <a href="index.html#/module:Merge/val:alist" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> alist : 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a * 'b) list <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Lift the merge functions to association lists.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/module:Map">
  <a href="index.html#/module:Merge/module:Map" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Map : <span class="keyword">functor</span> (M : <a href="../../../../ocaml.4.02.1+doc/stdlib/map/">Map</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/map/#/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (X : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0/type:t">t</a> = <a href="index.html#/module:Merge/module:Map/modarg:1:M">M</a>.<a href="index.html#/module:Merge/module:Map/modarg:1:M/type:key">key</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Lift the merge functions to maps.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Merging Maps</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Merge/module:Map/val:merge">
  <a href="index.html#/module:Merge/module:Map/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : 'a <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/module:Map/modarg:1:M">M</a>.<a href="index.html#/module:Merge/module:Map/modarg:1:M/type:t">t</a> <a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Lift to <code>X.t</code> maps.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/module:OP">
  <a href="index.html#/module:Merge/module:OP" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> OP : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Useful merge operators.</p>
      
      <p><code>open Irmin.Merge.OP</code> at the top of your file to use them.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Useful operators</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Merge/module:OP/val:ok">
  <a href="index.html#/module:Merge/module:OP/val:ok" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> ok : 'a <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Return <code>`Ok x</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/module:OP/val:conflict">
  <a href="index.html#/module:Merge/module:OP/val:conflict" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> conflict : ('a, unit, string, 'b <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <a href="../../../../ocaml.4.02.1+doc/stdlib/pervasives/">Pervasives</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/pervasives/#/type:format4">format4</a> <span class="rarr"><span>-&gt;</span></span> 'a
    
      <div class="doc">
        
      <p>Return <code>`Conflict str</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Merge/module:OP/val:(&gt;&gt;|)">
  <a href="index.html#/module:Merge/module:OP/val:(%3E%3E%7C)" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> (&gt;&gt;|) : 'a <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <code>bind</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Stores</h1>
    </div>
        
      </div>
    
  <div class="region" id="/type:task">
  <a href="index.html#/type:task" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> task = <a href="index.html#/module:Task">Task</a>.<a href="index.html#/module:Task/type:t">t</a>
    
      <div class="doc">
        
      <p>The type for user-defined tasks. See <a href="index.html#/module:Task">Task</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:config">
  <a href="index.html#/type:config" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> config
    
      <div class="doc">
        
      <p>The type for backend-specific configuration values.</p>
      
      <p>Every backend has different configuration options, which are kept
abstract to the user.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
      <p>An Irmin store is automatically built from a number of lower-level
stores, implementing fewer operations, such as <a href="index.html#/modtype:AO">append-only</a>
and <a href="index.html#/modtype:RW">read-write</a> stores. These low-level stores are provided
by various backends.</p>
      
        
      </div>
    
  <div class="region" id="/modtype:RO">
  <a href="index.html#/modtype:RO" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> RO = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Read-only stores.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Read-only stores</h1>
    </div>
        
      </div>
    
  <div class="region" id="/modtype:RO/type:t">
  <a href="index.html#/modtype:RO/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>Type for stores.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RO/type:key">
  <a href="index.html#/modtype:RO/type:key" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> key
    
      <div class="doc">
        
      <p>Type for keys.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RO/type:value">
  <a href="index.html#/modtype:RO/type:value" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> value
    
      <div class="doc">
        
      <p>Type for values.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RO/val:create">
  <a href="index.html#/modtype:RO/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : <a href="index.html#/type:config">config</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RO/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>create config task</code> is a function returning fresh store
handles, with the configuration <code>config</code> and fresh tasks
computed using <code>task</code>. <code>config</code> is provided by the backend and
<code>task</code> is the provided by the user. The operation might be
blocking, depending on the backend.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RO/val:task">
  <a href="index.html#/modtype:RO/val:task" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> task : <a href="index.html#/modtype:RO/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>
    
      <div class="doc">
        
      <p><code>task t</code> is the task associated to the store handle <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RO/val:read">
  <a href="index.html#/modtype:RO/val:read" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read : <a href="index.html#/modtype:RO/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RO/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RO/type:value">value</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Read a value from the store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RO/val:read_exn">
  <a href="index.html#/modtype:RO/val:read_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_exn : <a href="index.html#/modtype:RO/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RO/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RO/type:value">value</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <code>read</code> but raise <code>Not_found</code> if the key does not
exist.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RO/val:mem">
  <a href="index.html#/modtype:RO/val:mem" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> mem : <a href="index.html#/modtype:RO/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RO/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> bool <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Check if a key exists.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:AO">
  <a href="index.html#/modtype:AO" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> AO = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Append-only store.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Append-only stores</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:RO">RO</a> 
    </div>
  
  <div class="region" id="/modtype:AO/val:add">
  <a href="index.html#/modtype:AO/val:add" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add : <a href="index.html#/modtype:AO/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:AO/type:value">value</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:AO/type:key">key</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Write the contents of a value to the store. That's the
responsibility of the append-only store to generate a
consistent key.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RW">
  <a href="index.html#/modtype:RW" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> RW = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Read-write stores.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Read-write stores</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:RO">RO</a> 
    </div>
  
  <div class="region" id="/modtype:RW/val:iter">
  <a href="index.html#/modtype:RW/val:iter" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter : <a href="index.html#/modtype:RW/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/modtype:RW/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>iter t fn</code> call the function <code>fn</code> on all <code>t</code>'s keys.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RW/val:update">
  <a href="index.html#/modtype:RW/val:update" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> update : <a href="index.html#/modtype:RW/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RW/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RW/type:value">value</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>update t k v</code> replaces the contents of <code>k</code> by <code>v</code> in <code>t</code>. If
<code>k</code> is not already defined in <code>t</code>, create a fresh binding.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RW/val:remove">
  <a href="index.html#/modtype:RW/val:remove" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remove : <a href="index.html#/modtype:RW/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RW/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>remove t k</code> remove the key <code>k</code> in <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RW/val:watch">
  <a href="index.html#/modtype:RW/val:watch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> watch : <a href="index.html#/modtype:RW/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RW/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RW/type:value">value</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/">Lwt_stream</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>watch t k</code> is the stream values associated to the key <code>k</code>. The
stream return a new value every time the bindings is modified in
<code>t</code>. It return <code>None</code> if the binding is removed.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
      <p>FIXME: add move</p>
      
        
      </div>
    </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:HRW">
  <a href="index.html#/modtype:HRW" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> HRW = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Hierarchical read-write stores.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Hierarchical read-write stores</h1>
    </div>
        
      </div>
    
      <div class="doc">
        
      <p>Hierarchical read-write stores are read-write stores using
<a href="index.html#/module:Path/modtype:S/type:t">paths</a> as keys. They are a very simplified
abstraction of filesystems.</p>
      
        
      </div>
    
  <div class="region" id="/modtype:HRW/type:step">
  <a href="index.html#/modtype:HRW/type:step" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> step
    
      <div class="doc">
        
      <p>The type for step values. A step is a path component.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:RW">RW</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:RW/type:key">key</a> = <a href="index.html#/modtype:HRW/type:step">step</a> list 
    </div>
  
  <div class="region" id="/modtype:HRW/val:list">
  <a href="index.html#/modtype:HRW/val:list" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> list : <a href="index.html#/modtype:HRW/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:HRW/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:HRW/type:key">key</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>list t k</code> list the sub-paths of the path <code>k</code> in <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:HRW/val:remove_rec">
  <a href="index.html#/modtype:HRW/val:remove_rec" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remove_rec : <a href="index.html#/modtype:HRW/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:HRW/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/modtype:RW/val:remove">RW.remove</a> but removes all the sub-paths
recursively.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC">
  <a href="index.html#/modtype:BC" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> BC = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Branch-consistent stores.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Branch-consistent Store</h1>
    </div>
      <p>They are two kinds of branch consistent stores: the
<a href="index.html#/modtype:BC/label:persistent">persistent</a> and the <a href="index.html#/modtype:BC/label:temporary">temporary</a> ones.</p>
      
  <div class="region" id="/modtype:BC/label:persistent">
  <a href="index.html#/modtype:BC/label:persistent" class="anchor">#</a>
  
    <h2 class="section level_2">Persistent Stores</h2>
    
  </div>
  
      <p>The persistent stores are associated to a branch name, or
<a href="index.html#/modtype:BC/type:tag">tag</a>. The tag value is updated every time the
store is updated, so every handle connected or which will be
connected to the same tag will see the changes.</p>
      
      <p>These stores can be created using the
<a href="index.html#/modtype:BC/val:of_tag">of_tag</a> functions.</p>
      
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:HRW">HRW</a> 
    </div>
  
  <div class="region" id="/modtype:BC/type:tag">
  <a href="index.html#/modtype:BC/type:tag" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> tag
    
      <div class="doc">
        
      <p>Type for branch names, or tags. Tags usually share a common
global namespace and that's the user responsibility to avoid
name-clashes.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:of_tag">
  <a href="index.html#/modtype:BC/val:of_tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_tag : <a href="index.html#/type:config">config</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>create t tag</code> is a persistent store handle. Similar to
<code>create</code>, but use the <code>tag</code> branch instead of the <code>master</code>
one.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:tag">
  <a href="index.html#/modtype:BC/val:tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tag : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> option
    
      <div class="doc">
        
      <p><code>tag t</code> is the tag associated to the store handle <code>t</code>. <code>None</code>
means that the branch is not persistent.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:tag_exn">
  <a href="index.html#/modtype:BC/val:tag_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tag_exn : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a>
    
      <div class="doc">
        
      <p>Same as <code>tag</code> but raise <code>Not_found</code> if the store handle is not
persistent.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:tags">
  <a href="index.html#/modtype:BC/val:tags" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tags : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>The list of all the tags of the store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:rename_tag">
  <a href="index.html#/modtype:BC/val:rename_tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> rename_tag : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Ok</div><div class="cons">| `Duplicated_tag</div> ] <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Change the current tag name. Fail if a tag with the same name
already exists. The head is unchanged.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:update_tag">
  <a href="index.html#/modtype:BC/val:update_tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> update_tag : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>update_tag t tag</code> updates <code>t</code>'s current branch with the
contents of the branch named <code>tag</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:merge_tag">
  <a href="index.html#/modtype:BC/val:merge_tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_tag : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>merge_tag t tag</code> merges the contents of the branch named <code>tag</code>
into <code>t</code>'s current branch. The two branches are still
independent.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:merge_tag_exn">
  <a href="index.html#/modtype:BC/val:merge_tag_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_tag_exn : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/modtype:BC/val:merge_tag">merge_tag</a> but raise <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a> in case of a
conflict.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:switch">
  <a href="index.html#/modtype:BC/val:switch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> switch : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Switch the store contents the be same as the contents of the
given branch name. The two branches are still independent.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
  <div class="region" id="/modtype:BC/label:temporary">
  <a href="index.html#/modtype:BC/label:temporary" class="anchor">#</a>
  
    <h2 class="section level_2">Temporary Stores</h2>
    
  </div>
  
      <p>The temporary stores do not use global branch names. Instead,
the operations are relative to a given store revision: a
<a href="index.html#/modtype:BC/type:head">head</a>. Every operation updates the store as a
normal persistent store, but the value of head is only kept
into the local store handle and it is not persisted into the
store -- this means it cannot be easily shared by concurrent
processes or loaded back in the future. In the Git
terminology, these store handle are said to be <i>detached
heads</i>.</p>
      
        
      </div>
    
  <div class="region" id="/modtype:BC/type:head">
  <a href="index.html#/modtype:BC/type:head" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> head
    
      <div class="doc">
        
      <p>Type for head values.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:of_head">
  <a href="index.html#/modtype:BC/val:of_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_head : <a href="index.html#/type:config">config</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:head">head</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a temporary store handle, which will not persist as it
has no associated to any persistent tag name.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:head">
  <a href="index.html#/modtype:BC/val:head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> head : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:head">head</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Return the head commit. This works for both persistent and
temporary stores. In the case of a persistent store, this
involves looking into the value associated to the branch tag,
so this might blocks. In the case of a temporary store, it is
a simple (non-blocking) look-up in the store handle local
state.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:head_exn">
  <a href="index.html#/modtype:BC/val:head_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> head_exn : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:head">head</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <code>read_head</code> but raise <code>Not_found</code> if the commit does
not exist.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:branch">
  <a href="index.html#/modtype:BC/val:branch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> branch : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Tag <span class="keyword">of</span> <a href="index.html#/modtype:BC/type:tag">tag</a></div><div class="cons">| `Head <span class="keyword">of</span> <a href="index.html#/modtype:BC/type:head">head</a></div> ]
    
      <div class="doc">
        
      <p><code>branch t</code> is the current branch of the store <code>t</code>. Can either be
a persistent store with a <code>tag</code> name or a detached <code>head</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:heads">
  <a href="index.html#/modtype:BC/val:heads" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> heads : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:head">head</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>The list of all the heads of the store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:detach">
  <a href="index.html#/modtype:BC/val:detach" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> detach : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Detach the current branch, <em>i.e.</em> it is not associated to a
tag anymore.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:update_head">
  <a href="index.html#/modtype:BC/val:update_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> update_head : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:head">head</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Set the commit head.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:merge_head">
  <a href="index.html#/modtype:BC/val:merge_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_head : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:head">head</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Merge a commit with the current branch.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:merge_head_exn">
  <a href="index.html#/modtype:BC/val:merge_head_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_head_exn : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:head">head</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/modtype:BC/val:merge_head">merge_head</a> but raise <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a>
in case of a conflict.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:watch_head">
  <a href="index.html#/modtype:BC/val:watch_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> watch_head : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/modtype:BC/type:key">key</a> * <a href="index.html#/modtype:BC/type:head">head</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/">Lwt_stream</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Watch changes for a given collection of keys and the ones they
have recursive access. Return the stream of heads corresponding
to the modified keys.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Clones and Merges</h2>
    </div>
        
      </div>
    
  <div class="region" id="/modtype:BC/val:clone">
  <a href="index.html#/modtype:BC/val:clone" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clone : ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Ok <span class="keyword">of</span> 'a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a></div><div class="cons">| `Duplicated_tag</div> ] <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Fork the store <code>t</code>, using the given branch name. Return <code>None</code>
if a branch with the same name already exists.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:clone_force">
  <a href="index.html#/modtype:BC/val:clone_force" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clone_force : ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/modtype:BC/val:clone">clone</a> but delete and update the existing
branch if a branch with the same name already exists.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:merge">
  <a href="index.html#/modtype:BC/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> into:('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>merge x t i</code> merges <code>t x</code>'s current branch into <code>i x</code>'s current
branch. After that operation, the two stores are still
independent.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:merge_exn">
  <a href="index.html#/modtype:BC/val:merge_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_exn : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> into:('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/modtype:BC/val:merge">merge</a> but raise <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a> in case
of a conflict.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Slices</h2>
    </div>
        
      </div>
    
  <div class="region" id="/modtype:BC/type:slice">
  <a href="index.html#/modtype:BC/type:slice" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> slice
    
      <div class="doc">
        
      <p>Type for store slices.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:export">
  <a href="index.html#/modtype:BC/val:export" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> export : ?full:bool <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> ?min:<a href="index.html#/modtype:BC/type:head">head</a> list <span class="rarr"><span>-&gt;</span></span> ?max:<a href="index.html#/modtype:BC/type:head">head</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:slice">slice</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>export t ~depth ~min ~max</code> exports the store slice between
<code>min</code> and <code>max</code>, using at most <code>depth</code> history depth (starting
from the max).</p>
      
      <p>If <code>max</code> is not specified, use the current <code>heads</code>. If <code>min</code> is
not specified, use an unbound past (but can be still limited by
<code>depth</code>).</p>
      
      <p><code>depth</code> is used to limit the depth of the commit history. <code>None</code>
here means no limitation.</p>
      
      <p>If <code>full</code> is set (default is true) the full graph, including the
commits, nodes and contents, is exported, otherwise it is the
commit history graph only.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:BC/val:import">
  <a href="index.html#/modtype:BC/val:import" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> import : <a href="index.html#/modtype:BC/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BC/type:slice">slice</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>import t s</code> imports the contents of the slice <code>s</code> in <code>t</code>. Do
not modify tags.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">User-Defined Contents</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Path">
  <a href="index.html#/module:Path" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Path : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Store paths.</p>
      
      <p>An Irmin <a href="../../../../irmin.0.9.1/_build/lib/irmin/#/modtype:S">store</a> binds <a href="index.html#/module:Path/modtype:S/type:t">paths</a> to
user-defined <a href="index.html#/module:Contents/modtype:S">contents</a>. Paths are composed by basic
elements, that we call <a href="index.html#/module:Path/modtype:S/type:step">steps</a>. The following <code>Path</code>
module provides functions to manipulate steps and paths.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Path</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Path/modtype:STEP">
  <a href="index.html#/module:Path/modtype:STEP" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> STEP = <a href="index.html#/module:Hum">Hum</a>.<a href="index.html#/module:Hum/modtype:S">S</a>
    </div>
    
      <div class="doc">
        
      <p>Signature for path steps.</p>
      
        
      </div>
    
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Path/modtype:S">
  <a href="index.html#/module:Path/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Signature for path implementations.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Path</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Path/modtype:S/type:step">
  <a href="index.html#/module:Path/modtype:S/type:step" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> step
    
      <div class="doc">
        
      <p>Type type for basic steps.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Path/modtype:S/type:t">
  <a href="index.html#/module:Path/modtype:S/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t = <a href="index.html#/module:Path/modtype:S/type:step">step</a> list
    
      <div class="doc">
        
      <p>The type for path values.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Path/modtype:S/module:Step">
  <a href="index.html#/module:Path/modtype:S/module:Step" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Step : <a href="index.html#/module:Path/modtype:STEP">STEP</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Path/modtype:STEP/type:t">t</a> = <a href="index.html#/module:Path/modtype:S/type:step">step</a></div>
      
      
  </div>
  
  </div>
  
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/module:Hum">Hum</a>.<a href="index.html#/module:Hum/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Hum/modtype:S/type:t">t</a> := <a href="index.html#/module:Path/modtype:S/type:t">t</a> 
    </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Path/module:Make">
  <a href="index.html#/module:Path/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (S : <a href="index.html#/module:Path/modtype:STEP">STEP</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Path/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Path/modtype:S/type:step">step</a> = <a href="index.html#/module:Path/module:Make/modarg:1:S">S</a>.<a href="index.html#/module:Path/module:Make/modarg:1:S/type:t">t</a></div>
      
      <div class="doc">
        
      <p>A list of steps, representing keys in an Irmin store.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Path/module:String_list">
  <a href="index.html#/module:Path/module:String_list" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> String_list : <a href="index.html#/module:Path/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Path/modtype:S/type:step">step</a> = string</div>
      
      <div class="doc">
        
      <p>An implementation of paths as string lists.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Hash">
  <a href="index.html#/module:Hash" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Hash : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Hashing functions.</p>
      
      <p><code>Hash</code> provides user-defined hash function to digest serialized
contents. Some <a href="index.html#/label:backend">backends</a> might be parameterize by such
a hash functions, other might work with a fixed one (for instance,
the Git format use only SHA1).</p>
      
      <p>An <a href="index.html#/module:Hash/module:SHA1">SHA1</a> implementation is available to pass to the
backends.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Contents Hashing</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Hash/exn:Invalid">
  <a href="index.html#/module:Hash/exn:Invalid" class="anchor">#</a>
  
  <div class="exn">
    <span class="keyword">exception</span> Invalid <span class="keyword">of</span> string
    
      <div class="doc">
        
      <p>Exception raised when parsing a human-readable representation of
a hash.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Hash/modtype:S">
  <a href="index.html#/module:Hash/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Signature for hash values.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        
      <p>Signature for unique identifiers.</p>
      
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/module:Hum">Hum</a>.<a href="index.html#/module:Hum/modtype:S">S</a> 
    </div>
  
  <div class="region" id="/module:Hash/modtype:S/val:digest">
  <a href="index.html#/module:Hash/modtype:S/val:digest" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> digest : <a href="../../../../cstruct.1.5.0/_build/lib/cstruct/">Cstruct</a>.<a href="../../../../cstruct.1.5.0/_build/lib/cstruct/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p>Compute a deterministic store key from a cstruct value.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Hash/modtype:S/val:has_kind">
  <a href="index.html#/module:Hash/modtype:S/val:has_kind" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> has_kind : [&gt; <div class="cons">| `SHA1</div> ] <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>The kind of generated hash.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Hash/modtype:S/val:to_raw">
  <a href="index.html#/module:Hash/modtype:S/val:to_raw" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> to_raw : <a href="index.html#/module:Hash/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cstruct.1.5.0/_build/lib/cstruct/">Cstruct</a>.<a href="../../../../cstruct.1.5.0/_build/lib/cstruct/#/type:t">t</a>
    
      <div class="doc">
        
      <p>The raw hash value.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Hash/modtype:S/val:of_raw">
  <a href="index.html#/module:Hash/modtype:S/val:of_raw" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_raw : <a href="../../../../cstruct.1.5.0/_build/lib/cstruct/">Cstruct</a>.<a href="../../../../cstruct.1.5.0/_build/lib/cstruct/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p>Abstract an hash value.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Hash/module:SHA1">
  <a href="index.html#/module:Hash/module:SHA1" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> SHA1 : <a href="index.html#/module:Hash/modtype:S">S</a></div>
      
      <div class="doc">
        
      <p>SHA1 digests</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents">
  <a href="index.html#/module:Contents" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Contents : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Contents</code> specifies how user-defined contents need to be <em>serializable</em> and <em>mergeable</em>.</p>
      
      <p>The user need to provide:</p>
      <ul><li>a <code>to_sexp</code> function for debugging purposes (that might expose
the internal state of abstract values)</li><li>a pair of <code>to_json</code> and <code>of_json</code> functions, to be used by the
REST interface.</li><li>a triple of <code>size_of</code>, <code>write</code> and <code>read</code> functions, to
serialize data on disk or to send it over the network.</li><li>a 3-way <code>merge</code> function, to handle conflicts between multiple
versions of the same contents.</li></ul>
      <p>Default contents for <a href="index.html#/module:Contents/module:String">string</a>,
<a href="index.html#/module:Contents/module:Json">JSON</a> and <a href="index.html#/module:Contents/module:Cstruct">C-buffers like</a>
values are provided.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/module:Contents/modtype:S">
  <a href="index.html#/module:Contents/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Signature for store contents</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a> 
    </div>
  
  <div class="region" id="/module:Contents/modtype:S/val:merge">
  <a href="index.html#/module:Contents/modtype:S/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : <a href="index.html#/module:Contents/modtype:S/type:t">t</a> <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p>Merge function. Evaluates to <code>`Conflict</code> if the values cannot be
merged properly.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents/module:String">
  <a href="index.html#/module:Contents/module:String" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> String : <a href="index.html#/module:Contents/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:S/type:t">t</a> = string</div>
      
      <div class="doc">
        
      <p>String values where only the last modified value is kept on
merge. If the value has been modified concurrently, the <code>merge</code>
function raises <code>Conflict</code>.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents/module:Json">
  <a href="index.html#/module:Contents/module:Json" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Json : <a href="index.html#/module:Contents/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:S/type:t">t</a> = <a href="../../../../ezjsonm.0.4.0/_build/lib/ezjsonm/">Ezjsonm</a>.<a href="../../../../ezjsonm.0.4.0/_build/lib/ezjsonm/#/type:t">t</a></div>
      
      <div class="doc">
        
      <p>JSON values where only the last modified value is kept on
merge. If the value has been modified concurrently, the <code>merge</code>
function raises <code>Conflict</code>.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents/module:Cstruct">
  <a href="index.html#/module:Contents/module:Cstruct" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Cstruct : <a href="index.html#/module:Contents/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:S/type:t">t</a> = <a href="../../../../cstruct.1.5.0/_build/lib/cstruct/">Cstruct</a>.<a href="../../../../cstruct.1.5.0/_build/lib/cstruct/#/type:t">t</a></div>
      
      <div class="doc">
        
      <p>Cstruct values where only the last modified value is kept on
merge. If the value has been modified concurrently, then this is a
conflict.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents/modtype:STORE">
  <a href="index.html#/module:Contents/modtype:STORE" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> STORE = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Contents store.</p>
      
        
      </div>
    
    
    <div class="sig">
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:AO">AO</a> 
    </div>
  
  <div class="region" id="/module:Contents/modtype:STORE/val:merge">
  <a href="index.html#/module:Contents/modtype:STORE/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : <a href="index.html#/module:Contents/modtype:STORE/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Contents/modtype:STORE/type:key">key</a> <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p><code>merge t</code> lifts the merge functions defined on contents
values to contents key. The merge function will: <em>(i)</em> read
the values associated with the given keys, <em>(ii)</em> use the
merge function defined on values and <em>(iii)</em> write the
resulting values into the store to get the resulting key.</p>
      
      <p>If any of these operation fails, return <code>`Conflict</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents/modtype:STORE/module:Key">
  <a href="index.html#/module:Contents/modtype:STORE/module:Key" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Key : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Hash/modtype:S/type:t">t</a> = <a href="index.html#/module:Contents/modtype:STORE/type:key">key</a></div>
      
      <div class="doc">
        
      <p><code>Key</code> provides base functions for user-defined contents keys.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents/modtype:STORE/module:Val">
  <a href="index.html#/module:Contents/modtype:STORE/module:Val" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Val : <a href="index.html#/module:Contents/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:S/type:t">t</a> = <a href="index.html#/module:Contents/modtype:STORE/type:value">value</a></div>
      
      <div class="doc">
        
      <p><code>Val</code> provides base function for user-defined contents values.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents/module:Make">
  <a href="index.html#/module:Contents/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (S : <span class="keyword">sig</span>
    <div class="sig">
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:AO">AO</a> 
    </div>
  
  <div class="region" id="/module:Contents/module:Make/modarg:1:S/module:Key">
  <a href="index.html#/module:Contents/module:Make/modarg:1:S/module:Key" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Key : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Hash/modtype:S/type:t">t</a> = <a href="index.html#/module:Contents/module:Make/modarg:1:S/type:key">key</a></div>
      
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Contents/module:Make/modarg:1:S/module:Val">
  <a href="index.html#/module:Contents/module:Make/modarg:1:S/module:Val" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Val : <a href="index.html#/module:Contents/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:S/type:t">t</a> = <a href="index.html#/module:Contents/module:Make/modarg:1:S/type:value">value</a></div>
      
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    ) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Contents/modtype:STORE">STORE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:STORE/type:t">t</a> = <a href="index.html#/module:Contents/module:Make/modarg:1:S">S</a>.<a href="index.html#/module:Contents/module:Make/modarg:1:S/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:STORE/type:key">key</a> = <a href="index.html#/module:Contents/module:Make/modarg:1:S">S</a>.<a href="index.html#/module:Contents/module:Make/modarg:1:S/type:key">key</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:STORE/type:value">value</a> = <a href="index.html#/module:Contents/module:Make/modarg:1:S">S</a>.<a href="index.html#/module:Contents/module:Make/modarg:1:S/type:value">value</a></div>
      
      <div class="doc">
        
      <p><code>Make</code> builds a contents store.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Tag">
  <a href="index.html#/module:Tag" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Tag : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>User-defined tags. Tags are used to specify branch names in an
Irmin store.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Tags</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Tag/modtype:S">
  <a href="index.html#/module:Tag/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>A tag implementations specifies base functions on abstract tags
and define a default value for denoting the
<a href="index.html#/module:Tag/modtype:S/val:master">master</a> branch name.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Signature for tags implementations</h1>
    </div>
        
      </div>
    
      <div class="doc">
        
      <p>Signature for tags (i.e. branch names).</p>
      
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/module:Hum">Hum</a>.<a href="index.html#/module:Hum/modtype:S">S</a> 
    </div>
  
  <div class="region" id="/module:Tag/modtype:S/val:master">
  <a href="index.html#/module:Tag/modtype:S/val:master" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> master : <a href="index.html#/module:Tag/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p>The name of the master branch.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Tag/module:String">
  <a href="index.html#/module:Tag/module:String" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> String : <a href="index.html#/module:Tag/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Tag/modtype:S/type:t">t</a> = string</div>
      
      <div class="doc">
        
      <p><code>String</code> is an implementation of <a href="index.html#/module:Tag/modtype:S">S</a> where tags are
strings. The <code>master</code> tag is <code>&quot;master&quot;</code>.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Tag/modtype:STORE">
  <a href="index.html#/module:Tag/modtype:STORE" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> STORE = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p><code>STORE</code> specifies the signature of tag stores.</p>
      
      <p>A <i>tag store</i> is a key / value store, where keys are names
created by users (and/or global names created by convention) and
values are keys from the block store.</p>
      
      <p>A typical Irmin application should have a very low number of
keys in the tag store.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Tag Store</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:RW">RW</a> 
    </div>
  
  <div class="region" id="/module:Tag/modtype:STORE/module:Key">
  <a href="index.html#/module:Tag/modtype:STORE/module:Key" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Key : <a href="index.html#/module:Tag/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Tag/modtype:S/type:t">t</a> = <a href="index.html#/module:Tag/modtype:STORE/type:key">key</a></div>
      
      <div class="doc">
        
      <p>Base functions on keys.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Tag/modtype:STORE/module:Val">
  <a href="index.html#/module:Tag/modtype:STORE/module:Val" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Val : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Hash/modtype:S/type:t">t</a> = <a href="index.html#/module:Tag/modtype:STORE/type:value">value</a></div>
      
      <div class="doc">
        
      <p>Base functions on values.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">High-level Stores</h1>
    </div>
      <p>An Irmin store is a branch-consistent store where keys are lists
of steps.</p>
      
      <p>An example is a Git repository where keys are filenames, <em>i.e.</em>
list of <code>'\'</code>-separated strings. More complex examples are
structured values, where steps might contains first-class fields
accessors and array offsets.</p>
      
      <p>Irmin provides the follow gin features:</p>
      <ul><li>Support for fast <a href="index.html#/modtype:BC">clones</a>, branches and merges, in a
fashion very similar to Git.</li><li>Efficient <a href="index.html#/module:View">staging areas</a> for fast, transient,
in-memory operations.</li><li>Space efficient <a href="index.html#/module:Snapshot">snapshots</a> and fast and consistent
rollback operations.</li><li>Fast <a href="index.html#/module:Sync">synchronization</a> primitives between remote
stores, using native backend protocols (as the Git protocol) when
available.</li></ul>
        
      </div>
    
  <div class="region" id="/module:Private">
  <a href="index.html#/module:Private" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Private : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Private</code> defines functions only useful for creating new
backends. If you are just using the library (and not developing a
new backend), you should not use this module.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/module:Private/module:Conf">
  <a href="index.html#/module:Private/module:Conf" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Conf : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Backend configuration.</p>
      
      <p>A backend configuration is a set of [root:keys] mapping to
typed values. Backends define their own keys.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Configuration converters</h1>
    </div>
      <p>A configuration converter transforms a string value to an OCaml
value and vice-versa. There are a few
<a href="index.html#/module:Private/module:Conf/label:builtin_converters">built-in converters</a>.</p>
      
        
      </div>
    
  <div class="region" id="/module:Private/module:Conf/type:parser">
  <a href="index.html#/module:Private/module:Conf/type:parser" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a parser = string <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Error <span class="keyword">of</span> string</div><div class="cons">| `Ok <span class="keyword">of</span> 'a</div> ]
    
      <div class="doc">
        
      <p>The type for configuration converter parsers.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/type:printer">
  <a href="index.html#/module:Private/module:Conf/type:printer" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a printer = <a href="../../../../ocaml.4.02.1+doc/stdlib/format/">Format</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/format/#/type:formatter">formatter</a> <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>The type for configuration converter printers.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/type:converter">
  <a href="index.html#/module:Private/module:Conf/type:converter" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a converter = 'a <a href="index.html#/module:Private/module:Conf/type:parser">parser</a> * 'a <a href="index.html#/module:Private/module:Conf/type:printer">printer</a>
    
      <div class="doc">
        
      <p>The type for configuration converters.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:parser">
  <a href="index.html#/module:Private/module:Conf/val:parser" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> parser : 'a <a href="index.html#/module:Private/module:Conf/type:converter">converter</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:parser">parser</a>
    
      <div class="doc">
        
      <p><code>parser c</code> is <code>c</code>'s parser.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:printer">
  <a href="index.html#/module:Private/module:Conf/val:printer" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> printer : 'a <a href="index.html#/module:Private/module:Conf/type:converter">converter</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:printer">printer</a>
    
      <div class="doc">
        
      <p><code>converter c</code> is <code>c</code>'s printer.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
  <div class="region" id="/module:Private/module:Conf/label:keys">
  <a href="index.html#/module:Private/module:Conf/label:keys" class="anchor">#</a>
  
    <h1 class="section level_1">Keys</h1>
    
  </div>
  
        
      </div>
    
  <div class="region" id="/module:Private/module:Conf/type:key">
  <a href="index.html#/module:Private/module:Conf/type:key" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a key
    
      <div class="doc">
        
      <p>The type for configuration keys whose lookup value is <code>'a</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:key">
  <a href="index.html#/module:Private/module:Conf/val:key" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> key : ?docs:string <span class="rarr"><span>-&gt;</span></span> ?docv:string <span class="rarr"><span>-&gt;</span></span> ?doc:string <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:converter">converter</a> <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a>
    
      <div class="doc">
        
      <p><code>key docs docv doc name conv default</code> is a configuration key named
<code>name</code> that maps to value <code>v</code> by default. <code>converter</code> is
used to convert key values provided by end users.</p>
      
      <p><code>docs</code> is the title of a documentation section under which the
key is documented. <code>doc</code> is a short documentation string for the
key, this should be a single sentence or paragraph starting with
a capital letter and ending with a dot. <code>docv</code> is a
meta-variable for representing the values of the key
(e.g. <code>&quot;BOOL&quot;</code> for a boolean).</p>
      
        
  <div class="tag raises">
    <span class="label">Raises</span> <code>Invalid_argument</code> if the key name is not made of a
sequence of ASCII lowercase letter, digit, dash or underscore.
FIXME not implemented.<br/><b>Warning.</b> No two keys should share the same <code>name</code> as this
may lead to difficulties in the UI.
  </div>
  
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:name">
  <a href="index.html#/module:Private/module:Conf/val:name" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> name : 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>The key name.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:conv">
  <a href="index.html#/module:Private/module:Conf/val:conv" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> conv : 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:converter">converter</a>
    
      <div class="doc">
        
      <p><code>tc k</code> is <code>k</code>'s converter.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:default">
  <a href="index.html#/module:Private/module:Conf/val:default" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> default : 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> 'a
    
      <div class="doc">
        
      <p><code>default k</code> is <code>k</code>'s default value.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:doc">
  <a href="index.html#/module:Private/module:Conf/val:doc" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> doc : 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> string option
    
      <div class="doc">
        
      <p><code>doc k</code> is <code>k</code>'s documentation string (if any).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:docv">
  <a href="index.html#/module:Private/module:Conf/val:docv" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> docv : 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> string option
    
      <div class="doc">
        
      <p><code>docv k</code> is <code>k</code>'s value documentation meta-variable (if any).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:docs">
  <a href="index.html#/module:Private/module:Conf/val:docs" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> docs : 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> string option
    
      <div class="doc">
        
      <p><code>docs k</code> is <code>k</code>'s documentation section (if any).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:root">
  <a href="index.html#/module:Private/module:Conf/val:root" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> root : string option <a href="index.html#/module:Private/module:Conf/type:key">key</a>
    
      <div class="doc">
        
      <p>Default <code>--root=ROOT</code> argument.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
  <div class="region" id="/module:Private/module:Conf/label:conf">
  <a href="index.html#/module:Private/module:Conf/label:conf" class="anchor">#</a>
  
    <h1 class="section level_1">Configurations</h1>
    
  </div>
  
        
      </div>
    
  <div class="region" id="/module:Private/module:Conf/type:t">
  <a href="index.html#/module:Private/module:Conf/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t = <a href="index.html#/type:config">config</a>
    
      <div class="doc">
        
      <p>The type for configurations.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:empty">
  <a href="index.html#/module:Private/module:Conf/val:empty" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> empty : <a href="index.html#/module:Private/module:Conf/type:t">t</a>
    
      <div class="doc">
        
      <p><code>empty</code> is the empty configuration.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:singleton">
  <a href="index.html#/module:Private/module:Conf/val:singleton" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> singleton : 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Conf/type:t">t</a>
    
      <div class="doc">
        
      <p><code>singleton k v</code> is the configuration where <code>k</code> maps to <code>v</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:is_empty">
  <a href="index.html#/module:Private/module:Conf/val:is_empty" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> is_empty : <a href="index.html#/module:Private/module:Conf/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p><code>is_empty c</code> is <code>true</code> iff <code>c</code> is empty.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:mem">
  <a href="index.html#/module:Private/module:Conf/val:mem" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> mem : <a href="index.html#/module:Private/module:Conf/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p><code>mem c k</code> is <code>true</code> iff <code>k</code> has a mapping in <code>c</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:add">
  <a href="index.html#/module:Private/module:Conf/val:add" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add : <a href="index.html#/module:Private/module:Conf/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Conf/type:t">t</a>
    
      <div class="doc">
        
      <p><code>add c k v</code> is <code>c</code> with <code>k</code> mapping to <code>v</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:rem">
  <a href="index.html#/module:Private/module:Conf/val:rem" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> rem : <a href="index.html#/module:Private/module:Conf/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Conf/type:t">t</a>
    
      <div class="doc">
        
      <p><code>rem c k</code> is <code>c</code> with <code>k</code> unbound.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:find">
  <a href="index.html#/module:Private/module:Conf/val:find" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> find : <a href="index.html#/module:Private/module:Conf/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> 'a option
    
      <div class="doc">
        
      <p><code>find c k</code> is <code>k</code>'s mapping in <code>c</code>, if any.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:get">
  <a href="index.html#/module:Private/module:Conf/val:get" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get : <a href="index.html#/module:Private/module:Conf/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Private/module:Conf/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> 'a
    
      <div class="doc">
        
      <p><code>get c k</code> is <code>k</code>'s mapping in <code>c</code>.</p>
      
      <p><b>Raises.</b> <code>Not_found</code> if <code>k</code> is not bound in <code>d</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
  <div class="region" id="/module:Private/module:Conf/label:builtin_converters">
  <a href="index.html#/module:Private/module:Conf/label:builtin_converters" class="anchor">#</a>
  
    <h1 class="section level_1">Built-in value converters</h1>
    
  </div>
  
        
      </div>
    
  <div class="region" id="/module:Private/module:Conf/val:bool">
  <a href="index.html#/module:Private/module:Conf/val:bool" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> bool : bool <a href="index.html#/module:Private/module:Conf/type:converter">converter</a>
    
      <div class="doc">
        
      <p><code>bool</code> converts values with <code>bool_of_string</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:int">
  <a href="index.html#/module:Private/module:Conf/val:int" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> int : int <a href="index.html#/module:Private/module:Conf/type:converter">converter</a>
    
      <div class="doc">
        
      <p><code>int</code> converts values with <code>int_of_string</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:string">
  <a href="index.html#/module:Private/module:Conf/val:string" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> string : string <a href="index.html#/module:Private/module:Conf/type:converter">converter</a>
    
      <div class="doc">
        
      <p><code>string</code> converts values with the identity function.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:uri">
  <a href="index.html#/module:Private/module:Conf/val:uri" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> uri : <a href="../../../../uri.1.7.2/_build/lib/uri/">Uri</a>.<a href="../../../../uri.1.7.2/_build/lib/uri/#/type:t">t</a> <a href="index.html#/module:Private/module:Conf/type:converter">converter</a>
    
      <div class="doc">
        
      <p><code>uri</code> converts values with <code>Uri.of_string</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Conf/val:some">
  <a href="index.html#/module:Private/module:Conf/val:some" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> some : 'a <a href="index.html#/module:Private/module:Conf/type:converter">converter</a> <span class="rarr"><span>-&gt;</span></span> 'a option <a href="index.html#/module:Private/module:Conf/type:converter">converter</a>
    
      <div class="doc">
        
      <p><code>string</code> converts values with the identity function.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch">
  <a href="index.html#/module:Private/module:Watch" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Watch : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Watch</code> provides helpers to register event notifications on
read-write stores.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Watch Helpers</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Private/module:Watch/modtype:S">
  <a href="index.html#/module:Private/module:Watch/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>The signature for watch helpers.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Watch Helpers</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Private/module:Watch/modtype:S/type:key">
  <a href="index.html#/module:Private/module:Watch/modtype:S/type:key" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> key
    
      <div class="doc">
        
      <p>The type for store keys.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/modtype:S/type:value">
  <a href="index.html#/module:Private/module:Watch/modtype:S/type:value" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> value
    
      <div class="doc">
        
      <p>The type for store values.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/modtype:S/type:t">
  <a href="index.html#/module:Private/module:Watch/modtype:S/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>The type for watch state.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/modtype:S/val:notify">
  <a href="index.html#/module:Private/module:Watch/modtype:S/val:notify" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> notify : <a href="index.html#/module:Private/module:Watch/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:value">value</a> option <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Notify all listeners in the given watch state that a key has
changed, with the new value associated to this key. If the
argument is <code>None</code>, this means the key has been removed.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/modtype:S/val:create">
  <a href="index.html#/module:Private/module:Watch/modtype:S/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a watch state.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/modtype:S/val:clear">
  <a href="index.html#/module:Private/module:Watch/modtype:S/val:clear" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clear : <a href="index.html#/module:Private/module:Watch/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Clear all register listeners in the given watch state.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/modtype:S/val:watch">
  <a href="index.html#/module:Private/module:Watch/modtype:S/val:watch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> watch : <a href="index.html#/module:Private/module:Watch/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:value">value</a> option <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:value">value</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/">Lwt_stream</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a stream of value notifications. Need to provide the
initial value, or <code>None</code> if the key does not have associated
contents yet.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/modtype:S/val:listen_dir">
  <a href="index.html#/module:Private/module:Watch/modtype:S/val:listen_dir" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> listen_dir : <a href="index.html#/module:Private/module:Watch/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> key:(string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:key">key</a> option) <span class="rarr"><span>-&gt;</span></span> value:(<a href="index.html#/module:Private/module:Watch/modtype:S/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:value">value</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Register a fsevents/inotify thread to look for changes in
the given directory.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/val:set_listen_dir_hook">
  <a href="index.html#/module:Private/module:Watch/val:set_listen_dir_hook" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set_listen_dir_hook : (string <span class="rarr"><span>-&gt;</span></span> (string <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Register a function which looks for file changes in a
directory. Could use <code>inotify</code> when available, or use an active
stats file polling.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/val:lwt_stream_lift">
  <a href="index.html#/module:Private/module:Watch/val:lwt_stream_lift" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lwt_stream_lift : 'a <a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/">Lwt_stream</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/#/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/">Lwt_stream</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Lift a stream out of the monad.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Watch/module:Make">
  <a href="index.html#/module:Private/module:Watch/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (K : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (V : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Watch/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:key">key</a> = <a href="index.html#/module:Private/module:Watch/module:Make/modarg:1:K">K</a>.<a href="index.html#/module:Private/module:Watch/module:Make/modarg:1:K/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Watch/modtype:S/type:value">value</a> = <a href="index.html#/module:Private/module:Watch/module:Make/modarg:2:V">V</a>.<a href="index.html#/module:Private/module:Watch/module:Make/modarg:2:V/type:t">t</a></div>
      
      <div class="doc">
        
      <p><code>Make</code> builds an implementation of watch helpers.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node">
  <a href="index.html#/module:Private/module:Node" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Node : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Node</code> provides functions to describe the graph-like structured
values.</p>
      
      <p>The node blocks form a labeled directed acyclic graph, labeled
by <a href="index.html#/module:Path/modtype:S/type:step">steps</a>: a list of steps defines a
unique path from one node to an other.</p>
      
      <p>Each node can point to user-defined <a href="index.html#/module:Contents/modtype:S">contents</a>
values.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/module:Private/module:Node/modtype:S">
  <a href="index.html#/module:Private/module:Node/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Node values</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a> 
    </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/type:contents">
  <a href="index.html#/module:Private/module:Node/modtype:S/type:contents" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> contents
    
      <div class="doc">
        
      <p>The type for contents keys.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/type:node">
  <a href="index.html#/module:Private/module:Node/modtype:S/type:node" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> node
    
      <div class="doc">
        
      <p>The type for node keys.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/type:step">
  <a href="index.html#/module:Private/module:Node/modtype:S/type:step" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> step
    
      <div class="doc">
        
      <p>The type for steps between nodes.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:create">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : (<a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> * [ <div class="cons">| `Contents <span class="keyword">of</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:contents">contents</a></div><div class="cons">| `Node <span class="keyword">of</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:node">node</a></div> ]) list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p><code>create l</code> is a new node.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:alist">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:alist" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> alist : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> * [ <div class="cons">| `Contents <span class="keyword">of</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:contents">contents</a></div><div class="cons">| `Node <span class="keyword">of</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:node">node</a></div> ]) list
    
      <div class="doc">
        
      <p><code>alist t</code> is the contents of <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:empty">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:empty" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> empty : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p>The empty node.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:is_empty">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:is_empty" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> is_empty : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>Is the node empty?</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:contents">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> contents : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:contents">contents</a> option
    
      <div class="doc">
        
      <p>Get the node contents.</p>
      
      <p>A node can point to user-defined
<a href="index.html#/module:Private/module:Node/modtype:S/type:contents">contents</a>. The edge between the node and
that contents is labeled by a <a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:iter_contents">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:iter_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter_contents : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:contents">contents</a> <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>iter_contents t f</code> calls <code>f</code> on <code>t</code>'s contents. For better
performance, use <a href="index.html#/module:Private/module:Node/modtype:S/type:contents">contents</a> instead when
you know the step in advance.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:with_contents">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:with_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> with_contents : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:contents">contents</a> option <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p><code>with_contents t s c</code> replaces <code>t</code>'s contents for the step
<code>s</code> by <code>c</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:succ">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:succ" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> succ : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:node">node</a> option
    
      <div class="doc">
        
      <p><code>succ t s</code> is <code>s</code>'s successor in <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:iter_succ">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:iter_succ" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter_succ : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>iter_succ t f</code> calls f on <code>t</code>'s successors.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:S/val:with_succ">
  <a href="index.html#/module:Private/module:Node/modtype:S/val:with_succ" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> with_succ : <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:node">node</a> option <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p><code>replace_succ t s n</code> replaces <code>t</code>'s successor for the step
<code>s</code> by <code>n</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/module:Make">
  <a href="index.html#/module:Private/module:Node/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (C : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (N : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (P : <a href="index.html#/module:Path">Path</a>.<a href="index.html#/module:Path/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:contents">contents</a> = <a href="index.html#/module:Private/module:Node/module:Make/modarg:1:C">C</a>.<a href="index.html#/module:Private/module:Node/module:Make/modarg:1:C/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:node">node</a> = <a href="index.html#/module:Private/module:Node/module:Make/modarg:2:N">N</a>.<a href="index.html#/module:Private/module:Node/module:Make/modarg:2:N/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> = <a href="index.html#/module:Private/module:Node/module:Make/modarg:3:P">P</a>.<a href="index.html#/module:Private/module:Node/module:Make/modarg:3:P/type:step">step</a></div>
      
      <div class="doc">
        
      <p><code>Node</code> provides a simple node implementation, parameterized by
the contents <code>C</code>, node <code>N</code> and paths <code>P</code>.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:STORE">
  <a href="index.html#/module:Private/module:Node/modtype:STORE" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> STORE = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p><code>STORE</code> specifies the signature for node stores.</p>
      
        
      </div>
    
    
    <div class="sig">
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:AO">AO</a> 
    </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:STORE/module:Path">
  <a href="index.html#/module:Private/module:Node/modtype:STORE/module:Path" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Path : <a href="index.html#/module:Path">Path</a>.<a href="index.html#/module:Path/modtype:S">S</a></div>
      
      <div class="doc">
        
      <p><code>Step</code> provides base functions on node steps.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:STORE/module:Key">
  <a href="index.html#/module:Private/module:Node/modtype:STORE/module:Key" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Key : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Hash/modtype:S/type:t">t</a> = <a href="index.html#/module:Private/module:Node/modtype:STORE/type:key">key</a></div>
      
      <div class="doc">
        
      <p><code>Key</code> provides base functions for node keys.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:STORE/module:Val">
  <a href="index.html#/module:Private/module:Node/modtype:STORE/module:Val" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Val : <a href="index.html#/module:Private/module:Node/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:t">t</a> = <a href="index.html#/module:Private/module:Node/modtype:STORE/type:value">value</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:node">node</a> = <a href="index.html#/module:Private/module:Node/modtype:STORE/type:key">key</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:S/type:step">step</a> = <a href="index.html#/module:Private/module:Node/modtype:STORE/module:Path">Path</a>.<a href="index.html#/module:Private/module:Node/modtype:STORE/module:Path/type:step">step</a></div>
      
      <div class="doc">
        
      <p><code>Val</code> provides base functions for node values.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> GRAPH = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p><code>Graph</code> specifies the signature for node graphs. A node graph
is a deterministic DAG, labeled by steps.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Node Graphs</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/type:t">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>The type for store handles.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/type:contents">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:contents" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> contents
    
      <div class="doc">
        
      <p>The type of user-defined contents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/type:node">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> node
    
      <div class="doc">
        
      <p>The type for node values.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/type:step">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> step
    
      <div class="doc">
        
      <p>The type of steps. A step is used to pass from one node to an
other. A list of steps forms a path.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:empty">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:empty" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> empty : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>The empty node.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:create">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> * [ <div class="cons">| `Contents <span class="keyword">of</span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:contents">contents</a></div><div class="cons">| `Node <span class="keyword">of</span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a></div> ]) list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a new node.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:contents">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> contents : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:contents">contents</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>contents t n s</code> is <code>n</code>'s contents in <code>t</code>, associated to the step <code>s</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:succ">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:succ" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> succ : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>succ t n s</code> is <code>n</code>'s successors in <code>t</code>, associated to the step <code>s</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:steps">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:steps" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> steps : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>steps t n</code> is the list of steps leaving the node <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:iter_contents">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:iter_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter_contents : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:contents">contents</a> <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>iter_contents f fn</code> calls <code>fn</code> on <code>t</code>'s contents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:iter_succ">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:iter_succ" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter_succ : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>iter_succ t fn</code> calls <code>fn</code> on <code>t</code>'s successors.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Contents</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:mem_contents">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:mem_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> mem_contents : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> bool <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>mem_contents t n path</code> checks if there is a path labeled by
<code>path</code> from <code>n</code> to a valid contents in <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:read_contents">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:read_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_contents : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:contents">contents</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>read_contents t n path</code> is the contents at the end of the
path starting from <code>n</code> and labeled by <code>path</code> in <code>t</code>. Return
<code>None</code> if no such contents exists.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:read_contents_exn">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:read_contents_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_contents_exn : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:contents">contents</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:read_contents">read_contents</a> by raise <code>Not_found</code> if there is no
valid contents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:add_contents">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:add_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add_contents : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:contents">contents</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>add_contents t n path c</code> adds the contents <code>c</code> as the end of
the path starting from <code>n</code> and labeled by <code>path</code> in <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:remove_contents">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:remove_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remove_contents : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>remove_contents t n path</code> removes the contents at the end of
the path of the path starting from <code>n</code> and labeled by <code>path</code>
in <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Nodes</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:mem_node">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:mem_node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> mem_node : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> bool <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>mem_node t n</code> checks if there is a path labeled by <code>path</code>
from <code>n</code> to a valid node in <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:read_node">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:read_node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_node : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>read_node t n path</code> is the node at the end of the path
starting from <code>n</code> and labeled by <code>path</code> in <code>t</code>. Return
<code>None</code> if no such node exists.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:read_node_exn">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:read_node_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_node_exn : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:read_node">read_node</a> but raise
<code>Not_found</code> if the path is invalid.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:add_node">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:add_node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add_node : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>add_node t n path c</code> adds the node <code>c</code> as the end of the
path starting from <code>n</code> and labeled by <code>path</code> in <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:remove_node">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:remove_node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remove_node : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>remove_node t n path</code> removes the node at the end of the
path of the path starting from <code>n</code> and labeled by <code>path</code> in
<code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:merge">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p><code>merge t</code> is the 3-way merge function for nodes. FIXME: give
semantics</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/val:closure">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:closure" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> closure : <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> min:<a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> list <span class="rarr"><span>-&gt;</span></span> max:<a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>closure t ~min ~max</code> is the transitive closure <code>c</code> of <code>t</code>'s nodes such that:</p>
      <ul><li>There is a path in <code>t</code> from any nodes in <code>min</code> to nodes
in <code>c</code>. If <code>min</code> is empty, that condition is always true.</li><li>There is a path in <code>t</code> from any nodes in <code>c</code> to nodes in
<code>max</code>. If <code>max</code> is empty, that condition is always false.</li></ul>
      <p>
    <span style="color:orange">CUSTOM(B) Note:</span>
     Both <code>min</code> and <code>max</code> are subsets of <code>c</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/modtype:GRAPH/module:Store">
  <a href="index.html#/module:Private/module:Node/modtype:GRAPH/module:Store" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Store : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:STORE">STORE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:STORE/type:t">t</a> = <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:STORE/type:key">key</a> = <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a></div>
      
      <div class="doc">
        
      <p>Graph nodes forms a <a href="index.html#/module:Contents/modtype:STORE">contents store</a>.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Node/module:Graph">
  <a href="index.html#/module:Private/module:Node/module:Graph" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Graph : <span class="keyword">functor</span> (C : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:STORE">STORE</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (S : <a href="index.html#/module:Private/module:Node/modtype:STORE">STORE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:STORE/module:Val">Val</a>.<a href="index.html#/module:Private/module:Node/modtype:STORE/module:Val/type:contents">contents</a> = <a href="index.html#/module:Private/module:Node/module:Graph/modarg:1:C">C</a>.<a href="index.html#/module:Private/module:Node/module:Graph/modarg:1:C/type:key">key</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH">GRAPH</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:t">t</a> = <a href="index.html#/module:Private/module:Node/module:Graph/modarg:1:C">C</a>.<a href="index.html#/module:Private/module:Node/module:Graph/modarg:1:C/type:t">t</a> * <a href="index.html#/module:Private/module:Node/module:Graph/modarg:2:S">S</a>.<a href="index.html#/module:Private/module:Node/module:Graph/modarg:2:S/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:contents">contents</a> = <a href="index.html#/module:Private/module:Node/module:Graph/modarg:1:C">C</a>.<a href="index.html#/module:Private/module:Node/module:Graph/modarg:1:C/type:key">key</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a> = <a href="index.html#/module:Private/module:Node/module:Graph/modarg:2:S">S</a>.<a href="index.html#/module:Private/module:Node/module:Graph/modarg:2:S/type:key">key</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:step">step</a> = <a href="index.html#/module:Private/module:Node/module:Graph/modarg:2:S">S</a>.<a href="index.html#/module:Private/module:Node/module:Graph/modarg:2:S/module:Val">Val</a>.<a href="index.html#/module:Private/module:Node/module:Graph/modarg:2:S/module:Val/type:step">step</a></div>
      
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit">
  <a href="index.html#/module:Private/module:Commit" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Commit : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Commit values represent the store history.</p>
      
      <p>Every commit contains a list of predecessor commits, and the
collection of commits form an acyclic directed graph.</p>
      
      <p>Every commit also can contain an optional key, pointing to a
<a href="index.html#/module:Private/module:Commit/modtype:STORE">node</a> value. See the
<a href="index.html#/module:Private/module:Node/modtype:STORE">Node</a> signature for more details on node
values.</p>
      
      <p>The signature for slices.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/module:Private/module:Commit/modtype:S">
  <a href="index.html#/module:Private/module:Commit/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Commit values</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a> 
    </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:S/type:commit">
  <a href="index.html#/module:Private/module:Commit/modtype:S/type:commit" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> commit
    
      <div class="doc">
        
      <p>Type for commit keys.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:S/type:node">
  <a href="index.html#/module:Private/module:Commit/modtype:S/type:node" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> node
    
      <div class="doc">
        
      <p>Type for node keys.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:S/val:create">
  <a href="index.html#/module:Private/module:Commit/modtype:S/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : <a href="index.html#/type:task">task</a> <span class="rarr"><span>-&gt;</span></span> ?node:<a href="index.html#/module:Private/module:Commit/modtype:S/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> parents:<a href="index.html#/module:Private/module:Commit/modtype:S/type:commit">commit</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:S/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a commit.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:S/val:node">
  <a href="index.html#/module:Private/module:Commit/modtype:S/val:node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> node : <a href="index.html#/module:Private/module:Commit/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:S/type:node">node</a> option
    
      <div class="doc">
        
      <p>The underlying node.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:S/val:parents">
  <a href="index.html#/module:Private/module:Commit/modtype:S/val:parents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> parents : <a href="index.html#/module:Private/module:Commit/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:S/type:commit">commit</a> list
    
      <div class="doc">
        
      <p>The commit parents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:S/val:task">
  <a href="index.html#/module:Private/module:Commit/modtype:S/val:task" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> task : <a href="index.html#/module:Private/module:Commit/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>
    
      <div class="doc">
        
      <p>The commit provenance.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/module:Make">
  <a href="index.html#/module:Private/module:Commit/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (C : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (N : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:S/type:commit">commit</a> := <a href="index.html#/module:Private/module:Commit/module:Make/modarg:1:C">C</a>.<a href="index.html#/module:Private/module:Commit/module:Make/modarg:1:C/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:S/type:node">node</a> = <a href="index.html#/module:Private/module:Commit/module:Make/modarg:2:N">N</a>.<a href="index.html#/module:Private/module:Commit/module:Make/modarg:2:N/type:t">t</a></div>
      
      <div class="doc">
        
      <p><code>Make</code> provides a simple implementation of commit values,
parameterized by the commit <code>C</code> and node <code>N</code>.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:STORE">
  <a href="index.html#/module:Private/module:Commit/modtype:STORE" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> STORE = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p><code>STORE</code> specifies the signature for commit stores.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Commit Store</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:AO">AO</a> 
    </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:STORE/module:Key">
  <a href="index.html#/module:Private/module:Commit/modtype:STORE/module:Key" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Key : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Hash/modtype:S/type:t">t</a> = <a href="index.html#/module:Private/module:Commit/modtype:STORE/type:key">key</a></div>
      
      <div class="doc">
        
      <p><code>Key</code> provides base functions for commit keys.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:STORE/module:Val">
  <a href="index.html#/module:Private/module:Commit/modtype:STORE/module:Val" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Val : <a href="index.html#/module:Private/module:Commit/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:S/type:t">t</a> = <a href="index.html#/module:Private/module:Commit/modtype:STORE/type:value">value</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:S/type:commit">commit</a> := <a href="index.html#/module:Private/module:Commit/modtype:STORE/type:key">key</a></div>
      
      <div class="doc">
        
      <p><code>Val</code> provides function for commit values.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> HISTORY = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p><code>History</code> specifies the signature for commit history. The
history is represented as a partial-order of commits and basic
functions to search through that history are provided.</p>
      
      <p>Every commit can point to an entry point in a node graph, where
user-defined contents are stored.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Commit History</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/type:t">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>The type for store handles.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/type:node">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:node" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> node
    
      <div class="doc">
        
      <p>The type for node values.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/type:commit">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> commit
    
      <div class="doc">
        
      <p>The type for commit values.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/val:create">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?node:<a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> parents:<a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a new commit.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/val:node">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/val:node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> node : <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:node">node</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Get the commit node.</p>
      
      <p>A commit might contain a graph
<a href="index.html#/module:Private/module:Node/modtype:GRAPH/type:node">node</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/val:parents">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/val:parents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> parents : <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Get the commit parents.</p>
      
      <p>Commits form a append-only, fully functional, partial-order
data-structure: every commit carries the list of its
immediate predecessors.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/val:merge">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:t">t</a>
    
      <div class="doc">
        
      <p><code>merge t</code> is the 3-way merge function for commit.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/val:lca">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/val:lca" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lca : <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Find the least common ancestors
<a href="http://en.wikipedia.org/wiki/Lowest_common_ancestor">lca</a>
between two commits.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/val:closure">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/val:closure" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> closure : <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> min:<a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> list <span class="rarr"><span>-&gt;</span></span> max:<a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:Private/module:Node/modtype:GRAPH/val:closure">GRAPH.closure</a> but for
the history graph.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/modtype:HISTORY/module:Store">
  <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/module:Store" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Store : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:STORE">STORE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:STORE/type:t">t</a> = <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:STORE/type:key">key</a> = <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a></div>
      
      <div class="doc">
        
      <p>An history forms a <a href="index.html#/module:Contents/modtype:STORE">contents store</a>.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Commit/module:History">
  <a href="index.html#/module:Private/module:Commit/module:History" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> History : <span class="keyword">functor</span> (N : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:STORE">STORE</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (S : <a href="index.html#/module:Private/module:Commit/modtype:STORE">STORE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:STORE/module:Val">Val</a>.<a href="index.html#/module:Private/module:Commit/modtype:STORE/module:Val/type:node">node</a> = <a href="index.html#/module:Private/module:Commit/module:History/modarg:1:N">N</a>.<a href="index.html#/module:Private/module:Commit/module:History/modarg:1:N/type:key">key</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY">HISTORY</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:t">t</a> = <a href="index.html#/module:Private/module:Commit/module:History/modarg:1:N">N</a>.<a href="index.html#/module:Private/module:Commit/module:History/modarg:1:N/type:t">t</a> * <a href="index.html#/module:Private/module:Commit/module:History/modarg:2:S">S</a>.<a href="index.html#/module:Private/module:Commit/module:History/modarg:2:S/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:node">node</a> = <a href="index.html#/module:Private/module:Commit/module:History/modarg:1:N">N</a>.<a href="index.html#/module:Private/module:Commit/module:History/modarg:1:N/type:key">key</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:HISTORY/type:commit">commit</a> = <a href="index.html#/module:Private/module:Commit/module:History/modarg:2:S">S</a>.<a href="index.html#/module:Private/module:Commit/module:History/modarg:2:S/type:key">key</a></div>
      
      <div class="doc">
        
      <p>Build a commit history.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice">
  <a href="index.html#/module:Private/module:Slice" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Slice : <span class="keyword">sig</span></div>
      
      
    <div class="sig">
  <div class="region" id="/module:Private/module:Slice/modtype:S">
  <a href="index.html#/module:Private/module:Slice/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Slices</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a> 
    </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/type:contents">
  <a href="index.html#/module:Private/module:Slice/modtype:S/type:contents" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> contents
    
      <div class="doc">
        
      <p>The type for exported contents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/type:node">
  <a href="index.html#/module:Private/module:Slice/modtype:S/type:node" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> node
    
      <div class="doc">
        
      <p>The type for exported nodes.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/type:commit">
  <a href="index.html#/module:Private/module:Slice/modtype:S/type:commit" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> commit
    
      <div class="doc">
        
      <p>The type for exported commits.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/val:create">
  <a href="index.html#/module:Private/module:Slice/modtype:S/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a new empty slice.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/val:add_contents">
  <a href="index.html#/module:Private/module:Slice/modtype:S/val:add_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add_contents : <a href="index.html#/module:Private/module:Slice/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:contents">contents</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>add_contents t c</code> adds the contents <code>c</code> to the slice <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/val:add_node">
  <a href="index.html#/module:Private/module:Slice/modtype:S/val:add_node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add_node : <a href="index.html#/module:Private/module:Slice/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>add_node t n</code> adds the node <code>n</code> to the slice <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/val:add_commit">
  <a href="index.html#/module:Private/module:Slice/modtype:S/val:add_commit" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add_commit : <a href="index.html#/module:Private/module:Slice/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:commit">commit</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>add_commit t c</code> adds the commit <code>c</code> to the slice <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/val:iter_contents">
  <a href="index.html#/module:Private/module:Slice/modtype:S/val:iter_contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter_contents : <a href="index.html#/module:Private/module:Slice/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Slice/modtype:S/type:contents">contents</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>iter_contents t f</code> calls <code>f</code> on <code>t</code>'s contents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/val:iter_nodes">
  <a href="index.html#/module:Private/module:Slice/modtype:S/val:iter_nodes" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter_nodes : <a href="index.html#/module:Private/module:Slice/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Slice/modtype:S/type:node">node</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>iter_nodes t f</code> calls <code>f</code> on <code>t</code>'s nodes.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/modtype:S/val:iter_commits">
  <a href="index.html#/module:Private/module:Slice/modtype:S/val:iter_commits" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter_commits : <a href="index.html#/module:Private/module:Slice/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Private/module:Slice/modtype:S/type:commit">commit</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>iter_commits t f</code> calls <code>f</code> on <code>t</code>'s commits.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Slice/module:Make">
  <a href="index.html#/module:Private/module:Slice/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (C : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:STORE">STORE</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (N : <a href="index.html#/module:Private/module:Node">Node</a>.<a href="index.html#/module:Private/module:Node/modtype:STORE">STORE</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (H : <a href="index.html#/module:Private/module:Commit">Commit</a>.<a href="index.html#/module:Private/module:Commit/modtype:STORE">STORE</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Slice/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:contents">contents</a> = <a href="index.html#/module:Private/module:Slice/module:Make/modarg:1:C">C</a>.<a href="index.html#/module:Private/module:Slice/module:Make/modarg:1:C/type:key">key</a> * <a href="index.html#/module:Private/module:Slice/module:Make/modarg:1:C">C</a>.<a href="index.html#/module:Private/module:Slice/module:Make/modarg:1:C/type:value">value</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:node">node</a> = <a href="index.html#/module:Private/module:Slice/module:Make/modarg:2:N">N</a>.<a href="index.html#/module:Private/module:Slice/module:Make/modarg:2:N/type:key">key</a> * <a href="index.html#/module:Private/module:Slice/module:Make/modarg:2:N">N</a>.<a href="index.html#/module:Private/module:Slice/module:Make/modarg:2:N/type:value">value</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:commit">commit</a> = <a href="index.html#/module:Private/module:Slice/module:Make/modarg:3:H">H</a>.<a href="index.html#/module:Private/module:Slice/module:Make/modarg:3:H/type:key">key</a> * <a href="index.html#/module:Private/module:Slice/module:Make/modarg:3:H">H</a>.<a href="index.html#/module:Private/module:Slice/module:Make/modarg:3:H/type:value">value</a></div>
      
      <div class="doc">
        
      <p>Build simple slices.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Sync">
  <a href="index.html#/module:Private/module:Sync" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Sync : <span class="keyword">sig</span></div>
      
      
    <div class="sig">
  <div class="region" id="/module:Private/module:Sync/modtype:S">
  <a href="index.html#/module:Private/module:Sync/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Remote synchronization</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Private/module:Sync/modtype:S/type:t">
  <a href="index.html#/module:Private/module:Sync/modtype:S/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>The type for store handles.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Sync/modtype:S/type:head">
  <a href="index.html#/module:Private/module:Sync/modtype:S/type:head" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> head
    
      <div class="doc">
        
      <p>The type for store heads.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Sync/modtype:S/type:tag">
  <a href="index.html#/module:Private/module:Sync/modtype:S/type:tag" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> tag
    
      <div class="doc">
        
      <p>The type for store tags.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Sync/modtype:S/val:create">
  <a href="index.html#/module:Private/module:Sync/modtype:S/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : <a href="index.html#/type:config">config</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Sync/modtype:S/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a remote store handle.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Sync/modtype:S/val:fetch">
  <a href="index.html#/module:Private/module:Sync/modtype:S/val:fetch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fetch : <a href="index.html#/module:Private/module:Sync/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> uri:string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Sync/modtype:S/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Local <span class="keyword">of</span> <a href="index.html#/module:Private/module:Sync/modtype:S/type:head">head</a></div> ] option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>fetch t uri</code> fetches the contents of the remote store
located at <code>uri</code> into the local store <code>t</code>. Return the head
of the remote branch with the same name, which is now in the
local store. <code>None</code> is no such branch exists.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Sync/modtype:S/val:push">
  <a href="index.html#/module:Private/module:Sync/modtype:S/val:push" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> push : <a href="index.html#/module:Private/module:Sync/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> uri:string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Sync/modtype:S/type:tag">tag</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Ok</div><div class="cons">| `Error</div> ] <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>push t uri</code> pushes the contents of the local store <code>t</code> into
the remote store located at <code>uri</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/module:Sync/module:None">
  <a href="index.html#/module:Private/module:Sync/module:None" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> None : <span class="keyword">functor</span> (H : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (T : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Private/module:Sync/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Sync/modtype:S/type:head">head</a> = <a href="index.html#/module:Private/module:Sync/module:None/modarg:1:H">H</a>.<a href="index.html#/module:Private/module:Sync/module:None/modarg:1:H/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Sync/modtype:S/type:tag">tag</a> = <a href="index.html#/module:Private/module:Sync/module:None/modarg:2:T">T</a>.<a href="index.html#/module:Private/module:Sync/module:None/modarg:2:T/type:t">t</a></div>
      
      <div class="doc">
        
      <p><code>None</code> is an implementation of <a href="index.html#/module:Private/module:Sync/modtype:S">S</a> which does
nothing.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/modtype:S">
  <a href="index.html#/module:Private/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>The complete collection of private implementations.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Private Implementations</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Private/modtype:S/module:Contents">
  <a href="index.html#/module:Private/modtype:S/module:Contents" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Contents : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:STORE">STORE</a></div>
      
      <div class="doc">
        
      <p>Private contents.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/modtype:S/module:Node">
  <a href="index.html#/module:Private/modtype:S/module:Node" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Node : <a href="index.html#/module:Private/module:Node">Node</a>.<a href="index.html#/module:Private/module:Node/modtype:STORE">STORE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Node/modtype:STORE/module:Val">Val</a>.<a href="index.html#/module:Private/module:Node/modtype:STORE/module:Val/type:contents">contents</a> = <a href="index.html#/module:Private/modtype:S/module:Contents">Contents</a>.<a href="index.html#/module:Private/modtype:S/module:Contents/type:key">key</a></div>
      
      <div class="doc">
        
      <p>Private nodes.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/modtype:S/module:Commit">
  <a href="index.html#/module:Private/modtype:S/module:Commit" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Commit : <a href="index.html#/module:Private/module:Commit">Commit</a>.<a href="index.html#/module:Private/module:Commit/modtype:STORE">STORE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Commit/modtype:STORE/module:Val">Val</a>.<a href="index.html#/module:Private/module:Commit/modtype:STORE/module:Val/type:node">node</a> = <a href="index.html#/module:Private/modtype:S/module:Node">Node</a>.<a href="index.html#/module:Private/modtype:S/module:Node/type:key">key</a></div>
      
      <div class="doc">
        
      <p>Private commits.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/modtype:S/module:Tag">
  <a href="index.html#/module:Private/modtype:S/module:Tag" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Tag : <a href="index.html#/module:Tag">Tag</a>.<a href="index.html#/module:Tag/modtype:STORE">STORE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Tag/modtype:STORE/type:value">value</a> = <a href="index.html#/module:Private/modtype:S/module:Commit">Commit</a>.<a href="index.html#/module:Private/modtype:S/module:Commit/type:key">key</a></div>
      
      <div class="doc">
        
      <p>Private tags.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/modtype:S/module:Slice">
  <a href="index.html#/module:Private/modtype:S/module:Slice" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Slice : <a href="index.html#/module:Private/module:Slice">Slice</a>.<a href="index.html#/module:Private/module:Slice/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:contents">contents</a> = <a href="index.html#/module:Private/modtype:S/module:Contents">Contents</a>.<a href="index.html#/module:Private/modtype:S/module:Contents/type:key">key</a> * <a href="index.html#/module:Private/modtype:S/module:Contents">Contents</a>.<a href="index.html#/module:Private/modtype:S/module:Contents/type:value">value</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:node">node</a> = <a href="index.html#/module:Private/modtype:S/module:Node">Node</a>.<a href="index.html#/module:Private/modtype:S/module:Node/type:key">key</a> * <a href="index.html#/module:Private/modtype:S/module:Node">Node</a>.<a href="index.html#/module:Private/modtype:S/module:Node/type:value">value</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Slice/modtype:S/type:commit">commit</a> = <a href="index.html#/module:Private/modtype:S/module:Commit">Commit</a>.<a href="index.html#/module:Private/modtype:S/module:Commit/type:key">key</a> * <a href="index.html#/module:Private/modtype:S/module:Commit">Commit</a>.<a href="index.html#/module:Private/modtype:S/module:Commit/type:value">value</a></div>
      
      <div class="doc">
        
      <p>Private slices.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Private/modtype:S/module:Sync">
  <a href="index.html#/module:Private/modtype:S/module:Sync" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Sync : <a href="index.html#/module:Private/module:Sync">Sync</a>.<a href="index.html#/module:Private/module:Sync/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Sync/modtype:S/type:head">head</a> = <a href="index.html#/module:Private/modtype:S/module:Commit">Commit</a>.<a href="index.html#/module:Private/modtype:S/module:Commit/type:key">key</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/module:Sync/modtype:S/type:tag">tag</a> = <a href="index.html#/module:Private/modtype:S/module:Tag">Tag</a>.<a href="index.html#/module:Private/modtype:S/module:Tag/type:key">key</a></div>
      
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S">
  <a href="index.html#/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
      <div class="doc">
        
      <p>Signature for Irmin stores.</p>
      
        
      </div>
    
    
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Irmin Store</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:BC">BC</a> 
    </div>
  
  <div class="region" id="/modtype:S/module:Key">
  <a href="index.html#/modtype:S/module:Key" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Key : <a href="index.html#/module:Path">Path</a>.<a href="index.html#/module:Path/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Path/modtype:S/type:step">step</a> = <a href="index.html#/modtype:S/type:step">step</a></div>
      
      <div class="doc">
        
      <p><code>Key</code> provides base functions on step lists.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Val">
  <a href="index.html#/modtype:S/module:Val" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Val : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:S/type:t">t</a> = <a href="index.html#/modtype:S/type:value">value</a></div>
      
      <div class="doc">
        
      <p><code>Val</code> provides base functions on user-defined, mergeable
contents.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Tag">
  <a href="index.html#/modtype:S/module:Tag" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Tag : <a href="index.html#/module:Tag">Tag</a>.<a href="index.html#/module:Tag/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Tag/modtype:S/type:t">t</a> = <a href="index.html#/modtype:S/type:tag">tag</a></div>
      
      <div class="doc">
        
      <p><code>Tag</code> provides base functions on user-defined tags.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Head">
  <a href="index.html#/modtype:S/module:Head" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Head : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Hash/modtype:S/type:t">t</a> = <a href="index.html#/modtype:S/type:head">head</a></div>
      
      <div class="doc">
        
      <p><code>Head</code> provides base functions on head values.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Private">
  <a href="index.html#/modtype:S/module:Private" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Private : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Private functions, which might be used by the backends.</p>
      
        
      </div>
    
      
    <div class="sig">
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/module:Private">Private</a>.<a href="index.html#/module:Private/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Private/modtype:S/module:Node">Node</a>.<a href="index.html#/module:Private/modtype:S/module:Node/module:Path">Path</a>.<a href="index.html#/module:Private/modtype:S/module:Node/module:Path/type:step">step</a> = <a href="index.html#/modtype:S/type:step">step</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/modtype:S/module:Contents">Contents</a>.<a href="index.html#/module:Private/modtype:S/module:Contents/type:value">value</a> = <a href="index.html#/modtype:S/type:value">value</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/modtype:S/module:Commit">Commit</a>.<a href="index.html#/module:Private/modtype:S/module:Commit/type:key">key</a> = <a href="index.html#/modtype:S/type:head">head</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/modtype:S/module:Tag">Tag</a>.<a href="index.html#/module:Private/modtype:S/module:Tag/type:key">key</a> = <a href="index.html#/modtype:S/type:tag">tag</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/module:Private/modtype:S/module:Slice">Slice</a>.<a href="index.html#/module:Private/modtype:S/module:Slice/type:t">t</a> = <a href="index.html#/modtype:S/type:slice">slice</a> 
    </div>
  
  <div class="region" id="/modtype:S/module:Private/val:config">
  <a href="index.html#/modtype:S/module:Private/val:config" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> config : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:config">config</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Private/val:contents_t">
  <a href="index.html#/modtype:S/module:Private/val:contents_t" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> contents_t : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/module:Private/module:Contents">Contents</a>.<a href="index.html#/modtype:S/module:Private/module:Contents/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Private/val:node_t">
  <a href="index.html#/modtype:S/module:Private/val:node_t" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> node_t : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/module:Private/module:Node">Node</a>.<a href="index.html#/modtype:S/module:Private/module:Node/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Private/val:commit_t">
  <a href="index.html#/modtype:S/module:Private/val:commit_t" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> commit_t : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/module:Private/module:Commit">Commit</a>.<a href="index.html#/modtype:S/module:Private/module:Commit/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Private/val:tag_t">
  <a href="index.html#/modtype:S/module:Private/val:tag_t" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tag_t : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/module:Private/module:Tag">Tag</a>.<a href="index.html#/modtype:S/module:Private/module:Tag/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Private/val:read_node">
  <a href="index.html#/modtype:S/module:Private/val:read_node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_node : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/module:Private/module:Node">Node</a>.<a href="index.html#/modtype:S/module:Private/module:Node/type:key">key</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Private/val:mem_node">
  <a href="index.html#/modtype:S/module:Private/val:mem_node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> mem_node : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> bool <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Private/val:update_node">
  <a href="index.html#/modtype:S/module:Private/val:update_node" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> update_node : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/module:Private/module:Node">Node</a>.<a href="index.html#/modtype:S/module:Private/module:Node/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S_MAKER">
  <a href="index.html#/modtype:S_MAKER" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S_MAKER = <span class="keyword">functor</span> (P : <a href="index.html#/module:Path">Path</a>.<a href="index.html#/module:Path/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (C : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (T : <a href="index.html#/module:Tag">Tag</a>.<a href="index.html#/module:Tag/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (H : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:step">step</a> = <a href="index.html#/modtype:S_MAKER/modarg:1:P">P</a>.<a href="index.html#/modtype:S_MAKER/modarg:1:P/type:step">step</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:value">value</a> = <a href="index.html#/modtype:S_MAKER/modarg:2:C">C</a>.<a href="index.html#/modtype:S_MAKER/modarg:2:C/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:tag">tag</a> = <a href="index.html#/modtype:S_MAKER/modarg:3:T">T</a>.<a href="index.html#/modtype:S_MAKER/modarg:3:T/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:head">head</a> = <a href="index.html#/modtype:S_MAKER/modarg:4:H">H</a>.<a href="index.html#/modtype:S_MAKER/modarg:4:H/type:t">t</a>
    </div>
    
      <div class="doc">
        
      <p><code>S_MAKER</code> is the signature exposed by any backend providing <a href="index.html#/modtype:S">S</a>
implementations. <code>S</code> is the type of steps (a key is list of
steps), <code>C</code> is the implementation of user-defined contents, <code>T</code> is
the implementation of store tags and <code>H</code> is the implementation of
store heads. It does not use any native synchronization
primitives.</p>
      
        
      </div>
    
    
  </div>
  
  </div>
  
      <div class="doc">
        
  <div class="region" id="/label:basics">
  <a href="index.html#/label:basics" class="anchor">#</a>
  
    <h1 class="section level_1">Basic API</h1>
    
  </div>
  
        
      </div>
    
      <div class="doc">
        
      <p>The basic API considers default Irmin implementations using:</p>
      <ul><li><a href="index.html#/module:Path/module:String_list">list of strings</a> as keys.</li><li><a href="index.html#/module:Tag/module:String">strings</a> as tags.</li><li><a href="index.html#/module:Hash/module:SHA1">SHA1</a> as internal digests.</li></ul>
      <p>Only the <a href="index.html#/module:Contents/modtype:S">contents</a> is provided by the user.</p>
      
        
      </div>
    
  <div class="region" id="/modtype:BASIC">
  <a href="index.html#/modtype:BASIC" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> BASIC = <a href="index.html#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:step">step</a> = string <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:tag">tag</a> = string <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:head">head</a> = <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a>
    </div>
    
      <div class="doc">
        
      <p>The signature of basic stores.</p>
      
        
      </div>
    
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Basic">
  <a href="index.html#/module:Basic" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Basic : <span class="keyword">functor</span> (B : <a href="index.html#/modtype:S_MAKER">S_MAKER</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (C : <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:BASIC">BASIC</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:BASIC/type:value">value</a> = <a href="index.html#/module:Basic/modarg:2:C">C</a>.<a href="index.html#/module:Basic/modarg:2:C/type:t">t</a></div>
      
      <div class="doc">
        
      <p>Generate a basic store using <code>B</code> as backend and <code>C</code> as
user-provided contents.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/type:basic">
  <a href="index.html#/type:basic" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a basic = (<span class="keyword">module</span> <a href="index.html#/modtype:BASIC">BASIC</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:BASIC/type:value">value</a> = 'a)
    
      <div class="doc">
        
      <p>The type for basic stores.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:basic">
  <a href="index.html#/val:basic" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> basic : (<span class="keyword">module</span> <a href="index.html#/modtype:S_MAKER">S_MAKER</a>) <span class="rarr"><span>-&gt;</span></span> (<span class="keyword">module</span> <a href="index.html#/module:Contents">Contents</a>.<a href="index.html#/module:Contents/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/module:Contents/modtype:S/type:t">t</a> = 'a) <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:basic">basic</a>
    
      <div class="doc">
        
      <p><code>basic backend contents</code> is a basic Irmin implementation using
<code>backend</code> as a backend and containing values defined by
<code>contents</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:t">
  <a href="index.html#/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a t
    
      <div class="doc">
        
      <p>The type for default store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:create">
  <a href="index.html#/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : 'a <a href="index.html#/type:basic">basic</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:config">config</a> <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:RO">RO</a>.<a href="index.html#/modtype:RO/val:create">create</a>. Needs a backend as first argument.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:of_tag">
  <a href="index.html#/val:of_tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_tag : 'a <a href="index.html#/type:basic">basic</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:config">config</a> <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:of_tag">of_tag</a>. Needs a backend as first argument.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:of_head">
  <a href="index.html#/val:of_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_head : 'a <a href="index.html#/type:basic">basic</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:config">config</a> <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:of_head">of_head</a>. Needs a backend as first argument.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Base Operations</h2>
    </div>
        
      </div>
    
  <div class="region" id="/val:read">
  <a href="index.html#/val:read" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> 'a option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:RO">RO</a>.<a href="index.html#/modtype:RO/val:read">read</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:read_exn">
  <a href="index.html#/val:read_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_exn : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:RO">RO</a>.<a href="index.html#/modtype:RO/val:read_exn">read_exn</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:mem">
  <a href="index.html#/val:mem" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> mem : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> bool <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:RO">RO</a>.<a href="index.html#/modtype:RO/val:mem">mem</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:iter">
  <a href="index.html#/val:iter" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> iter : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (string list <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:RW">RW</a>.<a href="index.html#/modtype:RW/val:iter">iter</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:update">
  <a href="index.html#/val:update" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> update : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:RW">RW</a>.<a href="index.html#/modtype:RW/val:update">update</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:remove">
  <a href="index.html#/val:remove" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remove : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:RW">RW</a>.<a href="index.html#/modtype:RW/val:remove">remove</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:watch">
  <a href="index.html#/val:watch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> watch : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> 'a option <a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/">Lwt_stream</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:RW">RW</a>.<a href="index.html#/modtype:RW/val:watch">watch</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:list">
  <a href="index.html#/val:list" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> list : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> string list list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:HRW">HRW</a>.<a href="index.html#/modtype:HRW/val:list">list</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:remove_rec">
  <a href="index.html#/val:remove_rec" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remove_rec : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:HRW">HRW</a>.<a href="index.html#/modtype:HRW/val:remove_rec">remove_rec</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Tags</h2>
    </div>
        
      </div>
    
  <div class="region" id="/val:tag">
  <a href="index.html#/val:tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tag : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string option
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/type:tag">tag</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:tag_exn">
  <a href="index.html#/val:tag_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tag_exn : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:tag_exn">tag_exn</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:tags">
  <a href="index.html#/val:tags" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tags : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:tags">tags</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:rename_tag">
  <a href="index.html#/val:rename_tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> rename_tag : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Ok</div><div class="cons">| `Duplicated_tag</div> ] <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:rename_tag">rename_tag</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:update_tag">
  <a href="index.html#/val:update_tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> update_tag : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:update_tag">update_tag</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:merge_tag">
  <a href="index.html#/val:merge_tag" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_tag : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:merge_tag">merge_tag</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:merge_tag_exn">
  <a href="index.html#/val:merge_tag_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_tag_exn : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:merge_tag_exn">merge_tag_exn</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:switch">
  <a href="index.html#/val:switch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> switch : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:switch">switch</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Heads</h2>
    </div>
        
      </div>
    
  <div class="region" id="/val:head">
  <a href="index.html#/val:head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> head : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/type:head">head</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:head_exn">
  <a href="index.html#/val:head_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> head_exn : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:head_exn">head_exn</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:branch">
  <a href="index.html#/val:branch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> branch : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Tag <span class="keyword">of</span> string</div><div class="cons">| `Head <span class="keyword">of</span> <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a></div> ]
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:branch">branch</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:heads">
  <a href="index.html#/val:heads" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> heads : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:heads">heads</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:detach">
  <a href="index.html#/val:detach" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> detach : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:detach">detach</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:update_head">
  <a href="index.html#/val:update_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> update_head : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:update_head">update_head</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:merge_head">
  <a href="index.html#/val:merge_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_head : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:merge_head">merge_head</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:merge_head_exn">
  <a href="index.html#/val:merge_head_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_head_exn : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:merge_head_exn">merge_head_exn</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:watch_head">
  <a href="index.html#/val:watch_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> watch_head : 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string list <span class="rarr"><span>-&gt;</span></span> (string list * <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/module:SHA1">SHA1</a>.<a href="index.html#/module:Hash/module:SHA1/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/">Lwt_stream</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:watch_head">watch_head</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Clones and Merges</h2>
    </div>
        
      </div>
    
  <div class="region" id="/val:clone">
  <a href="index.html#/val:clone" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clone : ('m <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Ok <span class="keyword">of</span> 'm <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a></div><div class="cons">| `Duplicated_tag</div> ] <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:clone">clone</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:clone_force">
  <a href="index.html#/val:clone_force" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clone_force : ('m <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:clone_force">clone_force</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:merge">
  <a href="index.html#/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : 'm <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> into:('m <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:merge">merge</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:merge_exn">
  <a href="index.html#/val:merge_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_exn : 'm <span class="rarr"><span>-&gt;</span></span> ('m <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> into:('m <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>See <a href="index.html#/modtype:BC">BC</a>.<a href="index.html#/modtype:BC/val:merge_exn">merge_exn</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
  <div class="region" id="/label:examples">
  <a href="index.html#/label:examples" class="anchor">#</a>
  
    <h1 class="section level_1">Examples</h1>
    
  </div>
  
      <p>These examples are in the <code>examples</code> directory of the
distribution.</p>
      <div class="region">
    <h2 class="section level_2">Mergeable logs</h2>
    </div>
      <p>We want to define mergeable debug log. We first define a log entry
as a pair of a timestamp and a message, using the combinator
exposed by <a href="https://github.com/mirage/mirage-tc">mirage-tc</a>:</p>
      <pre><code>  module Entry = struct
    include Tc.Pair (Tc.Int)(Tc.String)
    let compare (x, _) (y, _) = Pervasives.compare x y
    let time = ref 0
    let create message = incr time; !time, message
  end</code></pre>
      <p>A log file is a list of entries (one per line), ordered by
decreasing order of timestamps. The 3-way <code>merge</code> operator for log
files concatenates and sorts the new entries and prepend them
to the common ancestor's ones.</p>
      <pre><code>  module Log: Irmin.Contents.S with type t = Entry.t list = struct
    include Tc.List(Entry)

    (* Get the timestamp of the latest entry. *)
    let timestamp = function
      | [] -&gt; 0
      | (timestamp, _ ) :: _ -&gt; timestamp

    (* Compute the entries newer than the given timestamp. *)
    let newer_than timestamp entries =
      let rec aux acc = function
        | [] -&gt; List.rev acc
        | (h, _) :: _ when h &lt;= timestamp -&gt; List.rev acc
        | h::t -&gt; aux (h::acc) t
      in
      aux [] entries

    let merge ~old t1 t2 =
      let open Irmin.Merge.OP in
      let ts = timestamp old in
      let t1 = newer_than ts t1 in
      let t2 = newer_than ts t2 in
      let t3 = List.sort Entry.compare (List.rev_append t1 t2) in
      ok (List.rev_append t3 old)
  end</code></pre>
      <p><b>Note:</b> The serialization primitives provided by
<a href="https://github.com/mirage/mirage-tc">mirage-tc</a>: are not very
efficient in this case as they parse the file every-time. For real
usage, you would write buffered versions of <code>Log.read</code> and
<code>Log.write</code>.</p>
      
      <p>To persist the log file on disk, we need to choose a backend. We
show here how to use the on-disk <code>Git</code> backend on Unix.</p>
      <pre><code>  (* Bring [Git_unix.task] and [Git_unix.Irmin_git] in scope. *)
  open Irmin_unix

  (* Build an Irmin store containing log files. *)
  let store = Irmin.basic (module Irmin_git.FS) (module Log)

  (* Set-up the local configuration of the Git repository. *)
  let config = Irmin_git.config ~root:&quot;/tmp/irmin/test&quot; ~bare:true ()</code></pre>
      <p>We can now define a toy example to use our mergeable log files.</p>
      <pre><code>  (* Name of the log file. *)
  let file = [ &quot;local&quot;; &quot;debug&quot; ]

  (* Read the entire log file. *)
  let read_file t =
    Irmin.read (t &quot;Reading the log file&quot;) file &gt;&gt;= function
    | None   -&gt; return_nil
    | Some l -&gt; return l

  (* Persist a new entry in the log. *)
  let log t fmt =
    Printf.ksprintf (fun message -&gt;
        read_file t &gt;&gt;= fun logs -&gt;
        let logs = Entry.create message :: logs in
        Irmin.update (t &quot;Adding a new entry&quot;) file logs
      ) fmt

  let () =
    Lwt_unix.run begin
      Irmin.create store config task                     &gt;&gt;= fun t -&gt;
      log t &quot;Adding a new log entry&quot;                     &gt;&gt;= fun () -&gt;
      Irmin.clone_force task (t &quot;Cloning the store&quot;) &quot;x&quot; &gt;&gt;= fun x -&gt;
      log x &quot;Adding new stuff to x&quot;                      &gt;&gt;= fun () -&gt;
      log x &quot;Adding more stuff to x&quot;                     &gt;&gt;= fun () -&gt;
      log x &quot;More. Stuff. To x.&quot;                         &gt;&gt;= fun () -&gt;
      log t &quot;I can add stuff on t also&quot;                  &gt;&gt;= fun () -&gt;
      log t &quot;Yes. On t!&quot;                                 &gt;&gt;= fun () -&gt;
      Irmin.merge_exn &quot;Merging x into t&quot; x ~into:t       &gt;&gt;= fun () -&gt;
      return_unit
    end</code></pre>
        
      </div>
    
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Helpers</h1>
    </div>
        
      </div>
    
  <div class="region" id="/type:remote">
  <a href="index.html#/type:remote" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> remote
    
      <div class="doc">
        
      <p>The type for remote stores.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:remote_uri">
  <a href="index.html#/val:remote_uri" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remote_uri : string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:remote">remote</a>
    
      <div class="doc">
        
      <p><code>remote_uri s</code> is the remote store located at <code>uri</code>. Use the
optimized native synchronization protocol when available for the
given backend.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:remote_store">
  <a href="index.html#/val:remote_store" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remote_store : (<span class="keyword">module</span> <a href="index.html#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:t">t</a> = 'a) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:remote">remote</a>
    
      <div class="doc">
        
      <p><code>remote_store t</code> is the remote corresponding to the local store
<code>t</code>. Synchronization is done by importing and exporting store
<a href="index.html#/modtype:BC/type:slice">slices</a>, so this is usually much slower than native
synchronization using <a href="index.html#/val:remote_uri">remote_uri</a> but it works for all
backends.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Sync">
  <a href="index.html#/module:Sync" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Sync : <span class="keyword">functor</span> (S : <a href="index.html#/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Sync</code> provides functions to synchronization an Irmin store with
local and remote Irmin stores.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Native Synchronization</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Sync/val:fetch">
  <a href="index.html#/module:Sync/val:fetch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fetch : <a href="index.html#/module:Sync/modarg:1:S">S</a>.<a href="index.html#/module:Sync/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:remote">remote</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Sync/modarg:1:S">S</a>.<a href="index.html#/module:Sync/modarg:1:S/type:head">head</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>fetch t ?depth r</code> populate the local store <code>t</code> with objects for
the remote store <code>r</code>, using <code>t</code>'s current branch. The <code>depth</code>
parameter limits the history depth. Return <code>None</code> if either the
local or remote store do not have a valid head.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Sync/val:fetch_exn">
  <a href="index.html#/module:Sync/val:fetch_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fetch_exn : <a href="index.html#/module:Sync/modarg:1:S">S</a>.<a href="index.html#/module:Sync/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:remote">remote</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Sync/modarg:1:S">S</a>.<a href="index.html#/module:Sync/modarg:1:S/type:head">head</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:Sync/val:fetch">fetch</a> but raise <code>Failure</code> if either the local or
remote store do not have a valid head.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Sync/val:pull">
  <a href="index.html#/module:Sync/val:pull" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pull : <a href="index.html#/module:Sync/modarg:1:S">S</a>.<a href="index.html#/module:Sync/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:remote">remote</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Merge</div><div class="cons">| `Update</div> ] <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>pull t ?depth r s</code> is similar to <a href="index.html#/module:Sync/val:fetch">fetch</a> but it
also updates <code>t</code>'s current branch. <code>s</code> is the update strategy:</p>
      <ul><li><code>`Merge</code> uses 
    <span style="color:orange">CUSTOM(S) .merge_head</span>
    . This strategy can return a conflict.</li><li><code>`Update</code> uses 
    <span style="color:orange">CUSTOM(S) .update_head.</span>
    </li></ul>
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Sync/val:pull_exn">
  <a href="index.html#/module:Sync/val:pull_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pull_exn : <a href="index.html#/module:Sync/modarg:1:S">S</a>.<a href="index.html#/module:Sync/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:remote">remote</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Merge</div><div class="cons">| `Update</div> ] <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:Sync/val:pull">pull</a> but raise <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a> in case of
conflict.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Sync/val:push">
  <a href="index.html#/module:Sync/val:push" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> push : <a href="index.html#/module:Sync/modarg:1:S">S</a>.<a href="index.html#/module:Sync/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:remote">remote</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `Ok</div><div class="cons">| `Error</div> ] <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>push t ?depth r</code> populates the remote store <code>r</code> with objects
from the current store <code>t</code>, using <code>t</code>'s current branch. If <code>b</code>
is <code>t</code>'s current branch, <code>push</code> also updates the head of <code>b</code> in
<code>r</code> to be the same as in <code>t</code>.</p>
      
      <p><b>Note:</b> <em>Git</em> semantics is to update <code>b</code> only if the new
head if more recent. This is not the case in <em>Irmin</em>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Sync/val:push_exn">
  <a href="index.html#/module:Sync/val:push_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> push_exn : <a href="index.html#/module:Sync/modarg:1:S">S</a>.<a href="index.html#/module:Sync/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:remote">remote</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:Sync/val:push">push</a> but raise <code>Failure</code> if an error happen.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View">
  <a href="index.html#/module:View" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> View : <span class="keyword">functor</span> (S : <a href="index.html#/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>View</code> provides an in-memory partial mirror of the store, with
lazy reads and delayed write.</p>
      
      <p>Views are like staging area in Git: they are temporary
non-persistent areas (they disappear if the host crash), hold in
memory for efficiency, where reads are done lazily and writes are
done only when needed on commit: if if you modify a key twice,
only the last change will be written to the store when you
commit. Views also hold a list of operations, which are checked
for conflicts on commits and are used to replay/rebase the view if
needed. The most important feature of views is that they keep
track of reads: <em>i.e.</em> you can have a conflict if a view reads a
key which has been modified concurrently by someone else.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Views</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:View/type:db">
  <a href="index.html#/module:View/type:db" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> db = <a href="index.html#/module:View/modarg:1:S">S</a>.<a href="index.html#/module:View/modarg:1:S/type:t">t</a>
    
      <div class="doc">
        
      <p>The type for store handles.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:HRW">HRW</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:HRW/type:step">step</a> = <a href="index.html#/module:View/modarg:1:S">S</a>.<a href="index.html#/module:View/modarg:1:S/module:Key">Key</a>.<a href="index.html#/module:View/modarg:1:S/module:Key/type:step">step</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:HRW/type:value">value</a> = <a href="index.html#/module:View/modarg:1:S">S</a>.<a href="index.html#/module:View/modarg:1:S/module:Val">Val</a>.<a href="index.html#/module:View/modarg:1:S/module:Val/type:t">t</a> 
    </div>
  
  <div class="region" id="/module:View/val:create">
  <a href="index.html#/module:View/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Create an empty view. Empty views do not have associated backend
configuration values, as they can perform in-memory operation,
independently of any given backend.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:rebase">
  <a href="index.html#/module:View/val:rebase" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> rebase : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> into:('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>rebase x t i</code> rebases the actions done on the view <code>t x</code> into
the view <code>i x</code>. If a read operation doesn't return the same
result, return <code>Conflict</code>. Only the view <code>i</code> is updated.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:rebase_exn">
  <a href="index.html#/module:View/val:rebase_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> rebase_exn : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> into:('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:View/val:rebase">rebase</a> but raise <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a> in case of
conflict.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:of_path">
  <a href="index.html#/module:View/val:of_path" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_path : ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:task">task</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:db">db</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Read a view from a path in the store. This is a cheap operation,
all the real reads operation will be done on-demand when the
view is used.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:update_path">
  <a href="index.html#/module:View/val:update_path" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> update_path : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:db">db</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>update_path x t path v</code> <em>replaces</em> the sub-tree under <code>path</code>
in the store <code>t x</code> by the contents of the view <code>v x</code>. See
<a href="index.html#/module:View/val:merge_path">merge_path</a> for more details.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:rebase_path">
  <a href="index.html#/module:View/val:rebase_path" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> rebase_path : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:db">db</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>rebase_path x t path v</code> <em>rebases</em> the view <code>v x</code> on top of
the contents of <code>t x</code>'s sub-tree pointed by the path
<code>path</code>. Rebasing means re-applying every <a href="index.html#/module:View/module:Action/type:t">actions</a>
stored in <code>t</code>, including the <em>reads</em>. Return <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a>
if one of the action cannot apply cleanly. See <a href="index.html#/module:View/val:merge_path">merge_path</a> for
more details.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:rebase_path_exn">
  <a href="index.html#/module:View/val:rebase_path_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> rebase_path_exn : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:db">db</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:View/val:rebase_path">rebase_path</a> but raise <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a> in case of
conflict.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:merge_path">
  <a href="index.html#/module:View/val:merge_path" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_path : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:db">db</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>merge_path x t path v</code> <em>merges</em> the view <code>v x</code> with the
contents of <code>t x</code>'s sub-tree pointed by the path <code>path</code>. Merging
means applying the <a href="index.html#/module:Merge/module:Map">merge function for map</a> between
the view's contents and <code>t</code>'s sub-tree.</p>
      <ul><li><a href="index.html#/module:View/val:update_path">update_path</a> discards any preexisting sub-tree.</li><li><a href="index.html#/module:View/val:rebase_path">rebase_path</a> is operation based. It keeps track of read
operations which can lead to <a href="index.html#/module:Merge/exn:Conflict">conflicts</a>. It
replays the full operation history of the view on top of any
preexisting sub-tree.</li><li><a href="index.html#/module:View/val:merge_path">merge_path</a> is state based. Is is an efficient 3-way merge operators between
prefix trees, based on <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/module:Map">Map</a>.<a href="index.html#/module:Merge/module:Map/val:merge">merge</a>.</li></ul>
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:merge_path_exn">
  <a href="index.html#/module:View/val:merge_path_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_path_exn : 'a <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:db">db</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:View/val:merge_path">merge_path</a> but raise <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a> in case of
conflicts.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/module:Action">
  <a href="index.html#/module:View/module:Action" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Action : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Action</code> provides information about operations performed on a
view.</p>
      
      <p>Each view stores the list of <a href="index.html#/module:View/module:Action/type:t">actions</a> that
have already been performed on it. These actions are useful
when the view needs to be rebased: write operations are
replayed while read results are checked against the original
run.</p>
      
      <p>Signature for actions performed on a view.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Actions</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:View/module:Action/type:t">
  <a href="index.html#/module:View/module:Action/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t = [ <div class="cons">| `Read <span class="keyword">of</span> <a href="index.html#/module:View/type:key">key</a> * <a href="index.html#/module:View/type:value">value</a> option</div><div class="cons">| `Write <span class="keyword">of</span> <a href="index.html#/module:View/type:key">key</a> * <a href="index.html#/module:View/type:value">value</a> option</div><div class="cons">| `Rmdir <span class="keyword">of</span> <a href="index.html#/module:View/type:key">key</a></div><div class="cons">| `List <span class="keyword">of</span> <a href="index.html#/module:View/type:key">key</a> * <a href="index.html#/module:View/type:key">key</a> list</div> ]
    
      <div class="doc">
        
      <p>Operations on view. The read results are kept to be able
to replay them on merge and to check for possible conflict:
this happens if the result read is different from the one
recorded.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
    <div class="include">
    <span class="keyword">include</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0/type:t">t</a> := <a href="index.html#/module:View/module:Action/type:t">t</a> 
    </div>
  
  <div class="region" id="/module:View/module:Action/val:pretty">
  <a href="index.html#/module:View/module:Action/val:pretty" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pretty : <a href="index.html#/module:View/module:Action/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Pretty-print an action.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/module:Action/val:prettys">
  <a href="index.html#/module:View/module:Action/val:prettys" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> prettys : <a href="index.html#/module:View/module:Action/type:t">t</a> list <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Pretty-print a sequence of actions.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:View/val:actions">
  <a href="index.html#/module:View/val:actions" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> actions : <a href="index.html#/module:View/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:View/module:Action">Action</a>.<a href="index.html#/module:View/module:Action/type:t">t</a> list
    
      <div class="doc">
        
      <p>Return the list of actions performed on this view since its
creation.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Snapshot">
  <a href="index.html#/module:Snapshot" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Snapshot : <span class="keyword">functor</span> (S : <a href="index.html#/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Snapshot</code> provides read-only, space-efficient, checkpoints of a
store. It also provides functions to rollback to a previous
state.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Snapshots</h1>
    </div>
        
      </div>
    
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:RO">RO</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:RO/type:key">key</a> = <a href="index.html#/module:Snapshot/modarg:1:S">S</a>.<a href="index.html#/module:Snapshot/modarg:1:S/module:Key">Key</a>.<a href="index.html#/module:Snapshot/modarg:1:S/module:Key/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:RO/type:value">value</a> = <a href="index.html#/module:Snapshot/modarg:1:S">S</a>.<a href="index.html#/module:Snapshot/modarg:1:S/module:Val">Val</a>.<a href="index.html#/module:Snapshot/modarg:1:S/module:Val/type:t">t</a> 
    </div>
  
  <div class="region" id="/module:Snapshot/val:to_hum">
  <a href="index.html#/module:Snapshot/val:to_hum" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> to_hum : <a href="index.html#/module:Snapshot/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Pretty-print a snapshot value.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Snapshot/val:of_hum">
  <a href="index.html#/module:Snapshot/val:of_hum" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_hum : <a href="index.html#/module:Snapshot/modarg:1:S">S</a>.<a href="index.html#/module:Snapshot/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Snapshot/type:t">t</a>
    
      <div class="doc">
        
      <p>Read a pretty-printed snapshot value.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Snapshot/val:create">
  <a href="index.html#/module:Snapshot/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : <a href="index.html#/module:Snapshot/modarg:1:S">S</a>.<a href="index.html#/module:Snapshot/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Snapshot/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Snapshot the current state of the store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Snapshot/val:revert">
  <a href="index.html#/module:Snapshot/val:revert" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> revert : <a href="index.html#/module:Snapshot/modarg:1:S">S</a>.<a href="index.html#/module:Snapshot/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Snapshot/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Revert the store to a previous state.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Snapshot/val:merge">
  <a href="index.html#/module:Snapshot/val:merge" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge : <a href="index.html#/module:Snapshot/modarg:1:S">S</a>.<a href="index.html#/module:Snapshot/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Snapshot/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/type:result">result</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Merge the given snapshot into the current branch of the
store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Snapshot/val:merge_exn">
  <a href="index.html#/module:Snapshot/val:merge_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> merge_exn : <a href="index.html#/module:Snapshot/modarg:1:S">S</a>.<a href="index.html#/module:Snapshot/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Snapshot/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <a href="index.html#/module:Snapshot/val:merge">merge</a> but raise <a href="index.html#/module:Merge">Merge</a>.<a href="index.html#/module:Merge/exn:Conflict">Conflict</a> in case of
conflict.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Snapshot/val:watch">
  <a href="index.html#/module:Snapshot/val:watch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> watch : <a href="index.html#/module:Snapshot/modarg:1:S">S</a>.<a href="index.html#/module:Snapshot/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Snapshot/type:key">key</a> <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/module:Snapshot/type:key">key</a> * <a href="index.html#/module:Snapshot/type:t">t</a>) <a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/">Lwt_stream</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt_stream/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Subscribe to the stream of modification events attached to a
given path. Takes and returns a new snapshot every time a
sub-path is modified.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Dot">
  <a href="index.html#/module:Dot" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Dot : <span class="keyword">functor</span> (S : <a href="index.html#/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>Dot</code> provides functions to export a store to the Graphviz `dot`
format.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Dot Export</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Dot/val:output_buffer">
  <a href="index.html#/module:Dot/val:output_buffer" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> output_buffer : <a href="index.html#/module:Dot/modarg:1:S">S</a>.<a href="index.html#/module:Dot/modarg:1:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?html:bool <span class="rarr"><span>-&gt;</span></span> ?depth:int <span class="rarr"><span>-&gt;</span></span> ?full:bool <span class="rarr"><span>-&gt;</span></span> date:(int64 <span class="rarr"><span>-&gt;</span></span> string) <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/stdlib/buffer/">Buffer</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/buffer/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>output_buffer t ?html ?depth ?full buf</code> outputs the Graphviz
representation of <code>t</code> in the buffer <code>buf</code>.</p>
      
      <p><code>html</code> (default is false) enables HTML labels.</p>
      
      <p><code>depth</code> is used to limit the depth of the commit history. <code>None</code>
here means no limitation.</p>
      
      <p>If <code>full</code> is set (default is not) the full graph, including the
commits, nodes and contents, is exported, otherwise it is the
commit history graph only.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
  <div class="region" id="/label:backend">
  <a href="index.html#/label:backend" class="anchor">#</a>
  
    <h1 class="section level_1">Backends</h1>
    
  </div>
  
        
      </div>
    
      <div class="doc">
        
      <p>API to create new Irmin backends. A backend is an implementation
exposing either a concrete implementation of <a href="index.html#/modtype:S">S</a> or a functor
providing <a href="index.html#/modtype:S">S</a> once applied.</p>
      
      <p>There are two ways to create a concrete <a href="../../../../irmin.0.9.1/_build/lib/irmin/">Irmin</a>.<a href="../../../../irmin.0.9.1/_build/lib/irmin/#/modtype:S">S</a> implementation:</p>
      <ul><li><a href="index.html#/module:Make">Make</a> creates a store where all the objects are stored in the
same store, using the same internal keys format and a custom binary
format based on <a href="https://github.com/janestreet/bin_prot">bin_prot</a>,
with no native synchronization primitives: it is usually what is
needed to quickly create a new backend.</li><li><a href="index.html#/module:Make_ext">Make_ext</a> creates a store with a <em>deep</em> embedding of each
of the internal stores into separate store, with a total control over
the binary format and using the native synchronization protocols
when available. This is mainly used by the Git backend, but could
be used for other similar backends as well in the future.</li></ul>
        
      </div>
    
  <div class="region" id="/modtype:AO_MAKER">
  <a href="index.html#/modtype:AO_MAKER" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> AO_MAKER = <span class="keyword">functor</span> (K : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (V : <a href="../../../../mirage-tc.0.3.0/_build/lib/tc/">Tc</a>.<a href="../../../../mirage-tc.0.3.0/_build/lib/tc/#/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:AO">AO</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:AO/type:key">key</a> = <a href="index.html#/modtype:AO_MAKER/modarg:1:K">K</a>.<a href="index.html#/modtype:AO_MAKER/modarg:1:K/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:AO/type:value">value</a> = <a href="index.html#/modtype:AO_MAKER/modarg:2:V">V</a>.<a href="index.html#/modtype:AO_MAKER/modarg:2:V/type:t">t</a>
    </div>
    
      <div class="doc">
        
      <p><code>AO_MAKER</code> is the signature exposed by any backend providing
append-only stores. <code>K</code> is the implementation of keys and <code>V</code> is
the implementation of values.</p>
      
        
      </div>
    
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:RW_MAKER">
  <a href="index.html#/modtype:RW_MAKER" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> RW_MAKER = <span class="keyword">functor</span> (K : <a href="index.html#/module:Hum">Hum</a>.<a href="index.html#/module:Hum/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (V : <a href="index.html#/module:Hash">Hash</a>.<a href="index.html#/module:Hash/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:RW">RW</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:RW/type:key">key</a> = <a href="index.html#/modtype:RW_MAKER/modarg:1:K">K</a>.<a href="index.html#/modtype:RW_MAKER/modarg:1:K/type:t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:RW/type:value">value</a> = <a href="index.html#/modtype:RW_MAKER/modarg:2:V">V</a>.<a href="index.html#/modtype:RW_MAKER/modarg:2:V/type:t">t</a>
    </div>
    
      <div class="doc">
        
      <p><code>RW_MAKER</code> is the signature exposed by any backend providing
read-write stores. <code>K</code> is the implementation of keys and <code>V</code> is
the implementation of values.</p>
      
        
      </div>
    
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Make">
  <a href="index.html#/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (AO : <a href="index.html#/modtype:AO_MAKER">AO_MAKER</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (RW : <a href="index.html#/modtype:RW_MAKER">RW_MAKER</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S_MAKER">S_MAKER</a></div>
      
      <div class="doc">
        
      <p>Simple store creator. Use the same type of all of the internal
keys and store all the values in the same store.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Make_ext">
  <a href="index.html#/module:Make_ext" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make_ext : <span class="keyword">functor</span> (P : <a href="index.html#/module:Private">Private</a>.<a href="index.html#/module:Private/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:step">step</a> = <a href="index.html#/module:Make_ext/modarg:1:P">P</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Node">Node</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Node/module:Path">Path</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Node/module:Path/type:step">step</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:value">value</a> = <a href="index.html#/module:Make_ext/modarg:1:P">P</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Contents">Contents</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Contents/type:value">value</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:tag">tag</a> = <a href="index.html#/module:Make_ext/modarg:1:P">P</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Tag">Tag</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Tag/type:key">key</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:head">head</a> = <a href="index.html#/module:Make_ext/modarg:1:P">P</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Tag">Tag</a>.<a href="index.html#/module:Make_ext/modarg:1:P/module:Tag/type:value">value</a></div>
      
      <div class="doc">
        
      <p>Advanced store creator.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
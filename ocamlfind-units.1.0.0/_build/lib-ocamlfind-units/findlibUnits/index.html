<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>FindlibUnits</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">FindlibUnits</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>FindlibUnits</code> provides compilation unit inference queries for
findlib packages.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h3 class="section level_3">Types</h3>
    </div>
        
      </div>
    
  <div class="region" id="/module:Map">
  <a href="index.html#/module:Map" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Map : <a href="../../../../ocaml.4.02.1+doc/stdlib/map/">Map</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/map/#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../../ocaml.4.02.1+doc/stdlib/map/#/modtype:S/type:key">key</a> = string</div>
      
      <div class="doc">
        
      <p>A basic map with string keys</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Set">
  <a href="index.html#/module:Set" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Set : <a href="../../../../ocaml.4.02.1+doc/stdlib/set/">Set</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/set/#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../../ocaml.4.02.1+doc/stdlib/set/#/modtype:S/type:elt">elt</a> = string</div>
      
      <div class="doc">
        
      <p>A basic set of strings</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/type:state">
  <a href="index.html#/type:state" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> state = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/type:state/field:sublibraries_of_package">
  <a href="index.html#/type:state/field:sublibraries_of_package" class="anchor">#</a>
  sublibraries_of_package
  </div>
  </td><td>: <a href="index.html#/module:Set">Set</a>.<a href="index.html#/module:Set/type:t">t</a> <a href="index.html#/module:Map">Map</a>.<a href="index.html#/module:Map/type:t">t</a></td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:state/field:packages_of_dir">
  <a href="index.html#/type:state/field:packages_of_dir" class="anchor">#</a>
  packages_of_dir
  </div>
  </td><td>: <a href="index.html#/module:Set">Set</a>.<a href="index.html#/module:Set/type:t">t</a> <a href="index.html#/module:Map">Map</a>.<a href="index.html#/module:Map/type:t">t</a></td><td>;</td><td></td><td></td><td></td>
  </tr>
    </table>}
    
      <div class="doc">
        
      <p>A snapshot of some findlib state</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:source">
  <a href="index.html#/type:source" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> source = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:source/cons:Archive">
  <a href="index.html#/type:source/cons:Archive" class="anchor">#</a>
  | Archive <span class="keyword">of</span> string
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:source/cons:Meta">
  <a href="index.html#/type:source/cons:Meta" class="anchor">#</a>
  | Meta
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:source/cons:Path">
  <a href="index.html#/type:source/cons:Path" class="anchor">#</a>
  | Path
  </div>
  </td><td></td><td></td><td></td></tr>
    </table>
    
      <div class="doc">
        
      <p>The source of the inference that a unit belongs to a findlib package</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:u">
  <a href="index.html#/type:u" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> u = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/type:u/field:name">
  <a href="index.html#/type:u/field:name" class="anchor">#</a>
  name
  </div>
  </td><td>: string</td><td>;</td><td>(*</td><td class="doc">The name of the module the compilation unit represents</td><td>*)</td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:u/field:path">
  <a href="index.html#/type:u/field:path" class="anchor">#</a>
  path
  </div>
  </td><td>: string</td><td>;</td><td>(*</td><td class="doc">The path where the compilation unit is found</td><td>*)</td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:u/field:cmi">
  <a href="index.html#/type:u/field:cmi" class="anchor">#</a>
  cmi
  </div>
  </td><td>: string</td><td>;</td><td>(*</td><td class="doc">The filename of the cmi containing the unit</td><td>*)</td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:u/field:source">
  <a href="index.html#/type:u/field:source" class="anchor">#</a>
  source
  </div>
  </td><td>: <a href="index.html#/type:source">source</a></td><td>;</td><td>(*</td><td class="doc">The means by which the unit's membership was inferred</td><td>*)</td>
  </tr>
    </table>}
    
      <div class="doc">
        
      <p>An identified compilation unit</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:t">
  <a href="index.html#/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t = <a href="index.html#/type:u">u</a> <a href="index.html#/module:Map">Map</a>.<a href="index.html#/module:Map/type:t">t</a> <a href="index.html#/module:Map">Map</a>.<a href="index.html#/module:Map/type:t">t</a>
    
      <div class="doc">
        
      <p>A map from findlib package names to unit names to units</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h3 class="section level_3">Queries</h3>
    </div>
      <p><b>Note:</b> if multiple top-level packages share an installation
directory, only those units which can be found through archives or
META files are included and no paths will be searched. This means
that these queries may miss certain units such as those that
describe module interfaces with only types and lack <code>.ml</code>
implementations. In the case of subpackages, loose <code>.cmi</code> files
are associated to the top-level package.</p>
      
        
      </div>
    
  <div class="region" id="/val:state">
  <a href="index.html#/val:state" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> state : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:state">state</a>
    
      <div class="doc">
        
      <p><code>state ()</code> is a snapshot of some of the current findlib state.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:of_package_only">
  <a href="index.html#/val:of_package_only" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_package_only : <a href="index.html#/type:state">state</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:u">u</a> <a href="index.html#/module:Map">Map</a>.<a href="index.html#/module:Map/type:t">t</a>
    
      <div class="doc">
        
      <p><code>of_package_only state name</code> is a map of unit names to units for a
findlib package. A <a href="index.html#/type:state">state</a> value is required to disambiguate
packages that share the same directory.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:of_package">
  <a href="index.html#/val:of_package" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_package : <a href="index.html#/type:state">state</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>of_package state name</code> is a map of findlib package names to unit
names to units. All packages with <code>name</code> as self or an ancestor
are included with their full names. The subpackage search is based
on <code>state</code> which may be generated by <a href="index.html#/val:state">state</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:all">
  <a href="index.html#/val:all" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> all : <a href="index.html#/type:state">state</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>all state</code> is a map of findlib packages to unit names to units.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
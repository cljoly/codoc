<?xml version="1.0" encoding="UTF-8"?>
<unit><root><base><html src="index.html"><xml src="index.xml"><cmti name="Lwt_daemon" src="/home/dsheets/.opam/doc/build/lwt.2.4.6/_build/src/unix/lwt_daemon.cmti" digest="e8c066efbf8a5aa6ccaf84bcc1141ee2"/></xml></html></base>Lwt_daemon</root><digest>e8c066efbf8a5aa6ccaf84bcc1141ee2</digest><import>Bigarray<digest>0643187a8b562858118690c393d01c2e</digest></import><import>Buffer<digest>a579f4a57e300ec755f84af883c1e51b</digest></import><import>CamlinternalFormatBasics<digest>ba1be62eb45abd435c75cb59cc46b922</digest></import><import>Complex<digest>d0dcc1da3c694cf9a7e924c7832d1528</digest></import><import>Lwt<digest>3ec18d03611d8f4576b577b743482a48</digest></import><import>Lwt_bytes<digest>ee02628bb9b453325873f9a6b27eb891</digest></import><import>Lwt_io<digest>124fc3c0d1eecf72b3159461302e806c</digest></import><import>Lwt_log<digest>4b07dbf4201f552f0059e14f95bf0bbd</digest></import><import>Lwt_log_core<digest>51e729e13a687f3968583b49b9222714</digest></import><import>Lwt_sequence<digest>ce3592bc901ce0c829f4f282ef54d80a</digest></import><import>Lwt_stream<digest>cb31901fda8c8b13d0212288d5f80b59</digest></import><import>Lwt_sys<digest>ef11f7b477bb51889a4cbe8954d8a15d</digest></import><import>Lwt_unix<digest>c749f0f828fd62fb0a12d7bbad6e6205</digest></import><import>Marshal<digest>6a7be818a4d43f06397faef2c6f9d35b</digest></import><import>Pervasives<digest>0d015a5a2136659b0de431be7f1545be</digest></import><import>Unix<digest>30a4cc8e5f4f902ea609c91caec48af7</digest></import><source><file>src/unix/lwt_daemon.mli</file><dir>/home/dsheets/.opam/doc/build/lwt.2.4.6/_build</dir><digest>be24b7e9ea6d5dcdaf979f0d8bdd2ff0</digest></source><doc>Daemon helpers</doc><value><value><root><base><xml src="index.xml"><cmti name="Lwt_daemon" src="/home/dsheets/.opam/doc/build/lwt.2.4.6/_build/src/unix/lwt_daemon.cmti" digest="e8c066efbf8a5aa6ccaf84bcc1141ee2"/></xml></base>Lwt_daemon</root>daemonize</value><doc>Put the current running process into daemon mode. I.e. it forks
and exit the parent, detach it from its controlling terminal,
and redict standard intputs/outputs..<newline/>Notes:<list><item>if the process is already a daemon, it does nothing.</item><item>you must be sure that there is no pending threads when
calling this function, otherwise they may be canceled.</item></list>If <code>syslog</code> is <code>true</code> (the default), then <reference><element><resolved><value><identifier><root><base><xml src="../../../../../lwt.2.4.6/_build/src/unix/lwt_log/index.xml"><cmti name="Lwt_log" src="/home/dsheets/.opam/doc/build/lwt.2.4.6/_build/src/unix/lwt_log.cmti" digest="4b07dbf4201f552f0059e14f95bf0bbd"/></xml></base>Lwt_log</root></identifier>default</value></resolved></element></reference> is
set to <code>Lwt_log.syslog ~facility:`Daemon ()</code>, otherwise it is
kept unchanged.<newline/><code>stdin</code> is one of:<list><item><code>`Dev_null</code> which means that <code>Unix.stdin</code> is reopened as
<code>/dev/null</code>, this is the default behavior</item><item><code>`Close</code> means that <code>Unix.stdin</code> is simply closed</item><item><code>`Keep</code> means that <code>Unix.stdin</code> is left unchanged</item></list><code>stdout</code> and <code>stderr</code> control how the two associated file
descriptors are redirected:<list><item><code>`Dev_null</code> means that the output is redirected to <code>/dev/null</code></item><item><code>`Close</code> means that the file descriptor is closed</item><item><code>`Keep</code> means that it is left unchanged</item><item><code>`Log logger</code> means that the output is redirected to this
logger</item><item><code>`Log_default</code> means that the output is redirected to the
default logger</item></list>Both <code>stdout</code> and <code>stderr</code> defaults to <code>`Log_default</code>.<newline/>Warning: do not redirect an output to a logger logging into this
outpout, for example this code will create an infinite loop:<newline/><precode>        let logger = Lwt_log.channel ~close_mode:`Keep ~channel:Lwt_io.stderr () in
        Lwt_daemon.daemonize ~syslog:false ~stderr:(`Log logger) ();
        prerr_endline &quot;foo&quot;</precode><newline/>The current working directory is set to <code>directory</code>, which
defaults to <code>&quot;/&quot;</code>.<newline/><code>umask</code> may be one of:<list><item><code>`Keep</code> which means that the umask is left unchanged</item><item><code>`Set n</code> which means that the umash is set to <code>n</code></item></list>It defaults to <code>`Set 0o022</code>.</doc><arrow><optional>syslog</optional><path><resolved><identifier><type>bool</type></identifier></resolved></path><arrow><optional>stdin</optional><poly_variant><fixed/><constructor>Dev_null<constant/></constructor><constructor>Close<constant/></constructor><constructor>Keep<constant/></constructor></poly_variant><arrow><optional>stdout</optional><poly_variant><fixed/><constructor>Dev_null<constant/></constructor><constructor>Close<constant/></constructor><constructor>Keep<constant/></constructor><constructor>Log_default<constant/></constructor><constructor>Log<path><resolved><type><identifier><root><base><xml src="../../../../../lwt.2.4.6/_build/src/unix/lwt_log/index.xml"><cmti name="Lwt_log" src="/home/dsheets/.opam/doc/build/lwt.2.4.6/_build/src/unix/lwt_log.cmti" digest="4b07dbf4201f552f0059e14f95bf0bbd"/></xml></base>Lwt_log</root></identifier>logger</type></resolved></path></constructor></poly_variant><arrow><optional>stderr</optional><poly_variant><fixed/><constructor>Dev_null<constant/></constructor><constructor>Close<constant/></constructor><constructor>Keep<constant/></constructor><constructor>Log_default<constant/></constructor><constructor>Log<path><resolved><type><identifier><root><base><xml src="../../../../../lwt.2.4.6/_build/src/unix/lwt_log/index.xml"><cmti name="Lwt_log" src="/home/dsheets/.opam/doc/build/lwt.2.4.6/_build/src/unix/lwt_log.cmti" digest="4b07dbf4201f552f0059e14f95bf0bbd"/></xml></base>Lwt_log</root></identifier>logger</type></resolved></path></constructor></poly_variant><arrow><optional>directory</optional><path><resolved><identifier><type>string</type></identifier></resolved></path><arrow><optional>umask</optional><poly_variant><fixed/><constructor>Keep<constant/></constructor><constructor>Set<path><resolved><identifier><type>int</type></identifier></resolved></path></constructor></poly_variant><arrow><path><resolved><identifier><type>unit</type></identifier></resolved></path><path><resolved><identifier><type>unit</type></identifier></resolved></path></arrow></arrow></arrow></arrow></arrow></arrow></arrow></value></unit>
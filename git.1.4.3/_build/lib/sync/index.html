<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Sync</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Sync</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Clone/Fecth/Push protocol</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/module:Result">
  <a href="index.html#/module:Result" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Result : <span class="keyword">sig</span></div>
      
      
    <div class="sig">
  <div class="region" id="/module:Result/type:fetch">
  <a href="index.html#/module:Result/type:fetch" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> fetch = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/module:Result/type:fetch/field:head">
  <a href="index.html#/module:Result/type:fetch/field:head" class="anchor">#</a>
  head
  </div>
  </td><td>: <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit">Commit</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit/type:t">t</a> option</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/module:Result/type:fetch/field:references">
  <a href="index.html#/module:Result/type:fetch/field:references" class="anchor">#</a>
  references
  </div>
  </td><td>: <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit">Commit</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit/type:t">t</a> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/module:Map">Map</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/module:Map/type:t">t</a></td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/module:Result/type:fetch/field:sha1s">
  <a href="index.html#/module:Result/type:fetch/field:sha1s" class="anchor">#</a>
  sha1s
  </div>
  </td><td>: <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/type:t">t</a> list</td><td>;</td><td></td><td></td><td></td>
  </tr>
    </table>}
    
      <div class="doc">
        
      <p>The resulting sha1s and references.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Result/val:pretty_fetch">
  <a href="index.html#/module:Result/val:pretty_fetch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pretty_fetch : <a href="index.html#/module:Result/type:fetch">fetch</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Pretty print a fetch result.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Result/type:ok_or_error">
  <a href="index.html#/module:Result/type:ok_or_error" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> ok_or_error = [ <div class="cons">| `Ok</div><div class="cons">| `Error <span class="keyword">of</span> string</div> ]
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Result/type:push">
  <a href="index.html#/module:Result/type:push" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> push = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/module:Result/type:push/field:result">
  <a href="index.html#/module:Result/type:push/field:result" class="anchor">#</a>
  result
  </div>
  </td><td>: <a href="index.html#/module:Result/type:ok_or_error">ok_or_error</a></td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/module:Result/type:push/field:commands">
  <a href="index.html#/module:Result/type:push/field:commands" class="anchor">#</a>
  commands
  </div>
  </td><td>: (<a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:t">t</a> * <a href="index.html#/module:Result/type:ok_or_error">ok_or_error</a>) list</td><td>;</td><td></td><td></td><td></td>
  </tr>
    </table>}
    
      <div class="doc">
        
      <p>The result of a push operation.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Result/val:pretty_push">
  <a href="index.html#/module:Result/val:pretty_push" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pretty_push : <a href="index.html#/module:Result/type:push">push</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Pretty print a push status.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S">
  <a href="index.html#/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
  <div class="region" id="/modtype:S/type:t">
  <a href="index.html#/modtype:S/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>Abstract value for stores.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:ls">
  <a href="index.html#/modtype:S/val:ls" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> ls : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/gri/">Gri</a>.<a href="../../../../git.1.4.3/_build/lib/gri/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit">Commit</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit/type:t">t</a> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/module:Map">Map</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/module:Map/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>List the references of the remote repository.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:push">
  <a href="index.html#/modtype:S/val:push" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> push : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> branch:<a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/gri/">Gri</a>.<a href="../../../../git.1.4.3/_build/lib/gri/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Result">Result</a>.<a href="index.html#/module:Result/type:push">push</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Push a local branch to a remote store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:clone">
  <a href="index.html#/modtype:S/val:clone" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clone : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?deepen:int <span class="rarr"><span>-&gt;</span></span> ?unpack:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/gri/">Gri</a>.<a href="../../../../git.1.4.3/_build/lib/gri/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Result">Result</a>.<a href="index.html#/module:Result/type:fetch">fetch</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>clone t address</code> clones the contents of <code>address</code> into the
store <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:fetch">
  <a href="index.html#/modtype:S/val:fetch" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fetch : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?deepen:int <span class="rarr"><span>-&gt;</span></span> ?unpack:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/gri/">Gri</a>.<a href="../../../../git.1.4.3/_build/lib/gri/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Result">Result</a>.<a href="index.html#/module:Result/type:fetch">fetch</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p><code>fetch t address</code> fetches the missing contents of <code>address</code> into
the store <code>t</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Constructor</h2>
    </div>
        
      </div>
    
  <div class="region" id="/modtype:IO">
  <a href="index.html#/modtype:IO" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> IO = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
      <div class="doc">
        
      <p>Channel abstraction.</p>
      
        
      </div>
    
  <div class="region" id="/modtype:IO/type:ic">
  <a href="index.html#/modtype:IO/type:ic" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> ic
    
      <div class="doc">
        
      <p>Type for input channels.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:IO/type:oc">
  <a href="index.html#/modtype:IO/type:oc" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> oc
    
      <div class="doc">
        
      <p>Type for output channels.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:IO/val:with_connection">
  <a href="index.html#/modtype:IO/val:with_connection" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> with_connection : <a href="../../../../uri.1.7.2/_build/lib/uri/">Uri</a>.<a href="../../../../uri.1.7.2/_build/lib/uri/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ?init:string <span class="rarr"><span>-&gt;</span></span> (<a href="index.html#/modtype:IO/type:ic">ic</a> * <a href="index.html#/modtype:IO/type:oc">oc</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>) <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Connect to a remote server, get the corresponding input and
output channels and apply a function on them. Close the channel
once the function returns. The <code>init</code> corresponds to an optional
first message sent on the connection to set-it up.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:IO/val:read_all">
  <a href="index.html#/modtype:IO/val:read_all" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_all : <a href="index.html#/modtype:IO/type:ic">ic</a> <span class="rarr"><span>-&gt;</span></span> string <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Read all the channel contents (until the channel is closed by
the other side).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:IO/val:read_exactly">
  <a href="index.html#/modtype:IO/val:read_exactly" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_exactly : <a href="index.html#/modtype:IO/type:ic">ic</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> string <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Read a given number of bits.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:IO/val:write">
  <a href="index.html#/modtype:IO/val:write" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> write : <a href="index.html#/modtype:IO/type:oc">oc</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Write a string on a channel.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:IO/val:flush">
  <a href="index.html#/modtype:IO/val:flush" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> flush : <a href="index.html#/modtype:IO/type:oc">oc</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Flush the channel.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Make">
  <a href="index.html#/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (IO : <a href="index.html#/modtype:IO">IO</a>) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (S : <a href="../../../../git.1.4.3/_build/lib/store/">Store</a>.<a href="../../../../git.1.4.3/_build/lib/store/#/modtype:S">S</a>) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#/modtype:S/type:t">t</a> = <a href="index.html#/module:Make/modarg:2:S">S</a>.<a href="index.html#/module:Make/modarg:2:S/type:t">t</a></div>
      
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Store</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Store</a></h1> : <span class="keyword">sig</span></div>
      
      
    <div class="sig">
  <div class="region" id="/modtype:S">
  <a href="index.html#/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
      <div class="doc">
        
      <p>Signature for Git stores.</p>
      
        
      </div>
    
  <div class="region" id="/modtype:S/type:t">
  <a href="index.html#/modtype:S/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>Git store handlers.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:create">
  <a href="index.html#/modtype:S/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : ?root:string <span class="rarr"><span>-&gt;</span></span> unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Create a store handler for the given path. If <code>root</code> is not set,
use the current directory.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:clear">
  <a href="index.html#/modtype:S/val:clear" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clear : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Remove all the contents of the Git store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:root">
  <a href="index.html#/modtype:S/val:root" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> root : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>The state root (or any other meaningful name to be displayed to
the user).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:dump">
  <a href="index.html#/modtype:S/val:dump" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> dump : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Dump the store contents to stderr.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:contents">
  <a href="index.html#/modtype:S/val:contents" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> contents : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> (<a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/type:t">t</a> * <a href="../../../../dyntype.0.9.0/_build/lib/value/">Value</a>.<a href="../../../../dyntype.0.9.0/_build/lib/value/#/type:t">t</a>) list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Get the full store contents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Objects</h2>
    </div>
        
      </div>
    
  <div class="region" id="/modtype:S/val:read">
  <a href="index.html#/modtype:S/val:read" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../dyntype.0.9.0/_build/lib/value/">Value</a>.<a href="../../../../dyntype.0.9.0/_build/lib/value/#/type:t">t</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Return the object having the given SHA name.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:read_exn">
  <a href="index.html#/modtype:S/val:read_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_exn : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../dyntype.0.9.0/_build/lib/value/">Value</a>.<a href="../../../../dyntype.0.9.0/_build/lib/value/#/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Same as <code>read</code> but raises <code>Not_found</code> if no object with the given
SHA is found.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:mem">
  <a href="index.html#/modtype:S/val:mem" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> mem : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> bool <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Check whether a key belongs to the store.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:list">
  <a href="index.html#/modtype:S/val:list" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> list : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/type:t">t</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Return the list of SHA names.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:write">
  <a href="index.html#/modtype:S/val:write" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> write : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../dyntype.0.9.0/_build/lib/value/">Value</a>.<a href="../../../../dyntype.0.9.0/_build/lib/value/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Write a value and return the SHA of its serialized contents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:write_pack">
  <a href="index.html#/modtype:S/val:write_pack" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> write_pack : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/pack/">Pack</a>.<a href="../../../../git.1.4.3/_build/lib/pack/#/module:Raw">Raw</a>.<a href="../../../../git.1.4.3/_build/lib/pack/#/module:Raw/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Set">Set</a>.t <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Write a raw pack file and the corresponding index. Return the
objects IDs which have been written.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">References</h2>
    </div>
        
      </div>
    
  <div class="region" id="/modtype:S/val:references">
  <a href="index.html#/modtype:S/val:references" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> references : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:t">t</a> list <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Return the list of references (ie. tags and branches).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:mem_reference">
  <a href="index.html#/modtype:S/val:mem_reference" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> mem_reference : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> bool <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Check if a reference exists.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:read_reference">
  <a href="index.html#/modtype:S/val:read_reference" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_reference : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit">Commit</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit/type:t">t</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Read a given reference.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:read_reference_exn">
  <a href="index.html#/modtype:S/val:read_reference_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_reference_exn : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit">Commit</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Read a given reference.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:write_head">
  <a href="index.html#/modtype:S/val:write_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> write_head : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:head_contents">head_contents</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Write the HEAD.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:read_head">
  <a href="index.html#/modtype:S/val:read_head" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_head : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:head_contents">head_contents</a> option <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Read the head contents.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:write_reference">
  <a href="index.html#/modtype:S/val:write_reference" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> write_reference : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit">Commit</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Write a reference.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:remove_reference">
  <a href="index.html#/modtype:S/val:remove_reference" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> remove_reference : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/reference/">Reference</a>.<a href="../../../../git.1.4.3/_build/lib/reference/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Remove a refernce.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h2 class="section level_2">Cache file</h2>
    </div>
        
      </div>
    
  <div class="region" id="/modtype:S/val:read_cache">
  <a href="index.html#/modtype:S/val:read_cache" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_cache : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/cache/">Cache</a>.<a href="../../../../git.1.4.3/_build/lib/cache/#/type:t">t</a> <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Return the cache of files.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:write_cache">
  <a href="index.html#/modtype:S/val:write_cache" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> write_cache : <a href="index.html#/modtype:S/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../git.1.4.3/_build/lib/SHA/">SHA</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit">Commit</a>.<a href="../../../../git.1.4.3/_build/lib/SHA/#/module:Commit/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> unit <a href="../../../../lwt.2.4.6/_build/src/core/lwt/">Lwt</a>.<a href="../../../../lwt.2.4.6/_build/src/core/lwt/#/type:t">t</a>
    
      <div class="doc">
        
      <p>Update the cache of files for the given revision. XXX: need a
merge stategy.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:kind">
  <a href="index.html#/modtype:S/val:kind" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> kind : [ <div class="cons">| `Memory</div><div class="cons">| `Disk</div> ]
    
      <div class="doc">
        
      <p>The kind of backend.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
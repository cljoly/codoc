<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Logger</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Logger</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Log module</p>
      
      <p>1. Provide functions to log arbitrary messages, filtered according to a
section and a verbosity level.</p>
      
      <p>2. Allow to setup destinations for these log messages.</p>
      
      <p>MERLIN_LOG environment variable and -debug commandline flag are used to
determine destinations.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        
      <p>Verbosity *</p>
      
        
      </div>
    
  <div class="region" id="/type:level">
  <a href="index.html#/type:level" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> level = [ <div class="cons">| `error</div><div class="cons">| `info</div><div class="cons">| `debug</div> ]
    
  </div>
  
  </div>
  
      <div class="doc">
        
      <p>Module sections, to group messages along functional lines.</p>
      
        
      </div>
    
  <div class="region" id="/module:Section">
  <a href="index.html#/module:Section" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Section : <span class="keyword">sig</span></div>
      
      
    <div class="sig">
  <div class="region" id="/module:Section/type:t">
  <a href="index.html#/module:Section/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Section/val:of_string">
  <a href="index.html#/module:Section/val:of_string" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_string : string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Section/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Section/val:to_string">
  <a href="index.html#/module:Section/val:to_string" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> to_string : <a href="index.html#/module:Section/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> string
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Section/val:enabled">
  <a href="index.html#/module:Section/val:enabled" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> enabled : <a href="index.html#/type:level">level</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Section/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> bool
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Section/val:general">
  <a href="index.html#/module:Section/val:general" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> general : <a href="index.html#/module:Section/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Section/val:project_load">
  <a href="index.html#/module:Section/val:project_load" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> project_load : <a href="index.html#/module:Section/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Section/val:list">
  <a href="index.html#/module:Section/val:list" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> list : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/module:Section/type:t">t</a> list
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:section">
  <a href="index.html#/type:section" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> section = <a href="index.html#/module:Section">Section</a>.<a href="index.html#/module:Section/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:section">
  <a href="index.html#/val:section" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> section : string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:section">section</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:general">
  <a href="index.html#/val:general" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> general : <a href="index.html#/type:section">section</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:set_default_destination">
  <a href="index.html#/val:set_default_destination" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set_default_destination : string <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:monitor">
  <a href="index.html#/val:monitor" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> monitor : ?dest:string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:level">level</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>monitor ?dest section</code> starts the monitoring of <code>section</code>.
If <code>dest</code> is set then all subsequent logging related to <code>section</code> will go in
that file, in the default destination otherwise.</p>
      
      <p>If <code>dest</code> is omitted and the default destination is not set,
<code>Invalid_argument</code> is raised.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:is_monitored">
  <a href="index.html#/val:is_monitored" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> is_monitored : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> bool
    
  </div>
  
  </div>
  
  <div class="region" id="/val:forget">
  <a href="index.html#/val:forget" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> forget : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>forget section</code> stops the monitoring of <code>section</code></p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:log">
  <a href="index.html#/val:log" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> log : <a href="index.html#/type:level">level</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:logf">
  <a href="index.html#/val:logf" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> logf : <a href="index.html#/type:level">level</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> (<a href="../../../../extlib.1.6.1/std/">Std</a>.Format.formatter <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:logj">
  <a href="index.html#/val:logj" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> logj : <a href="index.html#/type:level">level</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> <a href="../../../../extlib.1.6.1/std/">Std</a>.json <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:logjf">
  <a href="index.html#/val:logjf" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> logjf : <a href="index.html#/type:level">level</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="../../../../extlib.1.6.1/std/">Std</a>.json) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:error">
  <a href="index.html#/val:error" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> error : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:errorf">
  <a href="index.html#/val:errorf" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> errorf : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> (<a href="../../../../extlib.1.6.1/std/">Std</a>.Format.formatter <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:errorj">
  <a href="index.html#/val:errorj" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> errorj : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> <a href="../../../../extlib.1.6.1/std/">Std</a>.json <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:errorjf">
  <a href="index.html#/val:errorjf" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> errorjf : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="../../../../extlib.1.6.1/std/">Std</a>.json) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>error section msg</code> behaves as <code>log</code> if <code>section</code> is being monitored, but
prints to the default_destination (if it is set) otherwise.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:info">
  <a href="index.html#/val:info" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> info : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:infof">
  <a href="index.html#/val:infof" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> infof : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> (<a href="../../../../extlib.1.6.1/std/">Std</a>.Format.formatter <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:infoj">
  <a href="index.html#/val:infoj" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> infoj : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> <a href="../../../../extlib.1.6.1/std/">Std</a>.json <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:infojf">
  <a href="index.html#/val:infojf" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> infojf : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="../../../../extlib.1.6.1/std/">Std</a>.json) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>info section msg</code> will output <code>msg</code> on the channel dedicated to <code>section</code>,
if it is being monitored.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:debug">
  <a href="index.html#/val:debug" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> debug : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:debugf">
  <a href="index.html#/val:debugf" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> debugf : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> (<a href="../../../../extlib.1.6.1/std/">Std</a>.Format.formatter <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:debugj">
  <a href="index.html#/val:debugj" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> debugj : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> <a href="../../../../extlib.1.6.1/std/">Std</a>.json <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:debugjf">
  <a href="index.html#/val:debugjf" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> debugjf : <a href="index.html#/type:section">section</a> <span class="rarr"><span>-&gt;</span></span> ?title:string <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> <a href="../../../../extlib.1.6.1/std/">Std</a>.json) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Use <code>debug section msg</code> for mostly unimportant messages, those will be
displayed only if verbose.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:shutdown">
  <a href="index.html#/val:shutdown" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> shutdown : unit <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Closes all the open channels, unsets the default destination and stops all
monitoring.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../../codoc.css"/>
    <title>Cmt_format</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Cmt_format</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>cmt and cmti files format.</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        
      <p>The layout of a cmt file is as follows:
&lt;cmt&gt; := {&lt;cmi&gt;} &lt;cmt magic&gt; {cmt infos} {&lt;source info&gt;}
where &lt;cmi&gt; is the cmi file format:
&lt;cmi&gt; := &lt;cmi magic&gt; &lt;cmi info&gt;.
More precisely, the optional &lt;cmi&gt; part must be present if and only if
the file is:</p>
      <ul><li>a cmti, or</li><li>a cmt, for a ml file which has no corresponding mli (hence no
corresponding cmti).</li></ul>
      <p>Thus, we provide a common reading function for cmi and cmt(i)
files which returns an option for each of the three parts: cmi
info, cmt info, source info.</p>
      
        
      </div>
    
  <div class="region" id="/type:binary_annots">
  <a href="index.html#/type:binary_annots" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> binary_annots = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:binary_annots/cons:Packed">
  <a href="index.html#/type:binary_annots/cons:Packed" class="anchor">#</a>
  | Packed <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/types/">Types</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/types/#/type:signature">signature</a> * string list
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_annots/cons:Implementation">
  <a href="index.html#/type:binary_annots/cons:Implementation" class="anchor">#</a>
  | Implementation <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:structure">structure</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_annots/cons:Interface">
  <a href="index.html#/type:binary_annots/cons:Interface" class="anchor">#</a>
  | Interface <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:signature">signature</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_annots/cons:Partial_implementation">
  <a href="index.html#/type:binary_annots/cons:Partial_implementation" class="anchor">#</a>
  | Partial_implementation <span class="keyword">of</span> <a href="index.html#/type:binary_part">binary_part</a> array
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_annots/cons:Partial_interface">
  <a href="index.html#/type:binary_annots/cons:Partial_interface" class="anchor">#</a>
  | Partial_interface <span class="keyword">of</span> <a href="index.html#/type:binary_part">binary_part</a> array
  </div>
  </td><td></td><td></td><td></td></tr>
    </table>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:binary_part">
  <a href="index.html#/type:binary_part" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> binary_part = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:binary_part/cons:Partial_structure">
  <a href="index.html#/type:binary_part/cons:Partial_structure" class="anchor">#</a>
  | Partial_structure <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:structure">structure</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_part/cons:Partial_structure_item">
  <a href="index.html#/type:binary_part/cons:Partial_structure_item" class="anchor">#</a>
  | Partial_structure_item <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:structure_item">structure_item</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_part/cons:Partial_expression">
  <a href="index.html#/type:binary_part/cons:Partial_expression" class="anchor">#</a>
  | Partial_expression <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:expression">expression</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_part/cons:Partial_pattern">
  <a href="index.html#/type:binary_part/cons:Partial_pattern" class="anchor">#</a>
  | Partial_pattern <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:pattern">pattern</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_part/cons:Partial_class_expr">
  <a href="index.html#/type:binary_part/cons:Partial_class_expr" class="anchor">#</a>
  | Partial_class_expr <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:class_expr">class_expr</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_part/cons:Partial_signature">
  <a href="index.html#/type:binary_part/cons:Partial_signature" class="anchor">#</a>
  | Partial_signature <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:signature">signature</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_part/cons:Partial_signature_item">
  <a href="index.html#/type:binary_part/cons:Partial_signature_item" class="anchor">#</a>
  | Partial_signature_item <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:signature_item">signature_item</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:binary_part/cons:Partial_module_type">
  <a href="index.html#/type:binary_part/cons:Partial_module_type" class="anchor">#</a>
  | Partial_module_type <span class="keyword">of</span> <a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/">Typedtree</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/typedtree/#/type:module_type">module_type</a>
  </div>
  </td><td></td><td></td><td></td></tr>
    </table>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:cmt_infos">
  <a href="index.html#/type:cmt_infos" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> cmt_infos = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_modname">
  <a href="index.html#/type:cmt_infos/field:cmt_modname" class="anchor">#</a>
  cmt_modname
  </div>
  </td><td>: string</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_annots">
  <a href="index.html#/type:cmt_infos/field:cmt_annots" class="anchor">#</a>
  cmt_annots
  </div>
  </td><td>: <a href="index.html#/type:binary_annots">binary_annots</a></td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_value_dependencies">
  <a href="index.html#/type:cmt_infos/field:cmt_value_dependencies" class="anchor">#</a>
  cmt_value_dependencies
  </div>
  </td><td>: (<a href="../../../../../ocaml.4.02.1+doc/typing/types/">Types</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/types/#/type:value_description">value_description</a> * <a href="../../../../../ocaml.4.02.1+doc/typing/types/">Types</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/types/#/type:value_description">value_description</a>) list</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_comments">
  <a href="index.html#/type:cmt_infos/field:cmt_comments" class="anchor">#</a>
  cmt_comments
  </div>
  </td><td>: (string * <a href="../../../../../ocaml.4.02.1+doc/parsing/location/">Location</a>.<a href="../../../../../ocaml.4.02.1+doc/parsing/location/#/type:t">t</a>) list</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_args">
  <a href="index.html#/type:cmt_infos/field:cmt_args" class="anchor">#</a>
  cmt_args
  </div>
  </td><td>: string array</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_sourcefile">
  <a href="index.html#/type:cmt_infos/field:cmt_sourcefile" class="anchor">#</a>
  cmt_sourcefile
  </div>
  </td><td>: string option</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_builddir">
  <a href="index.html#/type:cmt_infos/field:cmt_builddir" class="anchor">#</a>
  cmt_builddir
  </div>
  </td><td>: string</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_loadpath">
  <a href="index.html#/type:cmt_infos/field:cmt_loadpath" class="anchor">#</a>
  cmt_loadpath
  </div>
  </td><td>: string list</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_source_digest">
  <a href="index.html#/type:cmt_infos/field:cmt_source_digest" class="anchor">#</a>
  cmt_source_digest
  </div>
  </td><td>: string option</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_initial_env">
  <a href="index.html#/type:cmt_infos/field:cmt_initial_env" class="anchor">#</a>
  cmt_initial_env
  </div>
  </td><td>: <a href="../../../../../0install.2.8/ocaml/_build/zeroinstall/env/">Env</a>.<a href="../../../../../0install.2.8/ocaml/_build/zeroinstall/env/#/type:t">t</a></td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_imports">
  <a href="index.html#/type:cmt_infos/field:cmt_imports" class="anchor">#</a>
  cmt_imports
  </div>
  </td><td>: (string * <a href="../../../../../ocaml.4.02.1+doc/stdlib/digest/">Digest</a>.<a href="../../../../../ocaml.4.02.1+doc/stdlib/digest/#/type:t">t</a> option) list</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_interface_digest">
  <a href="index.html#/type:cmt_infos/field:cmt_interface_digest" class="anchor">#</a>
  cmt_interface_digest
  </div>
  </td><td>: <a href="../../../../../ocaml.4.02.1+doc/stdlib/digest/">Digest</a>.<a href="../../../../../ocaml.4.02.1+doc/stdlib/digest/#/type:t">t</a> option</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:cmt_infos/field:cmt_use_summaries">
  <a href="index.html#/type:cmt_infos/field:cmt_use_summaries" class="anchor">#</a>
  cmt_use_summaries
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr>
    </table>}
    
  </div>
  
  </div>
  
  <div class="region" id="/type:error">
  <a href="index.html#/type:error" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> error = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:error/cons:Not_a_typedtree">
  <a href="index.html#/type:error/cons:Not_a_typedtree" class="anchor">#</a>
  | Not_a_typedtree <span class="keyword">of</span> string
  </div>
  </td><td></td><td></td><td></td></tr>
    </table>
    
  </div>
  
  </div>
  
  <div class="region" id="/exn:Error">
  <a href="index.html#/exn:Error" class="anchor">#</a>
  
  <div class="exn">
    <span class="keyword">exception</span> Error <span class="keyword">of</span> <a href="index.html#/type:error">error</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:read">
  <a href="index.html#/val:read" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read : string <span class="rarr"><span>-&gt;</span></span> <a href="../../../../../merlin.2.1.1/src/ocaml/typing/cmi_format/">Cmi_format</a>.<a href="../../../../../merlin.2.1.1/src/ocaml/typing/cmi_format/#/type:cmi_infos">cmi_infos</a> option * <a href="index.html#/type:cmt_infos">cmt_infos</a> option
    
      <div class="doc">
        
      <p><code>read filename</code> opens filename, and extract both the cmi_infos, if
it exists, and the cmt_infos, if it exists. Thus, it can be used
with .cmi, .cmt and .cmti files.</p>
      
      <p>.cmti files always contain a cmi_infos at the beginning. .cmt files
only contain a cmi_infos at the beginning if there is no associated
.cmti file.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:read_cmt">
  <a href="index.html#/val:read_cmt" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_cmt : string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:cmt_infos">cmt_infos</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:read_cmi">
  <a href="index.html#/val:read_cmi" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_cmi : string <span class="rarr"><span>-&gt;</span></span> <a href="../../../../../merlin.2.1.1/src/ocaml/typing/cmi_format/">Cmi_format</a>.<a href="../../../../../merlin.2.1.1/src/ocaml/typing/cmi_format/#/type:cmi_infos">cmi_infos</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:save_cmt">
  <a href="index.html#/val:save_cmt" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> save_cmt : string <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:binary_annots">binary_annots</a> <span class="rarr"><span>-&gt;</span></span> string option <span class="rarr"><span>-&gt;</span></span> <a href="../../../../../0install.2.8/ocaml/_build/zeroinstall/env/">Env</a>.<a href="../../../../../0install.2.8/ocaml/_build/zeroinstall/env/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../../ocaml.4.02.1+doc/typing/types/">Types</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/types/#/type:signature">signature</a> option <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>save_cmt modname filename binary_annots sourcefile initial_env sg</code>
writes a cmt(i) file.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:read_magic_number">
  <a href="index.html#/val:read_magic_number" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_magic_number : <a href="../../../../../ocaml.4.02.1+doc/stdlib/pervasives/">Pervasives</a>.<a href="../../../../../ocaml.4.02.1+doc/stdlib/pervasives/#/type:in_channel">in_channel</a> <span class="rarr"><span>-&gt;</span></span> string
    
  </div>
  
  </div>
  
  <div class="region" id="/val:clear">
  <a href="index.html#/val:clear" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clear : unit <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:add_saved_type">
  <a href="index.html#/val:add_saved_type" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> add_saved_type : <a href="index.html#/type:binary_part">binary_part</a> <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_saved_types">
  <a href="index.html#/val:get_saved_types" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_saved_types : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:binary_part">binary_part</a> list
    
  </div>
  
  </div>
  
  <div class="region" id="/val:set_saved_types">
  <a href="index.html#/val:set_saved_types" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set_saved_types : <a href="index.html#/type:binary_part">binary_part</a> list <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/val:record_value_dependency">
  <a href="index.html#/val:record_value_dependency" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> record_value_dependency : <a href="../../../../../ocaml.4.02.1+doc/typing/types/">Types</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/types/#/type:value_description">value_description</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../../ocaml.4.02.1+doc/typing/types/">Types</a>.<a href="../../../../../ocaml.4.02.1+doc/typing/types/#/type:value_description">value_description</a> <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
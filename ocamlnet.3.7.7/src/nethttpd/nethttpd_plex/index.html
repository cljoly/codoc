<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Nethttpd_plex</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Nethttpd_plex</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Netplex support</h1>
    </div>
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        
      <p>The important function is <code>nethttpd_factory</code>, see below. The
other functions are only needed for special effects.</p>
      
      <p>An example is explained here: [root:Netplex_intro].webserver</p>
      
        
      </div>
    
  <div class="region" id="/type:config_log_error">
  <a href="index.html#/type:config_log_error" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> config_log_error = <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/">Nethttpd_types</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/#/classtype:request_info">request_info</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/type:config_log_access">
  <a href="index.html#/type:config_log_access" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> config_log_access = <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/">Nethttpd_types</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/#/classtype:full_info">full_info</a> <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/type:config_error_response">
  <a href="index.html#/type:config_error_response" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> config_error_response = <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/">Nethttpd_types</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/#/classtype:error_response_params">error_response_params</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Three type abbreviations for logging functions</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:std_log_error">
  <a href="index.html#/val:std_log_error" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> std_log_error : <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:container">container</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:config_log_error">config_log_error</a>
    
      <div class="doc">
        
      <p>Returns a function that logs errors using the <code>log_subch</code> method of
the passed container</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:std_log_access">
  <a href="index.html#/val:std_log_access" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> std_log_access : ?debug:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:container">container</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:config_log_access">config_log_access</a>
    
      <div class="doc">
        
      <p>Returns a function that logs accesses using the <code>log_subch</code> method of
the passed container</p>
      
      <p>If <code>debug</code> is set, additional debug log messages are printed that
dump the whole access (incl. header and all available information)</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:std_error_response">
  <a href="index.html#/val:std_error_response" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> std_error_response : <a href="index.html#/type:config_error_response">config_error_response</a>
    
      <div class="doc">
        
      <p>A sample error response function</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:restrict_file_service_config">
  <a href="index.html#/val:restrict_file_service_config" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> restrict_file_service_config : <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:config_file">config_file</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/type:address">address</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Restricts the subsections and paremeters in the <code>service</code>
configuration section of type &quot;file&quot; to the allowed ones.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:read_file_service_config">
  <a href="index.html#/val:read_file_service_config" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_file_service_config : <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:config_file">config_file</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/type:address">address</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/">Nethttpd_services</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/#/type:file_service">file_service</a>
    
      <div class="doc">
        
      <p><code>read_file_service_config cfg addr uri_path</code>: Reads the
<code>service</code> configuration section of type &quot;file&quot; from config file
<code>cfg</code> at address <code>addr</code>. <code>uri_path</code> is the default value put
into the <code>file_uri</code> component of the returned record if no &quot;uri&quot;
configuration parameter exists. (In other words, this is the
path of the enclosing &quot;uri&quot; section, or &quot;/&quot; if there is only
a &quot;host&quot; section.) All other parameters are only
taken from the configuration section.</p>
      
      <p>See below at <code>nethttpd_factory</code> how a file service needs to
be configured.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:restrict_dynamic_service_config">
  <a href="index.html#/val:restrict_dynamic_service_config" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> restrict_dynamic_service_config : <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:config_file">config_file</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/type:address">address</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Restricts the subsections and paremeters in the <code>service</code>
configuration section of type &quot;dynamic&quot; to the allowed ones.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:read_dynamic_service_config">
  <a href="index.html#/val:read_dynamic_service_config" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_dynamic_service_config : (string * (<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:config_file">config_file</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/type:address">address</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/">Nethttpd_services</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/#/type:dynamic_service">dynamic_service</a>)) list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:config_file">config_file</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/type:address">address</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/">Nethttpd_services</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/#/type:dynamic_service">dynamic_service</a>
    
      <div class="doc">
        
      <p><code>read_dynamic_service_config handlers cfg addr uri_path</code>:
Reads the <code>service</code> configuration section of type &quot;dynamic&quot; from config
file <code>cfg</code> at address <code>addr</code>. The alist <code>handlers</code> defines the
available handlers. Every handler <code>h</code> is called like
<code>h cfg addr uri_path</code>. <code>uri_path</code> is like in <code>read_file_service_config</code>,
i.e. the path of the enclosing &quot;uri&quot; section, or &quot;/&quot; by default.</p>
      
      <p>The <code>h</code> function has to return the dynamic service to use, which
is also returned by <code>read_dynamic_service_config</code>.</p>
      
      <p>See below at <code>nethttpd_factory</code> how a dynamic service needs to
be configured.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:encap">
  <a href="index.html#/type:encap" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> encap = [ <div class="cons">| `Reactor</div><div class="cons">| `Engine</div> ]
    
  </div>
  
  </div>
  
  <div class="region" id="/val:nethttpd_processor">
  <a href="index.html#/val:nethttpd_processor" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> nethttpd_processor : ?hooks:<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:processor_hooks">processor_hooks</a> <span class="rarr"><span>-&gt;</span></span> ?encap:<a href="index.html#/type:encap">encap</a> <span class="rarr"><span>-&gt;</span></span> (<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:container">container</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_reactor/">Nethttpd_reactor</a>.#http_reactor_config) <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/">Nethttpd_types</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/#/classtype:http_service">http_service</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:processor">processor</a>
    
      <div class="doc">
        
      <p><code>netplex_processor mk_config http_service</code>: Creates a Netplex processor
for Nethttpd.</p>
      
      <p><code>mk_config</code> determines the nethttpd config for a container.
This is especially useful for setting the logging functions.</p>
      
      <p>The resulting processor must be turned into a full Netplex service
by <code>Netplex_sockserv.create_socket_service</code> which can then be added
by calling the controller's method <code>add_service</code>.</p>
      
      <p><code>hooks</code>: One can pass a Netplex hook object to set the hooks of the
processor.</p>
      
      <p><code>encap</code>: Selects the encapsulation, <code>`Reactor</code> or <code>`Engine</code>.
The default is <code>`Reactor</code>. Each encapsulation has specific strengths
and weaknesses:</p>
      <ul><li><code>`Reactor</code> is simpler code. Also, the request and response bodies
need not to be buffered up, and are directly connected with the
underlying socket (low memory requirement). The disadvantage is
that a reactor processes TCP connections serially (important to know
when there is only a single Unix process)</li><li><code>`Engine</code>: The request body needs to be completely buffered up.
If pipelining is enabled, the response bodies are also buffered
(FIXME).
The advantage of this encapsulation is that the engine can
process multiple TCP connections simultaneously, even in a
single process/thread.</li></ul>
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:service_factory">
  <a href="index.html#/type:service_factory" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> ('a, 'b) service_factory = (string * 'a <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/">Nethttpd_services</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/#/type:dynamic_service">dynamic_service</a>) list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:config_file">config_file</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/type:address">address</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> 'b <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/">Nethttpd_types</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/#/classtype:http_service">http_service</a> <span class="keyword">constraint</span> 'b = [ <div class="cons">| `Dynamic_service <span class="keyword">of</span> 'a Nethttpd_services.dynamic_service</div><div class="cons">| `File_service <span class="keyword">of</span> Nethttpd_services.file_service</div> ]
    
      <div class="doc">
        
      <p>The service factory function is called when a <code>service</code> configuration
section of a certain type needs to be read. The function has args
<code>handlers</code>, <code>cfg</code>, <code>addr</code>, and <code>uri_path</code>. It needs to return the
<code>http_service</code>.</p>
      
      <p>Such a function is usually <code>read_file_service_config</code>, or
<code>read_dynamic_service_config</code>, or a derivative, whose return
value is turned into a <code>http_service</code>. This can be done with
<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/">Nethttpd_services</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/#/type:file_service">file_service</a> and
<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/">Nethttpd_services</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/#/type:dynamic_service">dynamic_service</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:default_services">
  <a href="index.html#/val:default_services" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> default_services : (string * ('a, 'b) <a href="index.html#/type:service_factory">service_factory</a>) list
    
      <div class="doc">
        
      <p>The default services</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:httpd_factory">
  <a href="index.html#/type:httpd_factory" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> httpd_factory = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/type:httpd_factory/field:httpd_factory">
  <a href="index.html#/type:httpd_factory/field:httpd_factory" class="anchor">#</a>
  httpd_factory
  </div>
  </td><td>: 'a . (<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:container">container</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_reactor/">Nethttpd_reactor</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_reactor/#/classtype:http_reactor_config">http_reactor_config</a>) <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/">Nethttpd_types</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_types/#/classtype:http_service">http_service</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:processor">processor</a></td><td>;</td><td></td><td></td><td></td>
  </tr>
    </table>}
    
      <div class="doc">
        
      <p>The type of the <code>nethttpd_processor</code> function</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:nethttpd_factory">
  <a href="index.html#/val:nethttpd_factory" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> nethttpd_factory : ?name:string <span class="rarr"><span>-&gt;</span></span> ?hooks:<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:processor_hooks">processor_hooks</a> <span class="rarr"><span>-&gt;</span></span> ?encap:<a href="index.html#/type:encap">encap</a> <span class="rarr"><span>-&gt;</span></span> ?config_cgi:<a href="../../../../ocamlnet.3.7.7/src/netcgi2/netcgi/">Netcgi</a>.<a href="../../../../ocamlnet.3.7.7/src/netcgi2/netcgi/#/type:config">config</a> <span class="rarr"><span>-&gt;</span></span> ?handlers:(string * 'a <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/">Nethttpd_services</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_services/#/type:dynamic_service">dynamic_service</a>) list <span class="rarr"><span>-&gt;</span></span> ?services:(string * ('a, 'b) <a href="index.html#/type:service_factory">service_factory</a>) list <span class="rarr"><span>-&gt;</span></span> ?log_error:(<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:container">container</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:config_log_error">config_log_error</a>) <span class="rarr"><span>-&gt;</span></span> ?log_access:(?debug:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:container">container</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:config_log_access">config_log_access</a>) <span class="rarr"><span>-&gt;</span></span> ?error_response:<a href="index.html#/type:config_error_response">config_error_response</a> <span class="rarr"><span>-&gt;</span></span> ?processor_factory:<a href="index.html#/type:httpd_factory">httpd_factory</a> <span class="rarr"><span>-&gt;</span></span> unit <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/">Netplex_types</a>.<a href="../../../../ocamlnet.3.7.7/src/netplex/netplex_types/#/classtype:processor_factory">processor_factory</a>
    
      <div class="doc">
        
      <p>Factory for a web server component.</p>
      
      <p><b>Configuration file.</b> Reads a configuration section like
</p>
      <pre><code>         processor {
           type = &quot;nethttpd&quot;;          (* or what is passed as &quot;name&quot; arg *)
           timeout = 300.0;
           timeout_next_request = 15.0;
           access_log = &quot;enabled&quot;;
           suppress_broken_pipe = true;
           host {
             pref_name = &quot;myhost&quot;;     (* optional *)
             pref_port = 80;           (* optional *)
             names = &quot;myhost:80 yourhost:81&quot;;  (* use *:0 for any name *)
             uri {
               path = &quot;/the/path&quot;;
               method {
                 allow = &quot;GET POST&quot;;
                 (* or: deny = &quot;...&quot; *)
                 service {
                   type = &quot;...&quot;;
                   ...
                 }
               }
             }
             uri {
               ...
             }
           }
           host {
             ...
           }
         }</code></pre>
      <p>The <code>access_log</code> parameter can be set to <code>off</code>, <code>enabled</code>, or <code>debug</code>.
The default is <code>off</code>. Access messages go to the &quot;access&quot; subchannel
of the component logger. If <code>enabled</code>, one line is printed with the
most important data. If <code>debug</code> is set, all access data are printed.</p>
      
      <p>If <code>suppress_broken_pipe</code> the error &quot;Broken pipe&quot; is not logged
in the error log. This error occurs frequently, and may be regarded
as a normal condition.</p>
      
      <p>The sections <code>host</code>, <code>uri</code> and <code>method</code> can be nested to any depth.
However, on every nesting level only one of these section types must be
used. For example, if a <code>host</code> section already contains <code>uri</code>
subsections, it is not allowed to add <code>method</code> subsections.
Furthermore, the outermost section must be <code>host</code>.</p>
      
      <p>The <code>service</code> section may be one of (at least if the <code>services</code>
parameter is not overridden):</p>
      <pre><code>         service {
           type = &quot;file&quot;;
           docroot = &quot;/a/path/in/the/filesystem&quot;;
           uri = &quot;/the/uri/prefix/corresponding/to/docroot&quot;;
           media_types_file = &quot;/etc/mime.types&quot;;
           media_type {
             type = &quot;application/foo&quot;;
             suffix = &quot;foo&quot;
           }
           default_media_type = &quot;text/plain&quot;;
           enable_gzip = true;   (* see doc in nethttpd_services.mli *)
           index_files = &quot;index.html&quot;;
           enable_listings = true;
           hide_from_listings = &quot;README&quot;;   (* list of PCRE regexps *)
         }</code></pre>
      <p>Note that <code>uri</code> is taken from the surrounding <code>uri</code> section (or
assumed to be &quot;/&quot; if there is none) if omitted.</p>
      <pre><code>         service {
           type = &quot;dynamic&quot;;
           handler = &quot;name_of_handler&quot;;
         }</code></pre>
      <p>Binds the passed handler here.</p>
      
      <p>Any of <code>host</code>, <code>uri</code>, and <code>method</code> sections may contain one or several
<code>access</code> sections (which are AND-connected):</p>
      <pre><code>         access {
           type = &quot;host&quot;;
           allow = &quot;host1 host2 ...&quot;;
           (* or deny = &quot;host1 host2 ...&quot;; *)
         }</code></pre>
      <p>Other access control methods are not yet available.</p>
      
      <p>The <code>services</code> optional argument can be used to change the service
types understood. If not passed, it defaults to <code>default_services</code>.
The default includes &quot;file&quot; and &quot;dynamic&quot;.</p>
      
      <p><b>Arguments.</b></p>
      <ul><li><code>name</code>: The processor name. Defaults to &quot;nethttpd&quot;. This name can
be referenced by the &quot;type&quot; parameters in the <code>processor</code> section
of the config file.</li><li><code>hooks</code>: One can pass a Netplex hook object to set the hooks of the
processor. (This argument is ignored if a <code>processor_factory</code> is
passed to this function.)</li><li><code>encap</code>: See <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/">Nethttpd_plex</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/#/val:nethttpd_processor">nethttpd_processor</a>. (This argument is
ignored if a <code>processor_factory</code> is
passed to this function.)</li><li><code>config_cgi</code>: The CGI configuration to use</li><li><code>handlers</code>: a list of handler function. These functions can be
referenced from a <code>service</code> section in the config file where
<code>type=&quot;dynamic&quot;</code> (see example above). Defaults to the empty list.</li><li><code>services</code>: A list of service handlers that can be used
by <code>service</code> sections in the config files. Defaults to
<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/">Nethttpd_plex</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/#/val:default_services">default_services</a> which defines &quot;file&quot; and &quot;dynamic&quot;.</li><li><code>log_error</code>: The error logger. Defaults to
<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/">Nethttpd_plex</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/#/val:std_log_error">std_log_error</a>.</li><li><code>log_access</code>: The access logger. Defaults to
<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/">Nethttpd_plex</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/#/val:std_log_access">std_log_access</a>.</li><li><code>error_response</code>: a handler which is invoked to generate error
responses. Defaults to <a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/">Nethttpd_plex</a>.<a href="../../../../ocamlnet.3.7.7/src/nethttpd/nethttpd_plex/#/val:std_error_response">std_error_response</a>.</li><li><code>processor_factory</code>: the function creating the processor.
Default is <code>nethttpd_processor</code>.</li></ul>
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
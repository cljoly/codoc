<?xml version="1.0" encoding="UTF-8"?>
<unit><root><base><html src="index.html"><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></html></base>Netstream</root><digest>0cb48bc6daf6d8a3d088ce0dfb4dcbbe</digest><import>Bigarray<digest>0643187a8b562858118690c393d01c2e</digest></import><import>Buffer<digest>a579f4a57e300ec755f84af883c1e51b</digest></import><import>CamlinternalFormatBasics<digest>ba1be62eb45abd435c75cb59cc46b922</digest></import><import>Complex<digest>d0dcc1da3c694cf9a7e924c7832d1528</digest></import><import>Format<digest>61d4350242b30078d3ad96c904c9f7a1</digest></import><import>Int32<digest>f43b8a2972804b40e28b661b6fdf157a</digest></import><import>Lexing<digest>1be6a5484fb3cfb69d2c981438a7be62</digest></import><import>Netbuffer<digest>5f4225f2baeef1584e246c6ce1d32119</digest></import><import>Netchannels<digest>4e22bd1ba0cae4bd9bd1b6e69fc16ade</digest></import><import>Netsys_mem<digest>f19ef786301a8cbcfbf1a4fffee992f8</digest></import><import>Netsys_types<digest>67b26630eaf4decaa483864d4d00a3a2</digest></import><import>Obj<digest>825c406ee2d12ed12fd12dc0e4de1d26</digest></import><import>Pervasives<digest>0d015a5a2136659b0de431be7f1545be</digest></import><import>Unix<digest>30a4cc8e5f4f902ea609c91caec48af7</digest></import><source><file>netstream.mli</file><dir>/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring</dir><digest>cf06efc162c340ed3d9c0a023109a591</digest></source><doc>A netstream is an input channel that is read block by block. The
fragment of the channel currently loaded into memory is called the
current window of the netstream. The window can be thought as
look-ahead buffer.<newline/><bold>Picture:</bold><newline/><precode>   0                pos_in        pos_in + window_length            EOF
   +------------------+-------------------+--------------------------+
                      ====================
                       The current window</precode><newline/>You can use a netstream like an <code>in_obj_channel</code>, and read characters
and strings from the stream. The bytes come first from the look-ahead
buffer, and if there are not enough bytes, they are loaded from the
underlying channel. After every read operation it is tried to enlarge
the window such that it contains at least one block.<newline/>If you want that the window becomes larger, you can call <code>want</code> (to
enlarge the window to a certain size) or <code>want_another_block</code> (to load
just another block from the underlying channel). Note that this affects only
the current window and not the future size of the window.<newline/>Note <code>Buffer_underrun</code>: netstreams can cope with underruns of underlying
channels. An underrun happens when it is not possible to ensure the
minimum window size. However, it is possible that the window size
sinks under the minimum, but the <code>Buffer_underrun</code> is deferred until the
next call of an input method. Furthermore, there is a problem in the <code>skip</code>
method which may only be partially executed, i.e. the method skips some
bytes and then raises <code>Buffer_underrun</code>.</doc><class_type><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type><doc>An <code>in_obj_stream</code> extends <code>in_obj_channel</code> by look-ahead methods</doc><signature><inherit><path><resolved><class_type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netstring/netchannels/index.xml"><cmti name="Netchannels" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netchannels.cmti" digest="4e22bd1ba0cae4bd9bd1b6e69fc16ade"/></xml></base>Netchannels</root></identifier>in_obj_channel</class_type></resolved></path></inherit><method><method><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type>block_size</method><doc>The block size of the stream</doc><path><resolved><identifier><type>int</type></identifier></resolved></path></method><method><method><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type>window</method><doc>The look-ahead window. The first byte of the window is the byte that
would be read next by <code>input_char</code>. The length of the window is returned
by the method <code>window_length</code>. This length may be smaller than the
current length of the netbuffer, i.e. the netbuffer may contain
additional data that must be ignored.</doc><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netstring/netbuffer/index.xml"><cmti name="Netbuffer" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netbuffer.cmti" digest="5f4225f2baeef1584e246c6ce1d32119"/></xml></base>Netbuffer</root></identifier>t</type></resolved></path></method><method><method><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type>want</method><doc>Increases the length of the window such that the length is at least
the passed number of bytes or that the window reaches EOF (whatever
happens first).</doc><arrow><path><resolved><identifier><type>int</type></identifier></resolved></path><path><resolved><identifier><type>unit</type></identifier></resolved></path></arrow></method><method><method><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type>want_another_block</method><doc>The same as: <code>want block_size</code></doc><arrow><path><resolved><identifier><type>unit</type></identifier></resolved></path><path><resolved><identifier><type>unit</type></identifier></resolved></path></arrow></method><method><method><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type>window_length</method><doc>Returns the length of the window</doc><path><resolved><identifier><type>int</type></identifier></resolved></path></method><method><method><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type>window_at_eof</method><doc>Whether the window is at eof</doc><path><resolved><identifier><type>bool</type></identifier></resolved></path></method><method><method><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type>skip</method><doc>Skip the n bytes of the stream. It is not an error to skip more bytes
than available in the remaining stream.</doc><arrow><path><resolved><identifier><type>int</type></identifier></resolved></path><path><resolved><identifier><type>unit</type></identifier></resolved></path></arrow></method></signature></class_type><class><class><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>input_stream</class><doc>Make an <code>in_obj_stream</code> on top of an <code>in_obj_channel</code>. The <code>block_size</code>
can be specified; it defaults to 4096.<newline/>If <code>len</code> is passed, this parameter limits the length of the channel:
Only the first <code>len</code> bytes are read from the input channel, then an EOF
is simulated even if the input channel is longer.</doc><arrow><optional>len</optional><path><resolved><identifier><type>option</type></identifier></resolved><path><resolved><identifier><type>int</type></identifier></resolved></path></path><arrow><optional>block_size</optional><path><resolved><identifier><type>option</type></identifier></resolved><path><resolved><identifier><type>int</type></identifier></resolved></path></path><arrow><path><resolved><class_type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netstring/netchannels/index.xml"><cmti name="Netchannels" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netchannels.cmti" digest="4e22bd1ba0cae4bd9bd1b6e69fc16ade"/></xml></base>Netchannels</root></identifier>in_obj_channel</class_type></resolved></path><path><resolved><identifier><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type></identifier></resolved></path></arrow></arrow></arrow></class><class><class><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>sub_stream</class><doc>A sub stream is the part of the whole stream from the current position
to an arbitrary other position that is determined by <code>len</code> and
<code>delimiter</code>. <code>len</code> specifies the maximum length of the sub stream.
<code>delimiter</code> is an arbitrary string that indicates the end of the
sub stream (the delimiter is not part of the sub stream; i.e. the
sub stream ends immediately before the delimiter).<newline/>While reading from the sub stream, not only the current position of
the sub stream moves, but also the current position of the main
stream. This means that it must be avoided to read data from the
main stream while the sub stream is in use. The typical pattern
is:<list><item>Read from the main stream until the beginning of a section is
recognized</item><item>Create a sub stream at this point</item><item>Read from the sub stream until EOF</item><item>Continue reading the main stream. The next character of the main
stream is exactly the character following the EOF of the sub stream</item></list></doc><arrow><optional>len</optional><path><resolved><identifier><type>option</type></identifier></resolved><path><resolved><identifier><type>int</type></identifier></resolved></path></path><arrow><optional>delimiter</optional><path><resolved><identifier><type>option</type></identifier></resolved><path><resolved><identifier><type>string</type></identifier></resolved></path></path><arrow><path><resolved><identifier><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type></identifier></resolved></path><path><resolved><identifier><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type></identifier></resolved></path></arrow></arrow></arrow></class><value><value><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>print_in_obj_stream</value><doc>A top-loop printer for streams</doc><arrow><path><resolved><type><identifier><root><base><html src="../../../../ocaml.4.02.1+doc/stdlib/format/index.html"><xml src="../../../../ocaml.4.02.1+doc/stdlib/format/index.xml"><cmti name="Format" src="/home/dsheets/.opam/doc/build/ocaml/stdlib/format.cmti" digest="61d4350242b30078d3ad96c904c9f7a1"/></xml></html></base>Format</root></identifier>formatter</type></resolved></path><arrow><path><resolved><identifier><class_type><root><base><xml src="index.xml"><cmti name="Netstream" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netstring/netstream.cmti" digest="0cb48bc6daf6d8a3d088ce0dfb4dcbbe"/></xml></base>Netstream</root>in_obj_stream</class_type></identifier></resolved></path><path><resolved><identifier><type>unit</type></identifier></resolved></path></arrow></arrow></value></unit>
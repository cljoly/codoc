<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Netsys_win32</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Netsys_win32</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Primitives for Win32</p>
      
        
      </div>
    
      
    <div class="sig">
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Event objects</h1>
    </div>
        
      </div>
    
  <div class="region" id="/type:w32_event">
  <a href="index.html#/type:w32_event" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_event
    
  </div>
  
  </div>
  
  <div class="region" id="/val:create_event">
  <a href="index.html#/val:create_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create_event : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a>
    
      <div class="doc">
        
      <p>Create an event object</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:set_event">
  <a href="index.html#/val:set_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set_event : <a href="index.html#/type:w32_event">w32_event</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Set the object to &quot;signaled&quot; state</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:reset_event">
  <a href="index.html#/val:reset_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> reset_event : <a href="index.html#/type:w32_event">w32_event</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Set the object to &quot;non-signaled&quot; state</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:test_event">
  <a href="index.html#/val:test_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> test_event : <a href="index.html#/type:w32_event">w32_event</a> <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>Test whether the object is in signaled state</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:event_wait">
  <a href="index.html#/val:event_wait" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> event_wait : <a href="index.html#/type:w32_event">w32_event</a> <span class="rarr"><span>-&gt;</span></span> float <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>Wait until the event is set to signaled state. The float argument
is the timeout in seconds. The function returns whether the object
is in signaled state.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:event_descr">
  <a href="index.html#/val:event_descr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> event_descr : <a href="index.html#/type:w32_event">w32_event</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
    
      <div class="doc">
        
      <p>Returns the proxy descriptor for the event. See <code>lookup</code> below for
more on proxy descriptors. This function always returns the same
descriptor. The user has to close this descriptor if this function
is called.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Primitives for sockets</h1>
    </div>
        
      </div>
    
  <div class="region" id="/val:wsa_event_select">
  <a href="index.html#/val:wsa_event_select" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> wsa_event_select : <a href="index.html#/type:w32_event">w32_event</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netsys/netsys_posix/">Netsys_posix</a>.<a href="../../../../ocamlnet.3.7.7/src/netsys/netsys_posix/#/type:poll_req_events">poll_req_events</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>associate event objects with socket conditions</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:wsa_maximum_wait_events">
  <a href="index.html#/val:wsa_maximum_wait_events" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> wsa_maximum_wait_events : unit <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p>max size of the array passed to <code>wsa_wait_for_multiple_events</code></p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:wsa_wait_for_multiple_events">
  <a href="index.html#/val:wsa_wait_for_multiple_events" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> wsa_wait_for_multiple_events : <a href="index.html#/type:w32_event">w32_event</a> array <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int option
    
      <div class="doc">
        
      <p>Waits until one of the events in the array is in signaled state,
or until a timeout happens. The int is the timeout in milliseconds.
A negative timeout means infinity.</p>
      
      <p>The function returns the first index in the array that is signaled.</p>
      
      <p>On timeout, <code>None</code> is returned.</p>
      
      <p>The return value <code>WSA_WAIT_IO_COMPLETION</code> is mapped to the
Unix error <code>EINTR</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:wsa_enum_network_events">
  <a href="index.html#/val:wsa_enum_network_events" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> wsa_enum_network_events : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocamlnet.3.7.7/src/netsys/netsys_posix/">Netsys_posix</a>.<a href="../../../../ocamlnet.3.7.7/src/netsys/netsys_posix/#/type:poll_act_events">poll_act_events</a>
    
      <div class="doc">
        
      <p>Checks whether an event has been recorded</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:real_select">
  <a href="index.html#/val:real_select" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> real_select : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> list <span class="rarr"><span>-&gt;</span></span> float <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> list * <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> list * <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> list
    
      <div class="doc">
        
      <p>Up to Ocaml 3.10, this function is identical to <code>Unix.select</code>. In
3.11, the latter was changed to a smart implementation that promises
to handle other types of handles in addition to sockets. As we do
the same in <code>Netsys</code>, this would be a duplication of work. Also,
the older implementation is more mature.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Support for named pipes</h1>
    </div>
        
      </div>
    
      <div class="doc">
        
      <p>Win32 named pipes work very much like Unix Domain sockets, only
that the Win32 interface is different. This wrapper, however,
mimicks socket behaviour as far as possible (and we also use
an socket-like API with <code>listen</code> and <code>accept</code>). There is a
<code>w32_pipe_server</code> representing pipe servers. An individual pipe
is wrapped into a <code>w32_pipe</code>.</p>
      
      <p>Win32 named pipes do not allow to check whether an operation would block
before starting the operation. There is so-called overlapped I/O,
but it works differently than Unix-style multiplexing.</p>
      
      <p>The following functions add a layer to the Win32 primitives that
helps using pipes in a way similar to multiplexing. We allocate
buffers for input and output, and the functions <code>pipe_read</code> and
<code>pipe_write</code> access these buffers in the first place. When reading,
but the read buffer is empty, we start an overlapped read operation
from the pipe handle. The arriving data refills the read buffer, and
a <code>w32_event</code> is signaled to wake up any pending event loop.
During the pending read from the pipe handle, the read buffer is
locked, and <code>pipe_read</code> will return <code>EWOULDBLOCK</code>.</p>
      
      <p>Writing is slightly more difficult. The first <code>pipe_write</code> puts
the data into the write buffer, and immediately starts an overlapped
I/O operation to write the data to the pipe handle. During this
operation the write buffer is locked, and cannot be further used
to accumulate data, even if there is space. So <code>pipe_write</code> will
return <code>EWOULDBLOCK</code> while the operation takes place. A <code>w32_event</code> is
signaled when the write operation is over.</p>
      
      <p>The only downside of this approach is that the caller has to use
<code>pipe_read</code> and <code>pipe_write</code> to access pipes, instead of
<code>Unix.read</code> and <code>Unix.write</code>. If generic r/w functions are
required that work for numerous kinds of descriptors, there are
<a href="../../../../ocamlnet.3.7.7/src/netsys/netsys/">Netsys</a>.<a href="../../../../ocamlnet.3.7.7/src/netsys/netsys/#/val:gread">gread</a> and <a href="../../../../ocamlnet.3.7.7/src/netsys/netsys/">Netsys</a>.<a href="../../../../ocamlnet.3.7.7/src/netsys/netsys/#/val:gwrite">gwrite</a> which support named
pipes.</p>
      
        
      </div>
    
  <div class="region" id="/type:w32_pipe_server">
  <a href="index.html#/type:w32_pipe_server" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_pipe_server
    
      <div class="doc">
        
      <p>A pipe server. Note that there is no such thing in the Win32 API.
Actually, a <code>w32_pipe_server</code> contains the server endpoints of
a number of pipes, and a few helper objects.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:w32_pipe">
  <a href="index.html#/type:w32_pipe" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_pipe
    
      <div class="doc">
        
      <p>A pipe endpoint</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:pipe_mode">
  <a href="index.html#/type:pipe_mode" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> pipe_mode = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:pipe_mode/cons:Pipe_in">
  <a href="index.html#/type:pipe_mode/cons:Pipe_in" class="anchor">#</a>
  | Pipe_in
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:pipe_mode/cons:Pipe_out">
  <a href="index.html#/type:pipe_mode/cons:Pipe_out" class="anchor">#</a>
  | Pipe_out
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:pipe_mode/cons:Pipe_duplex">
  <a href="index.html#/type:pipe_mode/cons:Pipe_duplex" class="anchor">#</a>
  | Pipe_duplex
  </div>
  </td><td></td><td></td><td></td></tr>
    </table>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:rev_mode">
  <a href="index.html#/val:rev_mode" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> rev_mode : <a href="index.html#/type:pipe_mode">pipe_mode</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:pipe_mode">pipe_mode</a>
    
      <div class="doc">
        
      <p>Reverses the direction</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:create_local_pipe_server">
  <a href="index.html#/val:create_local_pipe_server" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create_local_pipe_server : string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:pipe_mode">pipe_mode</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a>
    
  </div>
  
  </div>
  
      <div class="doc">
        
      <p><code>create_local_named_pipe name mode n</code>: Create a pipe server.
The <code>name</code> must have the format &quot;\\.\pipe\&lt;name&gt;&quot;.
In <code>n</code> the maximum number of instances is passed. The server is
set up with a security descriptor so only clients on the same system
can connect.</p>
      
        
      </div>
    
      <div class="doc">
        
      <p>In the following, a terminology has been chosen that is similar to
those of the socket API. The terms are different from those Microsoft
prefers, however.</p>
      
        
      </div>
    
  <div class="region" id="/val:pipe_listen">
  <a href="index.html#/val:pipe_listen" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_listen : <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Creates the backlog queue with <code>n</code> prepared server endpoints.</p>
      
      <p>One can check for new client connections by looking at the
<code>pipe_connect_event</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_accept">
  <a href="index.html#/val:pipe_accept" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_accept : <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_pipe">w32_pipe</a>
    
      <div class="doc">
        
      <p>Waits until the connect event is signaled (usually meaning that
a new client connection is available), and returns the new
pipe.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_connect">
  <a href="index.html#/val:pipe_connect" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_connect : string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:pipe_mode">pipe_mode</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_pipe">w32_pipe</a>
    
      <div class="doc">
        
      <p><code>pipe_connect name mode</code>: Creates a client pipe handle, and tries
to connect to the pipe server <code>name</code>. The function fails with the
Unix error <code>EAGAIN</code> if there are currently no listening instances of the
pipe at the server.</p>
      
      <p>The name must be of the form &quot;\\.\pipe\&lt;name&gt;&quot; (excluding connects
to pipes on remote systems). This function allows only connects to
local pipe servers, and enforces anonymous impersonation.</p>
      
      <p>Note that you also can connect to named pipes using <code>open_in</code> and
<code>Unix.openfile</code>, and that these functions do not protect against
malicious servers that impersonate as the caller.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_pair">
  <a href="index.html#/val:pipe_pair" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_pair : <a href="index.html#/type:pipe_mode">pipe_mode</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_pipe">w32_pipe</a> * <a href="index.html#/type:w32_pipe">w32_pipe</a>
    
      <div class="doc">
        
      <p>Returns a pair of connected pipes (using automatically generated
names). The left pipe is in the passed <code>pipe_mode</code>, and the
right pipe is in the matching complementaty mode.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_read">
  <a href="index.html#/val:pipe_read" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_read : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p><code>pipe_read p s pos len</code>: Tries to read data from the pipe. If data
is available, it is put into the <code>len</code> bytes at position <code>pos</code> of
the string <code>s</code>, and the actual number of read bytes is returned.</p>
      
      <p>If no data is available, the function fails with a Unix error of
<code>EAGAIN</code>.</p>
      
      <p>If the end of the pipe is reached, the function returns 0.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_write">
  <a href="index.html#/val:pipe_write" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_write : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p><code>pipe_write p s pos len</code>: Tries to write data to the pipe. If space
is available, the data is taken from the <code>len</code> bytes at position <code>pos</code> of
the string <code>s</code>, and the actual number of written bytes is returned.</p>
      
      <p>If no space is available, the function fails with a Unix error of
<code>EAGAIN</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_shutdown">
  <a href="index.html#/val:pipe_shutdown" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_shutdown : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Cancels all pending I/O operations and closes the pipe handle.</p>
      
      <p>Note that there is no way to close only one direction of bidirectional
pipes.</p>
      
      <p>See the comments on closing pipes below.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_shutdown_server">
  <a href="index.html#/val:pipe_shutdown_server" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_shutdown_server : <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Closes the pipe server: All endpoints in the backlog queue are
shutdown. Note that this can result in crashed connections -
if the kernel establishes a connection but it is not yet
<code>pipe_accept</code>ed, it is simply destroyed by this function.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_connect_event">
  <a href="index.html#/val:pipe_connect_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_connect_event : <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a>
    
      <div class="doc">
        
      <p>The event object signals when a new client connection is available</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_rd_event">
  <a href="index.html#/val:pipe_rd_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_rd_event : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_wr_event">
  <a href="index.html#/val:pipe_wr_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_wr_event : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a>
    
      <div class="doc">
        
      <p>The event objects signaling that read and write operations are possible.
The read event is in signaled state when the read buffer is non-empty
(even for write-only pipes). The write event is in signaled state when
the pipe is connected and the write buffer is empty (even for
read-only pipes).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_wait_connect">
  <a href="index.html#/val:pipe_wait_connect" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_wait_connect : <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a> <span class="rarr"><span>-&gt;</span></span> float <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>Wait until a client connects to this server. The float argument
is the timeout in seconds. The function returns whether there is
data to read or write. If not, a timeout has occurred.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_wait_rd">
  <a href="index.html#/val:pipe_wait_rd" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_wait_rd : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> float <span class="rarr"><span>-&gt;</span></span> bool
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_wait_wr">
  <a href="index.html#/val:pipe_wait_wr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_wait_wr : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> float <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>Wait until the pipe becomes readable or writable. The float argument
is the timeout in seconds. The function returns whether there is
data to read or write. If not, a timeout has occurred.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_server_descr">
  <a href="index.html#/val:pipe_server_descr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_server_descr : <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
    
      <div class="doc">
        
      <p>Returns the proxy descriptor for the pipe server. See <code>lookup</code> below for
more on proxy descriptors. This function always returns the same
descriptor. The user has to close this descriptor if this function
is called.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_descr">
  <a href="index.html#/val:pipe_descr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_descr : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
    
      <div class="doc">
        
      <p>Returns the proxy descriptor for the pipe. See <code>lookup</code> below for
more on proxy descriptors. This function always returns the same
descriptor. The user has to close this descriptor if this function
is called.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_name">
  <a href="index.html#/val:pipe_name" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_name : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> string
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_server_name">
  <a href="index.html#/val:pipe_server_name" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_server_name : <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Returns the name of the pipe</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_mode">
  <a href="index.html#/val:pipe_mode" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_mode : <a href="index.html#/type:w32_pipe">w32_pipe</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:pipe_mode">pipe_mode</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:pipe_server_mode">
  <a href="index.html#/val:pipe_server_mode" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> pipe_server_mode : <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:pipe_mode">pipe_mode</a>
    
      <div class="doc">
        
      <p>Returns the pipe/server mode</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:unpredictable_pipe_name">
  <a href="index.html#/val:unpredictable_pipe_name" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> unpredictable_pipe_name : unit <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Returns a valid pipe name that can practically not be predicted</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
      <p><b>Shutting down pipes.</b> The suggested model is that the client shuts
down the pipe first. A pipe client ensures that all data are transmitted
by waiting until the pipe becomes writable again, and then calling
<code>pipe_shutdown</code>. The server then sees EOF when reading from the pipe,
or gets an <code>EPIPE</code> error when writing to the pipe. The server should
then also <code>pipe_shutdown</code> the endpoint.</p>
      
      <p>When servers start the closure of connections, there is no clean way
of ensuring that all written data are transmitted. There is the
<code>FlushFileBuffers</code> Win32 function, but it is blocking.</p>
      
        
      </div>
    
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">I/O threads</h1>
    </div>
        
      </div>
    
      <div class="doc">
        
      <p>I/O threads can be used to do read/write-based I/O in an asynchronous
way for file handles that do not support asynchronous I/O by themselves,
e.g. anonymous pipes.</p>
      
      <p>I/O threads are only available if the application is compiled as
multi-threaded program.</p>
      
        
      </div>
    
  <div class="region" id="/type:w32_input_thread">
  <a href="index.html#/type:w32_input_thread" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_input_thread
    
  </div>
  
  </div>
  
  <div class="region" id="/val:create_input_thread">
  <a href="index.html#/val:create_input_thread" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create_input_thread : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_input_thread">w32_input_thread</a>
    
      <div class="doc">
        
      <p>Creates the input thread for this file descriptor. Data is being
pumped from this handle to an internal buffer, and can be read from
there by <code>input_thread_read</code>.</p>
      
      <p>The thread continues to run until EOF is reached, an I/O error
occurs, or until the
thread is cancelled (<code>cancel_input_thread</code>).</p>
      
      <p>After starting the input thread, the file descriptor must not
be used anymore. It is now owned by the input thread.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:input_thread_event">
  <a href="index.html#/val:input_thread_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> input_thread_event : <a href="index.html#/type:w32_input_thread">w32_input_thread</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a>
    
      <div class="doc">
        
      <p>This event is signaled when there is data to read, or the EOF
is reached, or there is an error condition</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:input_thread_read">
  <a href="index.html#/val:input_thread_read" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> input_thread_read : <a href="index.html#/type:w32_input_thread">w32_input_thread</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p><code>input_thread_read t s pos len</code>: Tries to read data from the buffer.
If data
is available, it is put into the <code>len</code> bytes at position <code>pos</code> of
the string <code>s</code>, and the actual number of read bytes is returned.</p>
      
      <p>If no data is available, the function fails with a Unix error of
<code>EAGAIN</code> (non-blocking).</p>
      
      <p>If the end of the data is reached, the function returns 0.</p>
      
      <p>For cancelled requests, the function raises <code>EPERM</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:cancel_input_thread">
  <a href="index.html#/val:cancel_input_thread" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> cancel_input_thread : <a href="index.html#/type:w32_input_thread">w32_input_thread</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Stops the input thread. No more data will be pumped from the handle
to the internal buffer. It is no error to cancel a thread that is
already cancelled. There is no way to restart the thread later.</p>
      
      <p>The thread is automatically cancelled by the GC finaliser. However,
users are encouraged to call <code>cancel_input_thread</code> as soon as
the thread is no longer needed, because a thread is an expensive
resource.</p>
      
      <p>Implementation note: Actually, cancellation is only fully implemented
on Windows Vista. On XP the actual cancellation may be delayed
indefinetely.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:input_thread_proxy_descr">
  <a href="index.html#/val:input_thread_proxy_descr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> input_thread_proxy_descr : <a href="index.html#/type:w32_input_thread">w32_input_thread</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
    
      <div class="doc">
        
      <p>Returns the proxy descriptor</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:w32_output_thread">
  <a href="index.html#/type:w32_output_thread" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_output_thread
    
  </div>
  
  </div>
  
  <div class="region" id="/val:create_output_thread">
  <a href="index.html#/val:create_output_thread" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create_output_thread : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_output_thread">w32_output_thread</a>
    
      <div class="doc">
        
      <p>Creates the output thread for this file descriptor. Data is being
pumped an internal buffer to this descriptor, and can be written
there by <code>output_thread_read</code>.</p>
      
      <p>The thread continues to run until it is explicitly closed, or
an I/O error occurs, or until the
thread is cancelled (<code>cancel_output_thread</code>).</p>
      
      <p>After starting the output thread, the file descriptor must not
be used anymore. It is now owned by the output thread.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:output_thread_event">
  <a href="index.html#/val:output_thread_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> output_thread_event : <a href="index.html#/type:w32_output_thread">w32_output_thread</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a>
    
      <div class="doc">
        
      <p>This event is signaled when there is space in the buffer,
or when there is an error condition</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:output_thread_write">
  <a href="index.html#/val:output_thread_write" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> output_thread_write : <a href="index.html#/type:w32_output_thread">w32_output_thread</a> <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p><code>output_thread_write t s pos len</code>: Tries to write data to the buffer.
If this
is possible, the substring starting at position <code>pos</code> of the string <code>s</code>
with a length of <code>len</code> is appended to the buffer. The actual number
of written bytes is returned.</p>
      
      <p>If no space is available in the buffer, the function fails with a
Unix error of <code>EAGAIN</code> (non-blocking).</p>
      
      <p>For cancelled requests, the function raises <code>EPERM</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:close_output_thread">
  <a href="index.html#/val:close_output_thread" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> close_output_thread : <a href="index.html#/type:w32_output_thread">w32_output_thread</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Adds the EOF condition to the buffer. When the buffer is written
to the descriptor, the descriptor will be closed.</p>
      
      <p>Note that this is also an asynchronous operation, like
<code>output_thread_write</code>. If closing is not possible at a certain
moment, the Unix error <code>EGAIN</code> is raised. This ensures that all
errors of previous writes can be reported.</p>
      
      <p>The output thread terminates after a successful close.</p>
      
      <p>For cancelled requests, the function raises <code>EPERM</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:cancel_output_thread">
  <a href="index.html#/val:cancel_output_thread" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> cancel_output_thread : <a href="index.html#/type:w32_output_thread">w32_output_thread</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Stops the output thread. This is different from closing as the
data that is still in the buffer but not yet written may be
dropped (if possible). Also, there is no error reporting.</p>
      
      <p>It is no error to cancel a thread that is
already cancelled or closed.
There is no way to restart the thread later.</p>
      
      <p>The thread is automatically cancelled by the GC finaliser. However,
users are encouraged to call <code>cancel_output_thread</code> or
<code>close_output_thread</code> as soon as
the thread is no longer needed, because a thread is an expensive
resource.</p>
      
      <p>Implementation note: Actually, cancellation is only fully implemented
on Windows Vista. On XP the actual cancellation may be delayed
indefinetely.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:output_thread_proxy_descr">
  <a href="index.html#/val:output_thread_proxy_descr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> output_thread_proxy_descr : <a href="index.html#/type:w32_output_thread">w32_output_thread</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
    
      <div class="doc">
        
      <p>Returns the proxy descriptor</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Processes</h1>
    </div>
        
      </div>
    
      <div class="doc">
        
      <p>Keep in mind that Win32 distinguishes between two kinds of
executables: console applications, and GUI applications. The kind
is set at link time, and stored in the executable file.
Years ago, these kinds meant different worlds,
and a GUI application could not act like a console application,
and vice versa. Nowaways, however, the distinction is mostly gone,
and the application kind only affects defaults at program startup:</p>
      <ul><li>Console: A GUI application starts without console. However, it is
possible to allocate a console later. A console application always
starts with a console which is created by the OS if missing.</li><li>Standard handles: For a GUI application, stdin/stdout/stderr are
initially set to the invalid file handle. Nevertheless, this
feature of standard handles exists, and one can set these handles
later. Also, the handles can be inherited by the parent process.
For console applications, the standard handles are normally set
to the console, and applications can redirect them.</li><li>Main program: Of course, there is also the difference which C
function is called at program startup - hey, but this is O'Caml!</li><li>Waiting for completion: It is uncommon to wait for the completion
of GUI applications. The command interpreter seems to implement
a magic so that it is not waited until the program is finished
when a GUI application is started. For console applications this
is of course done. (Note that this feature is the main reason
why programmers still have to link applications as console
applications, and cannot simply get the same effect from a
application that is linked as GUI and then opens a console.)</li></ul>
        
      </div>
    
  <div class="region" id="/type:create_process_option">
  <a href="index.html#/type:create_process_option" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> create_process_option = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_change_directory">
  <a href="index.html#/type:create_process_option/cons:CP_change_directory" class="anchor">#</a>
  | CP_change_directory <span class="keyword">of</span> string
  </div>
  </td><td>(*</td><td class="doc">The initial working directory is set to this path. By default
the new process starts with the current working directory of
the caller.</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_set_env">
  <a href="index.html#/type:create_process_option/cons:CP_set_env" class="anchor">#</a>
  | CP_set_env <span class="keyword">of</span> string
  </div>
  </td><td>(*</td><td class="doc">The process environment is set to this encoded array of environment
variables. By default the current environment is passed down
to the new process.<br/>The string is created from an array of &quot;name=value&quot; settings
by separating all elements by null bytes, and by putting two
null bytes at the end.</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_std_handles">
  <a href="index.html#/type:create_process_option/cons:CP_std_handles" class="anchor">#</a>
  | CP_std_handles <span class="keyword">of</span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> * <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> * <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
  </div>
  </td><td>(*</td><td class="doc">Sets the standard handles of the new console process.</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_create_console">
  <a href="index.html#/type:create_process_option/cons:CP_create_console" class="anchor">#</a>
  | CP_create_console
  </div>
  </td><td>(*</td><td class="doc">Creates a new console window. The standard handles of the new
process may also be modified - however, the exact effect is not
well documented by Microsoft. I have the impression that the logic
is this: handles pointing to the parent console are replaced by
handles pointing to the new console. Also, invalid handles
are replaced by handles of the new console. It does not matter how
the standard handles are passed down - either implicitly or by
<code>CP_std_handles</code>. So you cannot create a new console, and
keep standard handles that are connected to the old console.
Best practice is to avoid the combination of <code>CP_std_handles</code> and
<code>CP_create_console</code> when there is already a console.<br/>This flag does not have any effect when the started app is
a GUI app.</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_detach_from_console">
  <a href="index.html#/type:create_process_option/cons:CP_detach_from_console" class="anchor">#</a>
  | CP_detach_from_console
  </div>
  </td><td>(*</td><td class="doc">The new process detaches from the console at startup, even if it is
a console application. Unless <code>CP_std_handles</code> is specified,
the new process will initially not have standard handles (i.e.
the standard handles are invalid handles)!
GUI apps detach from the console anyway.</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_inherit_console">
  <a href="index.html#/type:create_process_option/cons:CP_inherit_console" class="anchor">#</a>
  | CP_inherit_console
  </div>
  </td><td>(*</td><td class="doc">The new console process inherits the console from the caller, if
present. Otherwise the new console process starts without console.
For GUI apps there is not any effect: They do not have a console
anyway.</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_inherit_or_create_console">
  <a href="index.html#/type:create_process_option/cons:CP_inherit_or_create_console" class="anchor">#</a>
  | CP_inherit_or_create_console
  </div>
  </td><td>(*</td><td class="doc">If present, the console is inherited from the caller. If not
present, a new console is created for console applications.
This mode is the default.</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_unicode_environment">
  <a href="index.html#/type:create_process_option/cons:CP_unicode_environment" class="anchor">#</a>
  | CP_unicode_environment
  </div>
  </td><td>(*</td><td class="doc">Indicates that the environment is a Unicode environment</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_ansi_environment">
  <a href="index.html#/type:create_process_option/cons:CP_ansi_environment" class="anchor">#</a>
  | CP_ansi_environment
  </div>
  </td><td>(*</td><td class="doc">Indicates that the environment is an ANSI environment. This
is the default.</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_new_process_group">
  <a href="index.html#/type:create_process_option/cons:CP_new_process_group" class="anchor">#</a>
  | CP_new_process_group
  </div>
  </td><td>(*</td><td class="doc">The new process is run in a new process group</td><td>*)</td></tr><tr class="cons"><td>
  <div class="region" id="/type:create_process_option/cons:CP_inherit_process_group">
  <a href="index.html#/type:create_process_option/cons:CP_inherit_process_group" class="anchor">#</a>
  | CP_inherit_process_group
  </div>
  </td><td>(*</td><td class="doc">The new process is run in the same process group as the caller.
This is the default</td><td>*)</td></tr>
    </table>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:cp_set_env">
  <a href="index.html#/val:cp_set_env" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> cp_set_env : string array <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:create_process_option">create_process_option</a>
    
      <div class="doc">
        
      <p>Returns the <code>CP_set_env</code> option for this array of environment
variables (in the <code>Unix.environment</code> format)</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:search_path">
  <a href="index.html#/val:search_path" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> search_path : string option <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> string option <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p><code>search_path path_opt name ext_opt</code>: Uses the SearchPath function
to locate a file. If <code>name</code> does not end with <code>ext_opt</code>, this
extension is added during the search. If <code>path_opt</code> is <code>None</code>,
the default search path is used.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:w32_process">
  <a href="index.html#/type:w32_process" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_process
    
      <div class="doc">
        
      <p>A handle to spawned processes</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:create_process">
  <a href="index.html#/val:create_process" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create_process : string <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:create_process_option">create_process_option</a> list <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_process">w32_process</a>
    
      <div class="doc">
        
      <p><code>create_process cmd cmdline options</code>: Spawns a new process that runs
concurrently with the calling process. <code>cmd</code> is the command
to execute (it is not searched by path, and the file suffix must be
given). <code>cmdline</code> is the full command-line.</p>
      
      <p>If the exit code of the new process does not play any role, it is
ok to just ignore the returned process handle (which will be
automatically closed by a GC finalizer).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:close_process">
  <a href="index.html#/val:close_process" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> close_process : <a href="index.html#/type:w32_process">w32_process</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Closes the handle in the <code>w32_process</code> value, if it is still open</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_process_status">
  <a href="index.html#/val:get_process_status" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_process_status : <a href="index.html#/type:w32_process">w32_process</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:process_status">process_status</a> option
    
      <div class="doc">
        
      <p>Returns the process result if the process is finished, and <code>None</code>
otherwise</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:as_process_event">
  <a href="index.html#/val:as_process_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> as_process_event : <a href="index.html#/type:w32_process">w32_process</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a>
    
      <div class="doc">
        
      <p>Casts the process handle to an event handle. The process handle
is in signaled state as soon as the spawned process is terminated.
The event handle can be used in <code>event_wait</code> (above) and
<code>wsa_wait_for_multiple_events</code> to wait for the termination of the
process.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:emulated_pid">
  <a href="index.html#/val:emulated_pid" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> emulated_pid : <a href="index.html#/type:w32_process">w32_process</a> <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p>Returns the MSVCRT.DLL notion of the process identifier (pid).
This kind of pid is used in the <code>Unix</code> library to refer to
processes, especially in <code>waitpid</code>. Note that the pid is actually
a handle, and it must be closed by calling <code>Unix.waitpid</code>.</p>
      
      <p>Each call of <code>emulated_pid</code> returns a new handle.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:win_pid">
  <a href="index.html#/val:win_pid" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> win_pid : <a href="index.html#/type:w32_process">w32_process</a> <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p>Returns the Windows notion of the process identifier (pid)</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:process_descr">
  <a href="index.html#/val:process_descr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> process_descr : <a href="index.html#/type:w32_process">w32_process</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
    
      <div class="doc">
        
      <p>Returns the proxy descriptor of the process</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:terminate_process">
  <a href="index.html#/val:terminate_process" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> terminate_process : <a href="index.html#/type:w32_process">w32_process</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Terminates the process</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Consoles</h1>
    </div>
        
      </div>
    
  <div class="region" id="/val:has_console">
  <a href="index.html#/val:has_console" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> has_console : unit <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>True if there is a console</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:is_console">
  <a href="index.html#/val:is_console" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> is_console : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>Tests whether the descriptor is the input or the output stream of the
console.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_console_input">
  <a href="index.html#/val:get_console_input" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_console_input : unit <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
    
      <div class="doc">
        
      <p>Get the input stream of the console. If there is no console yet,
a new one is opened.</p>
      
      <p>The returned descriptor needs to be closed by the caller when done
with it.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_console_output">
  <a href="index.html#/val:get_console_output" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_console_output : unit <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a>
    
      <div class="doc">
        
      <p>Get the output stream of the console. If there is no console yet,
a new one is opened</p>
      
      <p>The returned descriptor needs to be closed by the caller when done
with it.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
      <p>We use a simplified model of the console where only the visible part
of the buffer is represented. All coordinates are relative to the
visible part of the buffer.</p>
      
        
      </div>
    
  <div class="region" id="/type:w32_console_attr">
  <a href="index.html#/type:w32_console_attr" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_console_attr = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/type:w32_console_attr/field:cursor_x">
  <a href="index.html#/type:w32_console_attr/field:cursor_x" class="anchor">#</a>
  <span class="keyword">mutable</span> cursor_x
  </div>
  </td><td>: int</td><td>;</td><td>(*</td><td class="doc">from 0 (leftmost) to <code>width-1</code> (rightmost)</td><td>*)</td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_attr/field:cursor_y">
  <a href="index.html#/type:w32_console_attr/field:cursor_y" class="anchor">#</a>
  <span class="keyword">mutable</span> cursor_y
  </div>
  </td><td>: int</td><td>;</td><td>(*</td><td class="doc">from 0 (topmost) to <code>height-1</code> (bottommost)</td><td>*)</td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_attr/field:cursor_size">
  <a href="index.html#/type:w32_console_attr/field:cursor_size" class="anchor">#</a>
  <span class="keyword">mutable</span> cursor_size
  </div>
  </td><td>: int</td><td>;</td><td>(*</td><td class="doc">from 1 to 100</td><td>*)</td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_attr/field:cursor_visible">
  <a href="index.html#/type:w32_console_attr/field:cursor_visible" class="anchor">#</a>
  <span class="keyword">mutable</span> cursor_visible
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_attr/field:text_attr">
  <a href="index.html#/type:w32_console_attr/field:text_attr" class="anchor">#</a>
  <span class="keyword">mutable</span> text_attr
  </div>
  </td><td>: int</td><td>;</td><td></td><td></td><td></td>
  </tr>
    </table>}
    
  </div>
  
  </div>
  
  <div class="region" id="/type:w32_console_info">
  <a href="index.html#/type:w32_console_info" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_console_info = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/type:w32_console_info/field:width">
  <a href="index.html#/type:w32_console_info/field:width" class="anchor">#</a>
  <span class="keyword">mutable</span> width
  </div>
  </td><td>: int</td><td>;</td><td>(*</td><td class="doc">screen width of the console in chars</td><td>*)</td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_info/field:height">
  <a href="index.html#/type:w32_console_info/field:height" class="anchor">#</a>
  <span class="keyword">mutable</span> height
  </div>
  </td><td>: int</td><td>;</td><td>(*</td><td class="doc">screen height in lines</td><td>*)</td>
  </tr>
    </table>}
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_console_attr">
  <a href="index.html#/val:get_console_attr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_console_attr : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_console_attr">w32_console_attr</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:set_console_attr">
  <a href="index.html#/val:set_console_attr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set_console_attr : <a href="index.html#/type:w32_console_attr">w32_console_attr</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Get/set console attributes.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_console_info">
  <a href="index.html#/val:get_console_info" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_console_info : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_console_info">w32_console_info</a>
    
      <div class="doc">
        
      <p>Get r/o console info.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:fg_blue">
  <a href="index.html#/val:fg_blue" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fg_blue : int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:fg_green">
  <a href="index.html#/val:fg_green" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fg_green : int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:fg_red">
  <a href="index.html#/val:fg_red" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fg_red : int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:fg_intensity">
  <a href="index.html#/val:fg_intensity" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fg_intensity : int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:bg_blue">
  <a href="index.html#/val:bg_blue" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> bg_blue : int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:bg_green">
  <a href="index.html#/val:bg_green" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> bg_green : int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:bg_red">
  <a href="index.html#/val:bg_red" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> bg_red : int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:bg_intensity">
  <a href="index.html#/val:bg_intensity" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> bg_intensity : int
    
      <div class="doc">
        
      <p>Bits of <code>text_attr</code></p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:w32_console_mode">
  <a href="index.html#/type:w32_console_mode" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_console_mode = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/type:w32_console_mode/field:enable_echo_input">
  <a href="index.html#/type:w32_console_mode/field:enable_echo_input" class="anchor">#</a>
  <span class="keyword">mutable</span> enable_echo_input
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_mode/field:enable_insert_mode">
  <a href="index.html#/type:w32_console_mode/field:enable_insert_mode" class="anchor">#</a>
  <span class="keyword">mutable</span> enable_insert_mode
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_mode/field:enable_line_input">
  <a href="index.html#/type:w32_console_mode/field:enable_line_input" class="anchor">#</a>
  <span class="keyword">mutable</span> enable_line_input
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_mode/field:enable_processed_input">
  <a href="index.html#/type:w32_console_mode/field:enable_processed_input" class="anchor">#</a>
  <span class="keyword">mutable</span> enable_processed_input
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_mode/field:enable_quick_edit_mode">
  <a href="index.html#/type:w32_console_mode/field:enable_quick_edit_mode" class="anchor">#</a>
  <span class="keyword">mutable</span> enable_quick_edit_mode
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_mode/field:enable_processed_output">
  <a href="index.html#/type:w32_console_mode/field:enable_processed_output" class="anchor">#</a>
  <span class="keyword">mutable</span> enable_processed_output
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr><tr class="field">
  <td>
  <div class="region" id="/type:w32_console_mode/field:enable_wrap_at_eol_output">
  <a href="index.html#/type:w32_console_mode/field:enable_wrap_at_eol_output" class="anchor">#</a>
  <span class="keyword">mutable</span> enable_wrap_at_eol_output
  </div>
  </td><td>: bool</td><td>;</td><td></td><td></td><td></td>
  </tr>
    </table>}
    
      <div class="doc">
        
      <p>See the msdn docs for GetConsoleMode for details</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_console_mode">
  <a href="index.html#/val:get_console_mode" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_console_mode : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_console_mode">w32_console_mode</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:set_console_mode">
  <a href="index.html#/val:set_console_mode" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set_console_mode : <a href="index.html#/type:w32_console_mode">w32_console_mode</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Get/set the console mode.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:init_console_codepage">
  <a href="index.html#/val:init_console_codepage" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> init_console_codepage : unit <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Sets the code page of the console to the ANSI code page of the
system. Unfortunately, the console uses the OEM code page by default
(e.g. code page 437 instead of 1252). This function changes the
code page back to the ANSI version.</p>
      
      <p>Note, however, that the docs say: &quot;If the current font is a
raster font, SetConsoleOutputCP does not affect how extended characters
are displayed.&quot; (grrmmpf) So you should also switch to a different
font - otherwise you get input in the ANSI code page, and do output
in the OEM code page.</p>
      
      <p>For Windows novices: Historically, there were two types of 8 bit
character sets. The older type is an IBM code page, and predates
the ISO-8859 series of character sets. This code page was used
at MS-DOS times. Microsoft calls this code page the &quot;OEM&quot; code
page. Later, when ISO-8859 was created, Microsoft switched to
code pages that are similar to this standard, but also do not
fully match them. These newer code pages have names like
&quot;Windows-1252&quot;, and are now called ANSI code pages by Microsoft.
The 8-bit versions of the Win32 calls (which are used by the
Ocaml runtime)normally use the ANSI code page.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:clear_until_end_of_line">
  <a href="index.html#/val:clear_until_end_of_line" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clear_until_end_of_line : unit <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Writes a space character from the current cursor position to the
end of the line</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:clear_until_end_of_screen">
  <a href="index.html#/val:clear_until_end_of_screen" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clear_until_end_of_screen : unit <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Writes a space character from the current cursor position to the
end of the screen</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:clear_console">
  <a href="index.html#/val:clear_console" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> clear_console : unit <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Clears the screen and the buffer, and sets the cursor to (0,0).</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Miscelleneous</h1>
    </div>
        
      </div>
    
  <div class="region" id="/val:get_active_code_page">
  <a href="index.html#/val:get_active_code_page" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_active_code_page : unit <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p>Get the active code page. See
http://msdn.microsoft.com/en-us/library/dd317756%28v=VS.85%29.aspx
for a list of codes. Also see <a href="../../../../ocamlnet.3.7.7/src/netstring/netconversion/">Netconversion</a>.<a href="../../../../ocamlnet.3.7.7/src/netstring/netconversion/#/val:win32_code_pages">win32_code_pages</a>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Proxy Descriptors</h1>
    </div>
        
      </div>
    
      <div class="doc">
        
      <p>For a number of objects (<code>w32_event</code>, <code>w32_pipe</code>, and <code>w32_pipe_server</code>)
it is possible
to obtain proxy descriptors. These have type <code>Unix.file_descr</code> and they
contain a real file handle. The purpose of these descriptors is to
be used as proxy objects that can be passed to functions expecting
file descriptors as input. However, you cannot do anything with the
proxies except looking the corresponding real objects up. Proxy
descriptors are used in interfaces that only allow to pass
<code>Unix.file_descr</code> values in and out.</p>
      
      <p>Proxy descriptors have to be closed by the caller once they have
been handed out to the caller. Closing the proxy descriptor does not
make the descriptor unusable (lookups still work), and the referenced
object is also
unaffected. It is up to the user when <code>Unix.close</code> is best called -
it is even allowed to do it immediately after requesting the proxy
descriptor, e.g. via <code>pipe_descr</code>. After closing the proxy, however,
it is possible that the system generates another file descriptor
that looks equal to the closed proxy. It is often best to close at the
moment when one is really done with the proxy.</p>
      
        
      </div>
    
  <div class="region" id="/type:w32_object">
  <a href="index.html#/type:w32_object" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> w32_object = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:w32_object/cons:W32_event">
  <a href="index.html#/type:w32_object/cons:W32_event" class="anchor">#</a>
  | W32_event <span class="keyword">of</span> <a href="index.html#/type:w32_event">w32_event</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:w32_object/cons:W32_pipe">
  <a href="index.html#/type:w32_object/cons:W32_pipe" class="anchor">#</a>
  | W32_pipe <span class="keyword">of</span> <a href="index.html#/type:w32_pipe">w32_pipe</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:w32_object/cons:W32_pipe_server">
  <a href="index.html#/type:w32_object/cons:W32_pipe_server" class="anchor">#</a>
  | W32_pipe_server <span class="keyword">of</span> <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:w32_object/cons:W32_process">
  <a href="index.html#/type:w32_object/cons:W32_process" class="anchor">#</a>
  | W32_process <span class="keyword">of</span> <a href="index.html#/type:w32_process">w32_process</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:w32_object/cons:W32_input_thread">
  <a href="index.html#/type:w32_object/cons:W32_input_thread" class="anchor">#</a>
  | W32_input_thread <span class="keyword">of</span> <a href="index.html#/type:w32_input_thread">w32_input_thread</a>
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:w32_object/cons:W32_output_thread">
  <a href="index.html#/type:w32_object/cons:W32_output_thread" class="anchor">#</a>
  | W32_output_thread <span class="keyword">of</span> <a href="index.html#/type:w32_output_thread">w32_output_thread</a>
  </div>
  </td><td></td><td></td><td></td></tr>
    </table>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:lookup">
  <a href="index.html#/val:lookup" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lookup : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_object">w32_object</a>
    
      <div class="doc">
        
      <p>Returns the real object behind a proxy descriptor, or raises
<code>Not_found</code>. Note that the returned object needs not to be physically
identical to the original object. It behaves, however, exactly the
same way.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:lookup_event">
  <a href="index.html#/val:lookup_event" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lookup_event : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_event">w32_event</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:lookup_pipe">
  <a href="index.html#/val:lookup_pipe" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lookup_pipe : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_pipe">w32_pipe</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:lookup_pipe_server">
  <a href="index.html#/val:lookup_pipe_server" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lookup_pipe_server : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_pipe_server">w32_pipe_server</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:lookup_process">
  <a href="index.html#/val:lookup_process" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lookup_process : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_process">w32_process</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:lookup_input_thread">
  <a href="index.html#/val:lookup_input_thread" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lookup_input_thread : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_input_thread">w32_input_thread</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:lookup_output_thread">
  <a href="index.html#/val:lookup_output_thread" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lookup_output_thread : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:w32_output_thread">w32_output_thread</a>
    
      <div class="doc">
        
      <p>Returns the real object. If not found, or if the object is of unexpected
type, <code>Failure</code> is raised.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:unregister">
  <a href="index.html#/val:unregister" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> unregister : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Removes this descriptor from the lookup table. This should only be done
after it is closed. Calling <code>unregister</code> is optional, and the removal
will take place anyway when the descriptor is collected by the GC.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Miscelleneous</h1>
    </div>
        
      </div>
    
  <div class="region" id="/val:test_close_on_exec">
  <a href="index.html#/val:test_close_on_exec" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> test_close_on_exec : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>Tests whether the handle is not inheritable</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:modify_close_on_exec">
  <a href="index.html#/val:modify_close_on_exec" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> modify_close_on_exec : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> bool <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Sets the close-on-exec flag, i.e. whether the handle is not inheritable.
Note that <code>Unix.set_close_on_exec</code> and <code>Unix.clear_close_on_exec</code>
have a serious problem, and do not always work.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:is_crt_fd">
  <a href="index.html#/val:is_crt_fd" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> is_crt_fd : <a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/">Unix</a>.<a href="../../../../ocaml.4.02.1+doc/otherlibs/unix/unix/#/type:file_descr">file_descr</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>Tests whether the descriptor has a certain CRT counterpart.
E.g. use <code>is_crt_fd 0</code> to check whether <code>fd</code> is <code>Unix.stdin</code>
(physically)</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:fill_random">
  <a href="index.html#/val:fill_random" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> fill_random : string <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Fills the string with random bytes. A cryptographically secure RNG
is used</p>
      
        
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        <div class="region">
    <h1 class="section level_1">Debugging</h1>
    </div>
        
      </div>
    
  <div class="region" id="/module:Debug">
  <a href="index.html#/module:Debug" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Debug : <span class="keyword">sig</span></div>
      
      
    <div class="sig">
  <div class="region" id="/module:Debug/val:enable">
  <a href="index.html#/module:Debug/val:enable" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> enable : bool <a href="../../../../ocaml.4.02.1+doc/stdlib/pervasives/">Pervasives</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/pervasives/#/type:ref">ref</a>
    
      <div class="doc">
        
      <p>Enables [root:Netlog]-style debugging of the Ocaml wrapper</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Debug/val:debug_c_wrapper">
  <a href="index.html#/module:Debug/val:debug_c_wrapper" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> debug_c_wrapper : bool <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Sets whether to debug the C wrapper part. The debug messages are
simply written to stderr</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Netexn</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Netexn</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Exception registry</p>
      
      <p>This module allow the user to register exceptions, and to set a
custom exception printing function. This results in nicer exception
prints when <code>Netexn.to_string</code> is called instead of <code>Printexc.to_string</code>.</p>
      
      <p>Generally, <code>Printexc.to_string</code> works well if:</p>
      <ul><li>the exception does not have arguments, or</li><li>all arguments are int's or string's.</li></ul>
      <p>In these cases it is not required to register a custom printer. Arguments
that are neither int nor string are printed as &quot;_&quot;, however, so defining
a custom printer helps then.</p>
      
      <p>The printers registered here are intended for helping debugging, so
the goal is to print all of the exception in an unambiguous way.
The syntax &quot;Exception(arg1, arg2, ...)&quot; is preferred.</p>
      
      <p><b>Since OCaml 3.11.2 there is a similar feature in <code>Printexc</code>.</b>
If Ocamlnet recognizes that <code>Printexc.register_printer</code> is available,
all functions registered in this module are also registered at
the central <code>Printexc</code> registry. For users it does not make a difference
then whether <code>Netexn.to_string</code> or <code>Printexc.to_string</code> is called
to print the exception. We recommend, however, to use <code>Netexn</code> as
primary registry for all code that uses Ocamlnet because this
mechanism also works for older Ocaml versions, and is slightly more
efficient.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/val:register_printer">
  <a href="index.html#/val:register_printer" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> register_printer : exn <span class="rarr"><span>-&gt;</span></span> (exn <span class="rarr"><span>-&gt;</span></span> string) <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>register e f</code>: Register that the exception type of the sample
exception <code>e</code> is to be printed by <code>f</code>.</p>
      
      <p>In multi-threaded programs, this function should no longer be called
once threads have been spawned.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:to_string">
  <a href="index.html#/val:to_string" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> to_string : exn <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p>Prints the exception as string, using the registered printer functions,
or <code>Printexc.to_string</code> as fallback if there is no better printer</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Netmcore_matrix</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Netmcore_matrix</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Shared 2-dimensional arrays (matrices)</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/type:sarray2">
  <a href="index.html#/type:sarray2" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> ('e, 'h) sarray2
    
      <div class="doc">
        
      <p>Arrays where the elements have type <code>'e</code> and the header has
type <code>'h</code></p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:sarray2_descr">
  <a href="index.html#/type:sarray2_descr" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> ('e, 'h) sarray2_descr
    
      <div class="doc">
        
      <p>The marshallable descriptor of a shared matrix</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:create">
  <a href="index.html#/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : <a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/">Netmcore</a>.<a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/#/type:res_id">res_id</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> 'e array array <span class="rarr"><span>-&gt;</span></span> 'h <span class="rarr"><span>-&gt;</span></span> ('e, 'h) <a href="index.html#/type:sarray2">sarray2</a>
    
      <div class="doc">
        
      <p><code>create pool_id n2 a h</code>:
Creates a matrix by deeply copying a normal array <code>a</code>
and using the copy of <code>h</code> as header. In <code>n2</code> one has
to pass the second dimension.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:make">
  <a href="index.html#/val:make" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> make : <a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/">Netmcore</a>.<a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/#/type:res_id">res_id</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> 'e <span class="rarr"><span>-&gt;</span></span> 'h <span class="rarr"><span>-&gt;</span></span> ('e, 'h) <a href="index.html#/type:sarray2">sarray2</a>
    
      <div class="doc">
        
      <p><code>make pool_id n1 n2 x h</code>:
Creates a matrix of the passed number of elements (n1 * n2),
copies the element <code>x</code>, and initializes each element of the new array
with the single copy of <code>x</code>. The value <code>h</code> is copied and used
as header.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:init">
  <a href="index.html#/val:init" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> init : <a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/">Netmcore</a>.<a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/#/type:res_id">res_id</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> (int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> 'e) <span class="rarr"><span>-&gt;</span></span> 'h <span class="rarr"><span>-&gt;</span></span> ('e, 'h) <a href="index.html#/type:sarray2">sarray2</a>
    
      <div class="doc">
        
      <p><code>init pool_id n1 n2 f h</code>:
Creates a matrix of the passed number of elements (n1 * n2),
and for getting the element at position <code>k</code> the function
<code>f k</code> is run, and the copy of the result is written to the
position. The header is set to the copy of <code>h</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:set">
  <a href="index.html#/val:set" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set : ('e, _) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> 'e <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>set sa k1 k2 x</code>: Sets the <code>(k1,k2)-th</code> element of the matrix <code>sa</code> to a
deep copy of <code>x</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_ro">
  <a href="index.html#/val:get_ro" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_ro : ('e, _) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> 'e
    
      <div class="doc">
        
      <p><code>get_ro sa k1 k2</code>: Gets the <code>(k1,k2)</code>-th element of the matrix <code>sa</code>.
Note that there is no guarantee that this value still exists if
it is returned, and a parallely running <code>set</code> changes this element.
If such values are accessed the program may crash!</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_p">
  <a href="index.html#/val:get_p" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_p : ('e, _) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> ('e <span class="rarr"><span>-&gt;</span></span> 'a) <span class="rarr"><span>-&gt;</span></span> 'a
    
      <div class="doc">
        
      <p><code>get_p sa k1 k2 f</code>: Gets the <code>(k1,k2)</code>-th element of the matrix <code>sa</code>
and call <code>f</code> with this element, and returns the result of <code>f</code>.
During the execution of <code>f</code> the requested element cannot be
garbage collected.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_c">
  <a href="index.html#/val:get_c" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_c : ('e, _) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> 'e
    
      <div class="doc">
        
      <p><code>get_c sa k1 k2</code>: Gets a copy of the <code>(k1,k2)</code>-th element of the matrix
<code>s√¶</code></p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:dim">
  <a href="index.html#/val:dim" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> dim : (_, _) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> int * int
    
      <div class="doc">
        
      <p>Returns the dimenstions</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:header">
  <a href="index.html#/val:header" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> header : (_, 'h) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> 'h
    
      <div class="doc">
        
      <p>Returns the header</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:deref">
  <a href="index.html#/val:deref" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> deref : ('e, _) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> 'e array array
    
      <div class="doc">
        
      <p>Returns the raw array in shared memory for unprotected access</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:heap">
  <a href="index.html#/val:heap" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> heap : (_, _) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../ocaml.4.02.1+doc/stdlib/obj/">Obj</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/obj/#/type:t">t</a> <a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore_heap/">Netmcore_heap</a>.<a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore_heap/#/type:heap">heap</a>
    
      <div class="doc">
        
      <p>Return the backing heap structure</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:descr_of_sarray2">
  <a href="index.html#/val:descr_of_sarray2" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> descr_of_sarray2 : ('e, 'h) <a href="index.html#/type:sarray2">sarray2</a> <span class="rarr"><span>-&gt;</span></span> ('e, 'h) <a href="index.html#/type:sarray2_descr">sarray2_descr</a>
    
      <div class="doc">
        
      <p>Returns the descriptor</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:sarray2_of_descr">
  <a href="index.html#/val:sarray2_of_descr" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> sarray2_of_descr : <a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/">Netmcore</a>.<a href="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/#/type:res_id">res_id</a> <span class="rarr"><span>-&gt;</span></span> ('e, 'h) <a href="index.html#/type:sarray2_descr">sarray2_descr</a> <span class="rarr"><span>-&gt;</span></span> ('e, 'h) <a href="index.html#/type:sarray2">sarray2</a>
    
      <div class="doc">
        
      <p>Look up the matrix for this descriptor</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
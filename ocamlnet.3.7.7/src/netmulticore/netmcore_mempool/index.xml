<?xml version="1.0" encoding="UTF-8"?>
<unit><root><base><html src="index.html"><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></html></base>Netmcore_mempool</root><digest>916e67e90b6441881d024dbb0d553a77</digest><import>Bigarray<digest>0643187a8b562858118690c393d01c2e</digest></import><import>Buffer<digest>a579f4a57e300ec755f84af883c1e51b</digest></import><import>CamlinternalFormatBasics<digest>ba1be62eb45abd435c75cb59cc46b922</digest></import><import>CamlinternalOO<digest>3d0b4eb4525ba4274c8885d7124f7bbc</digest></import><import>Complex<digest>d0dcc1da3c694cf9a7e924c7832d1528</digest></import><import>Equeue<digest>207ed21b384dd4f4ad91bce8a449f64c</digest></import><import>Hashtbl<digest>bb8e269d690301a1c4ff14a08e96e83e</digest></import><import>Int32<digest>f43b8a2972804b40e28b661b6fdf157a</digest></import><import>Int64<digest>3565b288ec68024088360805650448dd</digest></import><import>Lexing<digest>1be6a5484fb3cfb69d2c981438a7be62</digest></import><import>Netbuffer<digest>5f4225f2baeef1584e246c6ce1d32119</digest></import><import>Netchannels<digest>4e22bd1ba0cae4bd9bd1b6e69fc16ade</digest></import><import>Netexn<digest>845c6110cc81d957d9fc21c9e149d5fb</digest></import><import>Netlog<digest>2441459e41ceb77fc72d5714e0508958</digest></import><import>Netmcore<digest>a43c14b18fe269828d7a8a2185ec03a0</digest></import><import>Netnumber<digest>dbd89ef42a315eaa84a5eeb21e4b6530</digest></import><import>Netplex_encap<digest>6dd5527c9f4aa5fa370a0b8cfe94711b</digest></import><import>Netplex_types<digest>b09b49cdab7359a58acb7a6f179e24ac</digest></import><import>Netsockaddr<digest>514bc9294568dc3facaf49b96623c337</digest></import><import>Netsys<digest>4a0ae4cc74f10e8667e3b629e6907079</digest></import><import>Netsys_mem<digest>f19ef786301a8cbcfbf1a4fffee992f8</digest></import><import>Netsys_posix<digest>f5b674538a41e016bb4f0e731d114657</digest></import><import>Netsys_sem<digest>7112f0b1d11ab0fe1abd7ca5aa7d7cdf</digest></import><import>Netsys_signal<digest>703311022efc5162433d614b9bef35af</digest></import><import>Netsys_types<digest>67b26630eaf4decaa483864d4d00a3a2</digest></import><import>Netsys_win32<digest>02161f9169b76f686b05a51ed2d9357c</digest></import><import>Obj<digest>825c406ee2d12ed12fd12dc0e4de1d26</digest></import><import>Oo<digest>0977563fa9c23f2df2952b302bdba835</digest></import><import>Pervasives<digest>0d015a5a2136659b0de431be7f1545be</digest></import><import>Printf<digest>eb49a17645c5ea2dd298430a3c986186</digest></import><import>Rpc<digest>823bfd8fbbbc545fe6929685a57393b5</digest></import><import>Rpc_client<digest>56bf3aef28bd1d22eab29ca954a2cb3c</digest></import><import>Rpc_packer<digest>af7dd8ce3ff9294c27a0d09fd8424b4e</digest></import><import>Rpc_program<digest>2c8259e58584b03793c1d5b3eaa20436</digest></import><import>Rpc_server<digest>11e0d988a11e73632cc4454470337bbd</digest></import><import>Rpc_transport<digest>6dccd6c9fbafeb7fe8a94a52c7614424</digest></import><import>Rpc_util<digest>fdef7f525a45859737db6e8e58372317</digest></import><import>Rtypes<digest>3a2195ceddcae11873afeb1784965176</digest></import><import>Set<digest>487197ccd2fea64d52f1cd917061caf2</digest></import><import>Stream<digest>55948988e71c3ee1749feb21ccec9fc9</digest></import><import>Sys<digest>0ce699458ce4430954d7e6a78874647c</digest></import><import>Unix<digest>30a4cc8e5f4f902ea609c91caec48af7</digest></import><import>Unixqueue<digest>5ec5f57d46c5b3e908696c79a59232d4</digest></import><import>Unixqueue_util<digest>f013da7473123405a6e2f9edc5dde5e1</digest></import><import>Uq_engines<digest>7eabb27fa86d9290a1fe2ef78547b48a</digest></import><import>Uq_mt<digest>9c171e79d90169806336d502364d1bd2</digest></import><import>Xdr<digest>d36f2013b5caa2d21a98f895fdddfd16</digest></import><import>Xdr_mstring<digest>2f3d19f64c1f9ca2f05941c7b5ea2c42</digest></import><source><file>netmcore_mempool.mli</file><dir>/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore</dir><digest>2fed4bb701ab78cf795edd0be84d5198</digest></source><doc>Memory pools<newline/>A memory pool is a block of shared memory that is set aside for storing
shared data structures. The pool needs to be created before the
worker processes are forked off that are going to use the pool.
The worker processes do not map the pool to some random address,
but rather the processes inherit the pool from the common master
process which ensures that all processes will see the pool at
the same address.<newline/>In order to allow inheritance, the function <reference><element><resolved><value><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>start</value></resolved></element></reference>
for starting workers needs to get an additional argument
<code>~inherit_resources</code>. The resource ID of the pool must be put
into this list - otherwise the worker does not get access to
the pool.<newline/>It is not possible to enlarge the pool later (because of the
inheritance method for making the pool accessible). It is advised
to make the pool large enough for all possible data cases, and
to let the user configure this size.</doc><exception><exception><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>Out_of_pool_memory</exception></exception><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>create_mempool</value><doc>Creates the memory pool as shared memory object of the passed size
(rounded up to the next multiple of pages) and returns the resource ID.<newline/>Note that the process calling this function cannot use the pool,
but only worker processes that are forked later. It is possible
to call <code>create_mempool</code> before running <reference><element><resolved><value><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>startup</value></resolved></element></reference>.<newline/>Option <code>alloc_really</code>: On some operating systems (namely Linux)
shared memory is not fully included into the memory bookkeeping
as long as nothing is written into it (so-called
overcommitment). This means that the memory is not reserved, and
when something is written for the first time, it might happen
that the system cannot grant the request. The consequence is a
bus error. By setting <code>alloc_really</code> to true, all allocated
memory pages are immediately written to, and thus the problem is
avoided (or better, if memory is really tight, you get the bus
error now immediately, at least).<newline/><bold>Note that memory pools have kernel persistence! They are not
automatically deleted when the process finishes. Call <code>unlink_mempool</code>
to delete memory pools.</bold></doc><arrow><optional>alloc_really</optional><path><resolved><identifier><type>bool</type></identifier></resolved></path><arrow><path><resolved><identifier><type>int</type></identifier></resolved></path><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path></arrow></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>alloc_mem</value><doc>Allocate memory in this pool. The passed int the size of the
returned <code>memory</code> object. The size is rounded up to the next
multiple of pages.<newline/>Blocks are actually allocated in units of pages.<newline/>Raises <code>Out_of_pool_memory</code> if there is not enough contiguous
space in the pool.</doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><arrow><path><resolved><identifier><type>int</type></identifier></resolved></path><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netsys/netsys_mem/index.xml"><cmti name="Netsys_mem" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netsys/netsys_mem.cmti" digest="f19ef786301a8cbcfbf1a4fffee992f8"/></xml></base>Netsys_mem</root></identifier>memory</type></resolved></path></arrow></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>size_mem</value><doc>Returns the size of this block, or raises <code>Not_found</code></doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netsys/netsys_mem/index.xml"><cmti name="Netsys_mem" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netsys/netsys_mem.cmti" digest="f19ef786301a8cbcfbf1a4fffee992f8"/></xml></base>Netsys_mem</root></identifier>memory</type></resolved></path><path><resolved><identifier><type>int</type></identifier></resolved></path></arrow></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>size_mem_at_addr</value><doc>Returns the size of the block at this address, or raises <code>Not_found</code></doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><arrow><path><resolved><identifier><type>nativeint</type></identifier></resolved></path><path><resolved><identifier><type>int</type></identifier></resolved></path></arrow></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>free_mem</value><doc>Frees this allocated block</doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netsys/netsys_mem/index.xml"><cmti name="Netsys_mem" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netsys/netsys_mem.cmti" digest="f19ef786301a8cbcfbf1a4fffee992f8"/></xml></base>Netsys_mem</root></identifier>memory</type></resolved></path><path><resolved><identifier><type>unit</type></identifier></resolved></path></arrow></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>stats</value><doc>Returns <code>(total, free, contiguous)</code> where<list><item><code>total</code> is the total size of the pool</item><item><code>free</code> is the number of free bytes</item><item><code>contiguous</code> is the size of the largest contiguous free block</item></list></doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><tuple><path><resolved><identifier><type>int</type></identifier></resolved></path><path><resolved><identifier><type>int</type></identifier></resolved></path><path><resolved><identifier><type>int</type></identifier></resolved></path></tuple></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>debug_info</value><doc>Returns a string describing the allocations etc.</doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><path><resolved><identifier><type>string</type></identifier></resolved></path></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>shm_name</value><doc>Returns the name of the shared memory object</doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><path><resolved><identifier><type>string</type></identifier></resolved></path></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>sem_container</value><doc>Returns the semaphore container</doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netsys/netsys_sem/index.xml"><cmti name="Netsys_sem" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netsys/netsys_sem.cmti" digest="7112f0b1d11ab0fe1abd7ca5aa7d7cdf"/></xml></base>Netsys_sem</root></identifier>container</type></resolved></path></arrow></value><value><value><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>unlink_mempool</value><doc>Deletes the persistent objects of this pool</doc><arrow><path><resolved><type><identifier><root><base><xml src="../../../../ocamlnet.3.7.7/src/netmulticore/netmcore/index.xml"><cmti name="Netmcore" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore.cmti" digest="a43c14b18fe269828d7a8a2185ec03a0"/></xml></base>Netmcore</root></identifier>res_id</type></resolved></path><path><resolved><identifier><type>unit</type></identifier></resolved></path></arrow></value><module><module><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>Debug</module><type><signature><value><value><module><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>Debug</module>enable</value><doc>Enable debugging</doc><path><resolved><type><identifier><root><base><html src="../../../../ocaml.4.02.1+doc/stdlib/pervasives/index.html"><xml src="../../../../ocaml.4.02.1+doc/stdlib/pervasives/index.xml"><cmti name="Pervasives" src="/home/dsheets/.opam/doc/build/ocaml/stdlib/pervasives.cmti" digest="0d015a5a2136659b0de431be7f1545be"/></xml></html></base>Pervasives</root></identifier>ref</type></resolved><path><resolved><identifier><type>bool</type></identifier></resolved></path></path></value><value><value><module><root><base><xml src="index.xml"><cmti name="Netmcore_mempool" src="/home/dsheets/.opam/doc/build/ocamlnet.3.7.7/src/netmulticore/netmcore_mempool.cmti" digest="916e67e90b6441881d024dbb0d553a77"/></xml></base>Netmcore_mempool</root>Debug</module>enable_alloc</value><doc>Trace allocation and deallocation</doc><path><resolved><type><identifier><root><base><html src="../../../../ocaml.4.02.1+doc/stdlib/pervasives/index.html"><xml src="../../../../ocaml.4.02.1+doc/stdlib/pervasives/index.xml"><cmti name="Pervasives" src="/home/dsheets/.opam/doc/build/ocaml/stdlib/pervasives.cmti" digest="0d015a5a2136659b0de431be7f1545be"/></xml></html></base>Pervasives</root></identifier>ref</type></resolved><path><resolved><identifier><type>bool</type></identifier></resolved></path></path></value></signature></type></module></unit>
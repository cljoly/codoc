<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Ordered_collection_common</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Ordered_collection_common</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p><code>normalize length_fun thing_with_length i</code> is just <code>i</code>, unless
<code>i</code> is negative, in which case it's <code>length_fun thing_with_length + i</code>.
This is used by various python-style slice functions.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/val:normalize">
  <a href="index.html#/val:normalize" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> normalize : length_fun:('a <span class="rarr"><span>-&gt;</span></span> int) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:slice">
  <a href="index.html#/val:slice" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> slice : length_fun:('a <span class="rarr"><span>-&gt;</span></span> int) <span class="rarr"><span>-&gt;</span></span> sub_fun:('a <span class="rarr"><span>-&gt;</span></span> pos:int <span class="rarr"><span>-&gt;</span></span> len:int <span class="rarr"><span>-&gt;</span></span> 'a) <span class="rarr"><span>-&gt;</span></span> 'a <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> int <span class="rarr"><span>-&gt;</span></span> 'a
    
  </div>
  
  </div>
  
      <div class="doc">
        
      <p><code>get_pos_len</code>, <code>get_pos_len_exn</code>, and <code>validate_pos_len_exn</code> are intended to be used
by functions that take a sequence (array, string, bigstring, ...) and an optional
<code>pos</code> and <code>len</code> specifying a subrange of the sequence. Such functions should call
<code>get_pos_len</code> with the length of the sequence and the optional <code>pos</code> and <code>len</code>, and it
will return the <code>pos</code> and <code>len</code> specifying the range, where the default <code>pos</code> is zero
and the default <code>len</code> is to go to the end of the sequence.</p>
      
      <p>It should be the case that:</p>
      <pre><code>      pos &gt;= 0 &amp;&amp; len &gt;= 0 &amp;&amp; pos + len &lt;= length</code></pre>
      <p>Note that this allows <code>pos = length</code> and <code>len = 0</code>, i.e. an empty subrange
at the end of the sequence.</p>
      
      <p><code>get_pos_len</code> returns <code>(pos', len')</code> specifying a subrange where:</p>
      <pre>      pos' = match pos with None -&gt; 0 | Some i -&gt; i
      len' = match len with None -&gt; length - pos | Some i -&gt; i</pre>
        
      </div>
    
  <div class="region" id="/val:get_pos_len">
  <a href="index.html#/val:get_pos_len" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_pos_len : ?pos:int <span class="rarr"><span>-&gt;</span></span> ?len:int <span class="rarr"><span>-&gt;</span></span> length:int <span class="rarr"><span>-&gt;</span></span> (int * int, string) <a href="../../../../core_kernel.112.06.02/_build/lib/result/">Result</a>.<a href="../../../../core_kernel.112.06.02/_build/lib/result/#/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:get_pos_len_exn">
  <a href="index.html#/val:get_pos_len_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_pos_len_exn : ?pos:int <span class="rarr"><span>-&gt;</span></span> ?len:int <span class="rarr"><span>-&gt;</span></span> length:int <span class="rarr"><span>-&gt;</span></span> int * int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:check_pos_len_exn">
  <a href="index.html#/val:check_pos_len_exn" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> check_pos_len_exn : pos:int <span class="rarr"><span>-&gt;</span></span> len:int <span class="rarr"><span>-&gt;</span></span> length:int <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p><code>check_pos_len_exn ~pos ~len ~length</code> raises unless
<code>pos &gt;= 0 &amp;&amp; len &gt;= 0 &amp;&amp; pos + len &lt;= length</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
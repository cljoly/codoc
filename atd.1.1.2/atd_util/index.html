<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../codoc.css"/>
    <title>Atd_util</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Atd_util</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Top-level utilities</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/val:read_lexbuf">
  <a href="index.html#/val:read_lexbuf" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_lexbuf : ?expand:bool <span class="rarr"><span>-&gt;</span></span> ?keep_poly:bool <span class="rarr"><span>-&gt;</span></span> ?xdebug:bool <span class="rarr"><span>-&gt;</span></span> ?inherit_fields:bool <span class="rarr"><span>-&gt;</span></span> ?inherit_variants:bool <span class="rarr"><span>-&gt;</span></span> ?pos_fname:string <span class="rarr"><span>-&gt;</span></span> ?pos_lnum:int <span class="rarr"><span>-&gt;</span></span> <a href="../../ocaml.4.02.1+doc/stdlib/lexing/">Lexing</a>.<a href="../../ocaml.4.02.1+doc/stdlib/lexing/#/type:lexbuf">lexbuf</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../atd.1.1.2/atd_ast/">Atd_ast</a>.<a href="../../atd.1.1.2/atd_ast/#/type:full_module">full_module</a> * <a href="../../atd.1.1.2/atd_expand/">Atd_expand</a>.<a href="../../atd.1.1.2/atd_expand/#/type:original_types">original_types</a>
    
      <div class="doc">
        
      <p>Read an ATD file from a lexbuf. See also <code>read_channel</code>, <code>load_file</code>
and <code>load_string</code>.</p>
      
      <p>If expand is true, the second part of the return value will contain
a hash table mapping the types generated during monomorphization back
to their original polymorphic types. See <a href="../../atd.1.1.2/atd_expand/">Atd_expand</a>.<a href="../../atd.1.1.2/atd_expand/#/type:original_types">original_types</a>
for more information about this table. If expand is false, the value
will be the empty hash table.</p>
      
        
  <div class="tag param">
    <span class="label">expand</span> Perform monomorphization by creating specialized
type definitions starting with an underscore.
Default is false. See also [root:Atd_expand].
This corresponds to the <code>-x</code> option of <code>atdcat</code>.
  </div>
  
  <div class="tag param">
    <span class="label">keep_poly</span> Preserve left-hand-side of all original type definitions
instead of removing parametrized definitions.
This option only applies when <code>expand = true</code>.
Default is false. See also [root:Atd_expand].
This corresponds to the <code>-xk</code> option of <code>atdcat</code>.
  </div>
  
  <div class="tag param">
    <span class="label">xdebug</span> Debugging option producing meaningful but non ATD-compliant
type names when new types names are created.
Default is false.
This corresponds to the <code>-xd</code> option of <code>atdcat</code>.
  </div>
  
  <div class="tag param">
    <span class="label">inherit_fields</span> Expand <code>inherit</code> statements in record types.
Default is false. See also [root:Atd_inherit].
This corresponds to the <code>-if</code> option of <code>atdcat</code>.
  </div>
  
  <div class="tag param">
    <span class="label">inherit_variants</span> Expand <code>inherit</code> statements in sum types.
Default is false. See also [root:Atd_inherit].
This corresponds to the <code>-iv</code> option of <code>atdcat</code>.
  </div>
  
  <div class="tag param">
    <span class="label">pos_fname</span> Set the file name for use in error messages.
Default is <code>&quot;&quot;</code>.
  </div>
  
  <div class="tag param">
    <span class="label">pos_lnum</span> Set the number of the first line for use in error messages.
Default is <code>1</code>.
  </div>
  
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:read_channel">
  <a href="index.html#/val:read_channel" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> read_channel : ?expand:bool <span class="rarr"><span>-&gt;</span></span> ?keep_poly:bool <span class="rarr"><span>-&gt;</span></span> ?xdebug:bool <span class="rarr"><span>-&gt;</span></span> ?inherit_fields:bool <span class="rarr"><span>-&gt;</span></span> ?inherit_variants:bool <span class="rarr"><span>-&gt;</span></span> ?pos_fname:string <span class="rarr"><span>-&gt;</span></span> ?pos_lnum:int <span class="rarr"><span>-&gt;</span></span> <a href="../../ocaml.4.02.1+doc/stdlib/pervasives/">Pervasives</a>.<a href="../../ocaml.4.02.1+doc/stdlib/pervasives/#/type:in_channel">in_channel</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../atd.1.1.2/atd_ast/">Atd_ast</a>.<a href="../../atd.1.1.2/atd_ast/#/type:full_module">full_module</a> * <a href="../../atd.1.1.2/atd_expand/">Atd_expand</a>.<a href="../../atd.1.1.2/atd_expand/#/type:original_types">original_types</a>
    
      <div class="doc">
        
      <p>Read an ATD file from an <code>in_channel</code>. Options: see <code>read_lexbuf</code>.
The default <code>pos_fname</code> is set to <code>&quot;&lt;stdin&gt;&quot;</code> when appropriate.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:load_file">
  <a href="index.html#/val:load_file" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> load_file : ?expand:bool <span class="rarr"><span>-&gt;</span></span> ?keep_poly:bool <span class="rarr"><span>-&gt;</span></span> ?xdebug:bool <span class="rarr"><span>-&gt;</span></span> ?inherit_fields:bool <span class="rarr"><span>-&gt;</span></span> ?inherit_variants:bool <span class="rarr"><span>-&gt;</span></span> ?pos_fname:string <span class="rarr"><span>-&gt;</span></span> ?pos_lnum:int <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="../../atd.1.1.2/atd_ast/">Atd_ast</a>.<a href="../../atd.1.1.2/atd_ast/#/type:full_module">full_module</a> * <a href="../../atd.1.1.2/atd_expand/">Atd_expand</a>.<a href="../../atd.1.1.2/atd_expand/#/type:original_types">original_types</a>
    
      <div class="doc">
        
      <p>Read an ATD file. Options: see <code>read_lexbuf</code>.
The default <code>pos_fname</code> is the given input file name.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:load_string">
  <a href="index.html#/val:load_string" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> load_string : ?expand:bool <span class="rarr"><span>-&gt;</span></span> ?keep_poly:bool <span class="rarr"><span>-&gt;</span></span> ?xdebug:bool <span class="rarr"><span>-&gt;</span></span> ?inherit_fields:bool <span class="rarr"><span>-&gt;</span></span> ?inherit_variants:bool <span class="rarr"><span>-&gt;</span></span> ?pos_fname:string <span class="rarr"><span>-&gt;</span></span> ?pos_lnum:int <span class="rarr"><span>-&gt;</span></span> string <span class="rarr"><span>-&gt;</span></span> <a href="../../atd.1.1.2/atd_ast/">Atd_ast</a>.<a href="../../atd.1.1.2/atd_ast/#/type:full_module">full_module</a> * <a href="../../atd.1.1.2/atd_expand/">Atd_expand</a>.<a href="../../atd.1.1.2/atd_expand/#/type:original_types">original_types</a>
    
      <div class="doc">
        
      <p>Read ATD data from a string. Options: see <code>read_lexbuf</code>.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:tsort">
  <a href="index.html#/val:tsort" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tsort : <a href="../../atd.1.1.2/atd_ast/">Atd_ast</a>.<a href="../../atd.1.1.2/atd_ast/#/type:module_body">module_body</a> <span class="rarr"><span>-&gt;</span></span> (bool * <a href="../../atd.1.1.2/atd_ast/">Atd_ast</a>.<a href="../../atd.1.1.2/atd_ast/#/type:module_body">module_body</a>) list
    
      <div class="doc">
        
      <p>Topological sort for dependency analysis.
<code>tsort</code> splits definitions into mutually-recursive groups,
ordered such that each group may only depend on type definitions
of its own group or previous groups.
The boolean flags indicate groups of one or more
mutually recursive definitions.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
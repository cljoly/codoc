<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Type_generic</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Type_generic</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>A computation is the type of an operation that can be applied to various different
kind of types. It is expressed as a type with one parameter:</p>
      
      <p>type 'a computation</p>
      
      <p>Examples of computation:</p>
      
      <p>type sexp_of_t = ('a -&gt; Sexp.t) computation
type type_struct = Type_struct.t computation</p>
      
      <p>The term <code>generic</code> is used to refer to a specific implementation of a computation
whose concrete implementation is programmed using the type representation of values.</p>
      
      <p>For example, when one uses <code>with sexp</code> as a way to implement the <code>sexp_of_t</code>
computation, the technique used is code generation at compile time. Another approach
is to define a generic function <code>sexp_of_t</code> that inspects the representation of the
type at runtime.</p>
      
      <p>This module offers an abstraction over type rep in order to implement generics in a
efficient way.</p>
      
      <p>Provided from a user enough pieces of implementation regarding a particular
computation, this module returns essentially the following function:</p>
      
      <p>(** main function : get the computation from the typerep *)
val of_typerep : 'a Typerep.t -&gt; <code>`generic of 'a computation</code></p>
      
      <p>that allows one to get the generic computation operating on a given type <code>'a</code>.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/module:Variant_and_record_intf">
  <a href="index.html#/module:Variant_and_record_intf" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Variant_and_record_intf : <span class="keyword">module type of</span> Variant_and_record_intf</div>
      
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Helper">
  <a href="index.html#/module:Helper" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Helper : <span class="keyword">functor</span> (A : <a href="index.html#/module:Variant_and_record_intf">Variant_and_record_intf</a>.S) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">functor</span> (B : <a href="index.html#/module:Variant_and_record_intf">Variant_and_record_intf</a>.S) <span class="rarr"><span>-&gt;</span></span> <span class="keyword">sig</span></div>
      
      
    <div class="sig">
  <div class="region" id="/module:Helper/type:map">
  <a href="index.html#/module:Helper/type:map" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> map = {<table>
    <tr class="field">
  <td>
  <div class="region" id="/module:Helper/type:map/field:map">
  <a href="index.html#/module:Helper/type:map/field:map" class="anchor">#</a>
  map
  </div>
  </td><td>: 'a . 'a <a href="index.html#/module:Helper/modarg:1:A">A</a>.t <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Helper/modarg:2:B">B</a>.t</td><td>;</td><td></td><td></td><td></td>
  </tr>
    </table>}
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Helper/val:map_variant">
  <a href="index.html#/module:Helper/val:map_variant" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> map_variant : <a href="index.html#/module:Helper/type:map">map</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Helper/modarg:1:A">A</a>.Variant.t <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Helper/modarg:2:B">B</a>.Variant.t
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Helper/val:map_record">
  <a href="index.html#/module:Helper/val:map_record" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> map_record : <a href="index.html#/module:Helper/type:map">map</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Helper/modarg:1:A">A</a>.Record.t <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Helper/modarg:2:B">B</a>.Record.t
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Named">
  <a href="index.html#/modtype:Named" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> Named = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
  <div class="region" id="/modtype:Named/type:computation">
  <a href="index.html#/modtype:Named/type:computation" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a computation
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Named/module:Context">
  <a href="index.html#/modtype:Named/module:Context" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Context : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Work in progress representation of a computation. This is mostly used to handle
recursive types. While building a computation on a recursive type, one needs to have
some computation available for the location where the type appears recursively.
<code>init</code> will be called once on each new type_name met during the traversal of a type.
Each time the same type is encountered again, <code>get_wip_computation</code> will be called.
At the end of the traversal of that particular type, <code>set_final_computation</code> will be
called, offering as a way to &quot;close&quot; the wip representation. <code>'a t</code> can be mutable
(and is likely to be in practice).</p>
      
      <p>After a <code>set_final_computation</code> is performed and return a final computation C for a
type_name, C will be memoized and returned for each further occurrences of the same
type_name inside the typerep, going further on.</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/modtype:Named/module:Context/type:t">
  <a href="index.html#/modtype:Named/module:Context/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>Mutable context used to memorize some info during the traversal of a typerep.
A new context is created before starting to enter the toplevel of a typerep.
Then it is passed to all <code>init</code> calls that happen during the traversal of it.
The user of the generic functor is free to stuff there whatever context needs to be
available while creating a new value of type <code>'a Named.t</code></p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Named/module:Context/val:create">
  <a href="index.html#/modtype:Named/module:Context/val:create" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> create : unit <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:Named/module:Context/type:t">t</a>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Named/type:t">
  <a href="index.html#/modtype:Named/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a t
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Named/val:init">
  <a href="index.html#/modtype:Named/val:init" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> init : <a href="index.html#/modtype:Named/module:Context">Context</a>.<a href="index.html#/modtype:Named/module:Context/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../typerep.112.06.00/_build/lib/typename/">Typename</a>.<a href="../../../../typerep.112.06.00/_build/lib/typename/#/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/modtype:Named/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Named/val:get_wip_computation">
  <a href="index.html#/modtype:Named/val:get_wip_computation" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> get_wip_computation : 'a <a href="index.html#/modtype:Named/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/modtype:Named/type:computation">computation</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Named/val:set_final_computation">
  <a href="index.html#/modtype:Named/val:set_final_computation" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> set_final_computation : 'a <a href="index.html#/modtype:Named/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/modtype:Named/type:computation">computation</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/modtype:Named/type:computation">computation</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Named/val:share">
  <a href="index.html#/modtype:Named/val:share" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> share : _ <a href="../../../../typerep.112.06.00/_build/lib/std_internal/">Std_internal</a>.<a href="../../../../typerep.112.06.00/_build/lib/std_internal/#/module:Typerep">Typerep</a>.<a href="../../../../typerep.112.06.00/_build/lib/std_internal/#/module:Typerep/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> bool
    
      <div class="doc">
        
      <p>It might be interesting to inline some computation for a few typerep if they appear
several times within a typerep. This parameters will allow one to
tweak the sharing between multiple occurences of the same typename.
<code>share = true</code> means no inlining.</p>
      
      <p>Note that not sharing recursive types will lead the <code>of_typerep</code> function to loop
forever. Be careful when setting this.</p>
      
      <p>An example where it is not suitable to share everything for example is
typestruct. The typestruct of an int is a simple constructor called <code>Int</code>, naming it
once and using the name to refere to it later within the typestruct does not lead to
a shorter typestruct, and is in fact less readable. The benefit of the sharing
depends on the computation, its memory and building costs.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation">
  <a href="index.html#/modtype:Computation" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> Computation = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
  <div class="region" id="/modtype:Computation/type:t">
  <a href="index.html#/modtype:Computation/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a t
    
  </div>
  
  </div>
  
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/module:Variant_and_record_intf">Variant_and_record_intf</a>.S <span class="keyword">with</span> <span class="keyword">type</span> 'a t := 'a <a href="index.html#/modtype:Computation/type:t">t</a> 
    </div>
  
  <div class="region" id="/modtype:Computation/val:int">
  <a href="index.html#/modtype:Computation/val:int" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> int : int <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:int32">
  <a href="index.html#/modtype:Computation/val:int32" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> int32 : int32 <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:int64">
  <a href="index.html#/modtype:Computation/val:int64" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> int64 : int64 <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:nativeint">
  <a href="index.html#/modtype:Computation/val:nativeint" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> nativeint : nativeint <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:char">
  <a href="index.html#/modtype:Computation/val:char" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> char : char <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:float">
  <a href="index.html#/modtype:Computation/val:float" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> float : float <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:string">
  <a href="index.html#/modtype:Computation/val:string" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> string : string <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:bool">
  <a href="index.html#/modtype:Computation/val:bool" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> bool : bool <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:unit">
  <a href="index.html#/modtype:Computation/val:unit" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> unit : unit <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:option">
  <a href="index.html#/modtype:Computation/val:option" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> option : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a option <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:list">
  <a href="index.html#/modtype:Computation/val:list" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> list : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a list <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:array">
  <a href="index.html#/modtype:Computation/val:array" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> array : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a array <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:lazy_t">
  <a href="index.html#/modtype:Computation/val:lazy_t" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> lazy_t : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a lazy_t <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:ref_">
  <a href="index.html#/modtype:Computation/val:ref_" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> ref_ : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="../../../../ocaml.4.02.1+doc/stdlib/pervasives/">Pervasives</a>.<a href="../../../../ocaml.4.02.1+doc/stdlib/pervasives/#/type:ref">ref</a> <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:function_">
  <a href="index.html#/modtype:Computation/val:function_" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> function_ : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a <span class="rarr"><span>-&gt;</span></span> 'b) <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:tuple2">
  <a href="index.html#/modtype:Computation/val:tuple2" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tuple2 : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a * 'b) <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:tuple3">
  <a href="index.html#/modtype:Computation/val:tuple3" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tuple3 : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'c <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a * 'b * 'c) <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:tuple4">
  <a href="index.html#/modtype:Computation/val:tuple4" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tuple4 : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'c <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'd <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a * 'b * 'c * 'd) <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:tuple5">
  <a href="index.html#/modtype:Computation/val:tuple5" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> tuple5 : 'a <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'b <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'c <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'd <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'e <a href="index.html#/modtype:Computation/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> ('a * 'b * 'c * 'd * 'e) <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:record">
  <a href="index.html#/modtype:Computation/val:record" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> record : 'a <a href="index.html#/modtype:Computation/module:Record">Record</a>.t <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/val:variant">
  <a href="index.html#/modtype:Computation/val:variant" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> variant : 'a <a href="index.html#/modtype:Computation/module:Variant">Variant</a>.t <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/modtype:Computation/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:Computation/module:Named">
  <a href="index.html#/modtype:Computation/module:Named" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Named : <a href="index.html#/modtype:Named">Named</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="index.html#/modtype:Named/type:computation">computation</a> := 'a <a href="index.html#/modtype:Computation/type:t">t</a></div>
      
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Make_named_for_closure">
  <a href="index.html#/module:Make_named_for_closure" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make_named_for_closure : <span class="keyword">functor</span> (X : <span class="keyword">sig</span>
    <div class="sig">
  <div class="region" id="/module:Make_named_for_closure/modarg:1:X/type:input">
  <a href="index.html#/module:Make_named_for_closure/modarg:1:X/type:input" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a input
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Make_named_for_closure/modarg:1:X/type:output">
  <a href="index.html#/module:Make_named_for_closure/modarg:1:X/type:output" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a output
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Make_named_for_closure/modarg:1:X/type:t">
  <a href="index.html#/module:Make_named_for_closure/modarg:1:X/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a t = 'a <a href="index.html#/module:Make_named_for_closure/modarg:1:X/type:input">input</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/module:Make_named_for_closure/modarg:1:X/type:output">output</a>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    ) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:Named">Named</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="index.html#/modtype:Named/type:computation">computation</a> := 'a <a href="index.html#/module:Make_named_for_closure/modarg:1:X">X</a>.<a href="index.html#/module:Make_named_for_closure/modarg:1:X/type:t">t</a></div>
      
      <div class="doc">
        
      <p>Not all computations are arrow types. For example:</p>
      
      <p><code>'a computation = Type_struct.t</code>
<code>'a computation = Type_hash.t</code></p>
      
      <p>However, arrow types computation such as <code>of_sexp</code>, <code>sexp_of</code>, <code>json_of</code>, etc. are
such a standard case that is seems reasonable to share this extra layer of functor for
it to build the <code>Named</code> module.</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  
  <div class="region" id="/module:Ident">
  <a href="index.html#/module:Ident" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Ident : <span class="keyword">sig</span></div>
      
      
    <div class="sig">
  <div class="region" id="/module:Ident/type:t">
  <a href="index.html#/module:Ident/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> t
    
      <div class="doc">
        
      <p>Runtime identifier for a generic computation. This is essentially a string whose
purpose is to give reasonable error messages in case the dependency requirements for
a generic are not met at runtime.</p>
      
      <p>The field called <code>required</code> is needed in order to build a generic computation module.
It is used to establish a set up that would explicitly list all the computation that
are required by an other computation to work.</p>
      
      <p>Generic computations are a way to build dynamically some operations on types. It is
possible to build computation on top of each other. This ident type will be the key
to talk about other computations at the point of setting up the dependencies.</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S">
  <a href="index.html#/modtype:S" class="anchor">#</a>
  
  <div class="modtype">
    <div class="intro">
      <span class="keyword">module type</span> S = <span class="keyword">sig</span>
    </div>
    
    
    <div class="sig">
  <div class="region" id="/modtype:S/type:t">
  <a href="index.html#/modtype:S/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a t
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/type:computation">
  <a href="index.html#/modtype:S/type:computation" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a computation = 'a <a href="index.html#/modtype:S/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:ident">
  <a href="index.html#/modtype:S/val:ident" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> ident : <a href="index.html#/module:Ident">Ident</a>.<a href="index.html#/module:Ident/type:t">t</a>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/exn:Not_implemented">
  <a href="index.html#/modtype:S/exn:Not_implemented" class="anchor">#</a>
  
  <div class="exn">
    <span class="keyword">exception</span> Not_implemented <span class="keyword">of</span> string * string
    
      <div class="doc">
        
      <p>generic_ident * typename or info</p>
      
        
      </div>
    
  </div>
  
  </div>
  
    <div class="include">
    <span class="keyword">include</span> Type_generic_intf.S <span class="keyword">with</span> <span class="keyword">type</span> 'a t := 'a <a href="index.html#/modtype:S/type:t">t</a> 
    </div>
  
  <div class="region" id="/modtype:S/val:register0">
  <a href="index.html#/modtype:S/val:register0" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> register0 : (<span class="keyword">module</span> <a href="index.html#/modtype:S/modtype:S0">S0</a>) <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>Extending an existing generic for a particular type name</p>
      
      <p>The use of first class modules there is essentially because we cannot talk about a
variable of kind * -&gt; k
val register1 : 'a 't Typerep.t -&gt; ('a computation -&gt; 'a 't computation) -&gt; unit
...</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:register1">
  <a href="index.html#/modtype:S/val:register1" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> register1 : (<span class="keyword">module</span> <a href="index.html#/modtype:S/modtype:S1">S1</a>) <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:register2">
  <a href="index.html#/modtype:S/val:register2" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> register2 : (<span class="keyword">module</span> <a href="index.html#/modtype:S/modtype:S2">S2</a>) <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:register3">
  <a href="index.html#/modtype:S/val:register3" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> register3 : (<span class="keyword">module</span> <a href="index.html#/modtype:S/modtype:S3">S3</a>) <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:register4">
  <a href="index.html#/modtype:S/val:register4" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> register4 : (<span class="keyword">module</span> <a href="index.html#/modtype:S/modtype:S4">S4</a>) <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:register5">
  <a href="index.html#/modtype:S/val:register5" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> register5 : (<span class="keyword">module</span> <a href="index.html#/modtype:S/modtype:S5">S5</a>) <span class="rarr"><span>-&gt;</span></span> unit
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:register">
  <a href="index.html#/modtype:S/val:register" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> register : 'a <a href="../../../../typerep.112.06.00/_build/lib/std_internal/">Std_internal</a>.<a href="../../../../typerep.112.06.00/_build/lib/std_internal/#/module:Typerep">Typerep</a>.<a href="../../../../typerep.112.06.00/_build/lib/std_internal/#/module:Typerep/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> 'a <a href="index.html#/modtype:S/type:computation">computation</a> <span class="rarr"><span>-&gt;</span></span> unit
    
      <div class="doc">
        
      <p>special less scary type when the type has no parameters. this is equivalent as
using register0</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/val:of_typerep">
  <a href="index.html#/modtype:S/val:of_typerep" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> of_typerep : 'a <a href="../../../../typerep.112.06.00/_build/lib/std_internal/">Std_internal</a>.<a href="../../../../typerep.112.06.00/_build/lib/std_internal/#/module:Typerep">Typerep</a>.<a href="../../../../typerep.112.06.00/_build/lib/std_internal/#/module:Typerep/type:t">t</a> <span class="rarr"><span>-&gt;</span></span> [ <div class="cons">| `generic <span class="keyword">of</span> 'a <a href="index.html#/modtype:S/type:computation">computation</a></div> ]
    
      <div class="doc">
        
      <p>main function : compute the generic computation from the typerep</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/modtype:S/module:Computation">
  <a href="index.html#/modtype:S/module:Computation" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Computation : <a href="index.html#/modtype:Computation">Computation</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="index.html#/modtype:Computation/type:t">t</a> = 'a <a href="index.html#/modtype:S/type:t">t</a></div>
      
      <div class="doc">
        
      <p>exported to build a computation on top of a previous one</p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Make">
  <a href="index.html#/module:Make" class="anchor">#</a>
  
  <div class="module">
      
      <div class="intro"><span class="keyword">module</span> Make : <span class="keyword">functor</span> (X : <span class="keyword">sig</span>
    <div class="sig">
  <div class="region" id="/module:Make/modarg:1:X/type:t">
  <a href="index.html#/module:Make/modarg:1:X/type:t" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> 'a t
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Make/modarg:1:X/val:name">
  <a href="index.html#/module:Make/modarg:1:X/val:name" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> name : string
    
  </div>
  
  </div>
  
  <div class="region" id="/module:Make/modarg:1:X/val:required">
  <a href="index.html#/module:Make/modarg:1:X/val:required" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> required : <a href="index.html#/module:Ident">Ident</a>.<a href="index.html#/module:Ident/type:t">t</a> list
    
  </div>
  
  </div>
  
    <div class="include">
    <span class="keyword">include</span> <a href="index.html#/modtype:Computation">Computation</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="index.html#/modtype:Computation/type:t">t</a> := 'a <a href="index.html#/module:Make/modarg:1:X/type:t">t</a> 
    </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    ) <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/modtype:S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="index.html#/modtype:S/type:t">t</a> = 'a <a href="index.html#/module:Make/modarg:1:X">X</a>.<a href="index.html#/module:Make/modarg:1:X/type:t">t</a></div>
      
      <div class="doc">
        
      <p>The <code>name</code> is used for debug information only in case of Broken_dependency.
The <code>required</code> is to handle dependencies between generics at runtime.
Example:
if <code>X</code> is the module given to build a generic computation <code>G</code> that depends on three
other computation <code>A,B,C</code> then X.required shall be <code>A.ident ; B.ident ; C.ident</code></p>
      
        
      </div>
    
      
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../../../../codoc.css"/>
    <title>Depsolver</title>
  </head>
  <body>

  <div class="module codoc-doc">
      <a href="../../../">Up</a>
      <div class="intro"><h1 class="title"><span class="keyword">module</span> <a href="">Depsolver</a></h1> : <span class="keyword">sig</span></div>
      
      <div class="doc">
        
      <p>Dependency solver. Implementation of the Edos algorithms</p>
      
        
      </div>
    
      
    <div class="sig">
  <div class="region" id="/type:solver">
  <a href="index.html#/type:solver" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> solver
    
      <div class="doc">
        
      <p>the solver is an abstract data type associated to a universe</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:load">
  <a href="index.html#/val:load" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> load : ?check:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:solver">solver</a>
    
      <div class="doc">
        
      <p>initialize the solver. If <code>check</code> is true (default), then check
for universe consistency (cf. Cudf_checker.is_consistent)</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:result">
  <a href="index.html#/val:result" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> result : Depsolver_int.identity <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> Diagnostic_int.result <span class="rarr"><span>-&gt;</span></span> <a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:result">result</a>
    
      <div class="doc">
        
      <p>Turn a result from Diagnostic_int into one of Diagnostic</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:request">
  <a href="index.html#/val:request" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> request : <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> Diagnostic_int.request <span class="rarr"><span>-&gt;</span></span> <a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:request">request</a>
    
      <div class="doc">
        
      <p>Turn a request from Diagnostic_int into one of Diagnostic</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:edos_install">
  <a href="index.html#/val:edos_install" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> edos_install : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:diagnosis">diagnosis</a>
    
      <div class="doc">
        
      <p>check if the given package can be installed in the universe</p>
      
        
  <div class="tag param">
    <span class="label">global_constraints</span> : enforce global constraints on the given
universe. In particular packages marked as `Keep_package must be always
installed. Default false.
  </div>
  
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:edos_coinstall">
  <a href="index.html#/val:edos_coinstall" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> edos_coinstall : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:diagnosis">diagnosis</a>
    
      <div class="doc">
        
      <p>check if the give package list can be installed in the universe</p>
      
        
  <div class="tag param">
    <span class="label">global_constraints</span> : enforce global constraints on the given
universe. In particular packages marked as `Keep_package must be always
installed. Default false.
  </div>
  
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:edos_coinstall_prod">
  <a href="index.html#/val:edos_coinstall_prod" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> edos_coinstall_prod : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:diagnosis">diagnosis</a> list
    
      <div class="doc">
        
      <p>accept a list of list of packages and return the coinstallability test of
the cartesian product.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:trim">
  <a href="index.html#/val:trim" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> trim : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a>
    
      <div class="doc">
        
      <p>remove uninstallable packages from the universe . global_constraints is true
by default</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:find_broken">
  <a href="index.html#/val:find_broken" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> find_broken : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list
    
      <div class="doc">
        
      <p>return the list of broken packages</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:find_installable">
  <a href="index.html#/val:find_installable" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> find_installable : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list
    
      <div class="doc">
        
      <p>return the list of installable packages</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:find_listbroken">
  <a href="index.html#/val:find_listbroken" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> find_listbroken : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list
    
      <div class="doc">
        
      <p>return the list of broken packages</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:find_listinstallable">
  <a href="index.html#/val:find_listinstallable" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> find_listinstallable : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list
    
      <div class="doc">
        
      <p>return the list of installable packages</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:univcheck">
  <a href="index.html#/val:univcheck" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> univcheck : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> ?callback:(<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:diagnosis">diagnosis</a> <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> int
    
      <div class="doc">
        
      <p><code>univcheck</code> check if all packages in the universe can be installed.
Since not all packages are directly tested for installation, if a packages
is installable, the installation might be empty. To obtain an installation
set for each installable packages, the correct procedure is to iter on the
list of packages.</p>
      
        
  <div class="tag param">
    <span class="label">callback</span> : execute a function for each package. This function can
have side effects and can be used to collect the installation set or the
failure reason.
  </div>
  
  <div class="tag param">
    <span class="label">global_constraints</span> : enforce global constraints on the given
universe. In particular packages marked as `Keep_package must be always
installed. Default true.
  </div>
  
  <div class="tag return">
    <span class="label">Returns</span> the number of broken packages
  </div>
  
      </div>
    
  </div>
  
  </div>
  
      <div class="doc">
        
      <p><code>listcheck ~callback:c solver l</code> check if all packages in <code>l</code> can be
installed.</p>
      
      <p>Invariant : l is a subset of universe can be installed in the solver universe.</p>
      
        
  <div class="tag param">
    <span class="label">callback</span> : execute a function for each package.
  </div>
  
  <div class="tag param">
    <span class="label">global_constraints</span> : enforce global constraints on the given universe.
  </div>
  
  <div class="tag return">
    <span class="label">Returns</span> the number of broken packages
  </div>
  
      </div>
    
  <div class="region" id="/val:listcheck">
  <a href="index.html#/val:listcheck" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> listcheck : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> ?callback:(<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:diagnosis">diagnosis</a> <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list <span class="rarr"><span>-&gt;</span></span> int
    
  </div>
  
  </div>
  
  <div class="region" id="/val:dependency_closure">
  <a href="index.html#/val:dependency_closure" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> dependency_closure : ?maxdepth:int <span class="rarr"><span>-&gt;</span></span> ?conjunctive:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list
    
      <div class="doc">
        
      <p><code>dependency_closure universe l</code> compute the dependencies closure
of the give package list.
Invariant : l must be a subset of universe</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:reverse_dependencies">
  <a href="index.html#/val:reverse_dependencies" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> reverse_dependencies : <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list <a href="../../../../core_kernel.112.06.02/_build/lib/common/">Common</a>.CudfAdd.Cudf_hashtbl.t
    
      <div class="doc">
        
      <p><code>reverse_dependencies univ</code> compute the reverse dependency list of all
packages in the universe <code>univ</code></p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:reverse_dependency_closure">
  <a href="index.html#/val:reverse_dependency_closure" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> reverse_dependency_closure : ?maxdepth:int <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:package">package</a> list
    
      <div class="doc">
        
      <p><code>reverse_dependencies_closure univ</code> compute the reverse dependency list of all
packages in <code>l</code> in the universe <code>univ</code></p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:enc">
  <a href="index.html#/type:enc" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> enc = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:enc/cons:Cnf">
  <a href="index.html#/type:enc/cons:Cnf" class="anchor">#</a>
  | Cnf
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:enc/cons:Dimacs">
  <a href="index.html#/type:enc/cons:Dimacs" class="anchor">#</a>
  | Dimacs
  </div>
  </td><td></td><td></td><td></td></tr>
    </table>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:output_clauses">
  <a href="index.html#/val:output_clauses" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> output_clauses : ?global_constraints:bool <span class="rarr"><span>-&gt;</span></span> ?enc:<a href="index.html#/type:enc">enc</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a> <span class="rarr"><span>-&gt;</span></span> string
    
      <div class="doc">
        
      <p><code>output_clauses enc univ</code> return a string encoded accordingly to <code>enc</code>
(default cnf).</p>
      
        
  <div class="tag param">
    <span class="label">global_constraints</span> : enforce global constraints on the given universe.
  </div>
  
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/type:solver_result">
  <a href="index.html#/type:solver_result" class="anchor">#</a>
  
  <div class="type">
    <span class="keyword">type</span> solver_result = <table>
    <tr class="cons"><td>
  <div class="region" id="/type:solver_result/cons:Sat">
  <a href="index.html#/type:solver_result/cons:Sat" class="anchor">#</a>
  | Sat <span class="keyword">of</span> (<a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:preamble">preamble</a> option * <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a>)
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:solver_result/cons:Unsat">
  <a href="index.html#/type:solver_result/cons:Unsat" class="anchor">#</a>
  | Unsat <span class="keyword">of</span> <a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:diagnosis">diagnosis</a> option
  </div>
  </td><td></td><td></td><td></td></tr><tr class="cons"><td>
  <div class="region" id="/type:solver_result/cons:Error">
  <a href="index.html#/type:solver_result/cons:Error" class="anchor">#</a>
  | Error <span class="keyword">of</span> string
  </div>
  </td><td></td><td></td><td></td></tr>
    </table>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:check_request">
  <a href="index.html#/val:check_request" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> check_request : ?cmd:string <span class="rarr"><span>-&gt;</span></span> ?callback:(int array * <a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:diagnosis">diagnosis</a> <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> ?criteria:string <span class="rarr"><span>-&gt;</span></span> ?explain:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:cudf">cudf</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:solver_result">solver_result</a>
    
      <div class="doc">
        
      <p><code>check_request</code> check if there exists a solution for the give cudf document
if ?cmd is specified, it will be used to call an external cudf solver to
satisfy the request.
if ?criteria is specified it will be used as optimization criteria.
if ?explain is specified and there is no solution for the give request, the
result will contain the failure reason.</p>
      
        
      </div>
    
  </div>
  
  </div>
  
  <div class="region" id="/val:check_request_using">
  <a href="index.html#/val:check_request_using" class="anchor">#</a>
  
  <div class="val">
    <span class="keyword">val</span> check_request_using : ?call_solver:(<a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:cudf">cudf</a> <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:preamble">preamble</a> option * <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:universe">universe</a>) <span class="rarr"><span>-&gt;</span></span> ?callback:(int array * <a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/">Diagnostic</a>.<a href="../../../../dose.3.2.2+opam/_build/algo/diagnostic/#/type:diagnosis">diagnosis</a> <span class="rarr"><span>-&gt;</span></span> unit) <span class="rarr"><span>-&gt;</span></span> ?criteria:string <span class="rarr"><span>-&gt;</span></span> ?explain:bool <span class="rarr"><span>-&gt;</span></span> <a href="../../../../cudf.0.7/_build/cudf/">Cudf</a>.<a href="../../../../cudf.0.7/_build/cudf/#/type:cudf">cudf</a> <span class="rarr"><span>-&gt;</span></span> <a href="index.html#/type:solver_result">solver_result</a>
    
      <div class="doc">
        
      <p>Same as <code>check_request</code>, but allows to specify any function to call the
external solver. It should raise <code>Depsolver.Unsat</code> on failure</p>
      
        
      </div>
    
  </div>
  
  </div>
  </div>
    <div class="outro"><span class="keyword">end</span></div>
    
  </div>
  
  </body>
</html>